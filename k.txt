-- Roblox Executor Script (Enhanced Version)
-- Features: Draggable GUI, Minimize, Close, Player Targeting, Teleport, Noclip, Distance Adjustment, Auto Platform, Position Saving, Player Search, Multi-Language, Logging, Configuration, ESP Names, GUI Scaling, Drag Handle, Language Selection

-- Configuration (EDIT THESE VALUES)
local KEY = "123456" -- Change this to your desired key
local EXPIRATION_DATE = {
    Year = 2025,
    Month = 12,
    Day = 31,
    Hour = 23,
    Minute = 59,
    Second = 59
}

-- Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")

-- Variables
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
local Camera = workspace.CurrentCamera

-- State Variables
local NoClipping = false
local Authenticated = false
local Minimized = false
local AutoPlatform = false
local RunningAway = false
local FollowingTarget = false
local AutoNextTarget = false
local AutoCheckPosition = false
local SubMenuVisible = false
local LookingAtPlayer = false
local LookTarget = nil
local LookBodyPart = "Head"
local BodyParts = {"Head", "UpperTorso", "HumanoidRootPart", "LeftFoot", "RightFoot"}
local BodyPartIndex = 1
local ESPEnabled = false
local ESPTextSize = 14
local ESPColor = Color3.new(1, 1, 1)
local ESPDisplayMode = "name"
local ESPAlwaysOnTop = true
local ESPTable = {}
local ESPConnections = {}
local showDragHandle = false

-- Distance Settings
local DistanceBehind = 5
local DistanceAbove = 0
local DetectionRadius = 20

-- Safe Position Boundaries
local SafePositionMin = Vector3.new(-1000, -1000, -1000)
local SafePositionMax = Vector3.new(1000, 1000, 1000)

-- Saved Position
local SavedPosition = nil

-- Target Variables
local TargetPlayer = nil
local PlayerList = {}

-- Logging
local LogFile = "executor_log.txt"
local function Log(message)
    local logMessage = os.date("%Y-%m-%d %H:%M:%S") .. " - " .. message
    print(logMessage)
end

-- Configuration
local Config = {
    Language = "en",
    Theme = "dark"
}

-- Language Support
local Languages = {
    en = {
        title = "Roblox Executor",
        auth_title = "Enter Key to Continue",
        submit = "Submit",
        invalid_key = "Invalid Key! Try Again...",
        select_target = "Select Target",
        reload = "Reload",
        follow = "Follow: OFF",
        auto_next = "Auto Next: OFF",
        noclip = "Noclip: OFF",
        platform = "Platform: OFF",
        run_away = "Run Away: OFF",
        save_position = "Save Position",
        teleport_to_saved = "Teleport to Saved",
        auto_check_position = "Auto Check Position: OFF",
        apply_settings = "Apply Settings",
        look_at = "Look At: OFF",
        part = "Part: Head",
        select_nearest = "Select Nearest",
        teleport_behind = "Teleport Behind",
        current_target = "Current Target: None",
        expires = "Expires: Loading...",
        script_expired = "This Roblox script has expired",
        delete_script = "Delete Script",
        search_placeholder = "Search Player...",
        position_controls = "Position Controls",
        target_selection = "Target Selection",
        distance_controls = "Distance Controls",
        features = "Features",
        look_at_player = "Look At Player",
        safety_settings = "Settings",
        settings = "Settings",
        settings_applied = "Settings applied!",
        position_saved = "Position saved!",
        no_position_saved = "No position saved!",
        no_target_selected = "No target selected!",
        on = "ON",
        off = "OFF"
    },
    vi = {
        title = "Roblox Executor",
        auth_title = "Nhập Key để Tiếp Tục",
        submit = "Gửi",
        invalid_key = "Key Không Hợp Lệ! Thử Lại...",
        select_target = "Chọn Mục Tiêu",
        reload = "Tải Lại",
        follow = "Theo Dõi: TẮT",
        auto_next = "Tự Động Tiếp Theo: TẮT",
        noclip = "Noclip: TẮT",
        platform = "Bục: TẮT",
        run_away = "Chạy Trốn: TẮT",
        save_position = "Lưu Vị Trí",
        teleport_to_saved = "Dịch Chuyển Đến Vị Trí Đã Lưu",
        auto_check_position = "Tự Động Kiểm Tra Vị Trí: TẮT",
        apply_settings = "Áp Dụng Cài Đặt",
        look_at = "Nhìn Vào: TẮT",
        part = "Bộ Phận: Đầu",
        select_nearest = "Chọn Gần Nhất",
        teleport_behind = "Dịch Chuyển Phía Sau",
        current_target = "Mục Tiêu Hiện Tại: Không",
        expires = "Hết Hạn: Đang Tải...",
        script_expired = "Script Roblox này đã hết hạn",
        delete_script = "Xóa Script",
        search_placeholder = "Tìm Kiếm Người Chơi...",
        position_controls = "Kiểm Soát Vị Trí",
        target_selection = "Chọn Mục Tiêu",
        distance_controls = "Kiểm Soát Khoảng Cách",
        features = "Tính Năng",
        look_at_player = "Nhìn Vào Người Chơi",
        safety_settings = "Cài Đặt",
        settings = "Cài Đặt",
        settings_applied = "Cài đặt đã được áp dụng!",
        position_saved = "Vị trí đã được lưu!",
        no_position_saved = "Không có vị trí nào được lưu!",
        no_target_selected = "Không có mục tiêu nào được chọn!",
        on = "BẬT",
        off = "TẮT"
    }
}

-- Function to get localized text
local function GetText(key)
    local lang = Languages[Config.Language] or Languages.en
    return lang[key] or key
end

-- Create GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ExecutorGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 400, 0, 450)
MainFrame.Position = UDim2.new(0.5, -200, 0.5, -225)
MainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

local uiScale = Instance.new("UIScale")
uiScale.Name = "UIScale"
uiScale.Scale = 1.0
uiScale.Parent = MainFrame

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 10)
MainCorner.Parent = MainFrame

local MainStroke = Instance.new("UIStroke")
MainStroke.Thickness = 2
MainStroke.Color = Color3.fromRGB(255, 0, 0)
MainStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
MainStroke.Parent = MainFrame

-- Drag Handle
local DragHandle = Instance.new("Frame")
DragHandle.Name = "DragHandle"
DragHandle.Size = UDim2.new(0, 30, 0, 30)
DragHandle.Position = UDim2.new(0, 0, 0, 0)
DragHandle.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
DragHandle.BorderSizePixel = 0
DragHandle.Visible = false
DragHandle.Parent = MainFrame

local DragHandleCorner = Instance.new("UICorner")
DragHandleCorner.CornerRadius = UDim.new(0, 5)
DragHandleCorner.Parent = DragHandle

-- Title Bar
local TitleBar = Instance.new("Frame")
TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, 35)
TitleBar.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainFrame

local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 10)
TitleCorner.Parent = TitleBar

local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(1, -140, 1, 0)
Title.Position = UDim2.new(0, 15, 0, 0)
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 18
Title.Font = Enum.Font.GothamBold
Title.Text = GetText("title")
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = TitleBar

local SubMenuButton = Instance.new("TextButton")
SubMenuButton.Name = "SubMenuButton"
SubMenuButton.Size = UDim2.new(0, 35, 0, 35)
SubMenuButton.Position = UDim2.new(1, -140, 0, 0)
SubMenuButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
SubMenuButton.BorderSizePixel = 0
SubMenuButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SubMenuButton.TextSize = 18
SubMenuButton.Font = Enum.Font.GothamBold
SubMenuButton.Text = "≡"
SubMenuButton.Parent = TitleBar

local SubMenuCorner = Instance.new("UICorner")
SubMenuCorner.CornerRadius = UDim.new(0, 8)
SubMenuCorner.Parent = SubMenuButton

local SettingsButton = Instance.new("TextButton")
SettingsButton.Name = "SettingsButton"
SettingsButton.Size = UDim2.new(0, 35, 0, 35)
SettingsButton.Position = UDim2.new(1, -105, 0, 0)
SettingsButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
SettingsButton.BorderSizePixel = 0
SettingsButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SettingsButton.TextSize = 18
SettingsButton.Font = Enum.Font.GothamBold
SettingsButton.Text = "⚙️"
SettingsButton.Parent = TitleBar

local SettingsCorner = Instance.new("UICorner")
SettingsCorner.CornerRadius = UDim.new(0, 8)
SettingsCorner.Parent = SettingsButton

local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Name = "MinimizeButton"
MinimizeButton.Size = UDim2.new(0, 35, 0, 35)
MinimizeButton.Position = UDim2.new(1, -70, 0, 0)
MinimizeButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
MinimizeButton.BorderSizePixel = 0
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.TextSize = 18
MinimizeButton.Font = Enum.Font.GothamBold
MinimizeButton.Text = "-"
MinimizeButton.Parent = TitleBar

local MinimizeCorner = Instance.new("UICorner")
MinimizeCorner.CornerRadius = UDim.new(0, 8)
MinimizeCorner.Parent = MinimizeButton

local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 35, 0, 35)
CloseButton.Position = UDim2.new(1, -35, 0, 0)
CloseButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
CloseButton.BorderSizePixel = 0
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 18
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Text = "X"
CloseButton.Parent = TitleBar

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 8)
CloseCorner.Parent = CloseButton

-- Content Frame
local ContentFrame = Instance.new("Frame")
ContentFrame.Name = "ContentFrame"
ContentFrame.Size = UDim2.new(1, 0, 1, -35)
ContentFrame.Position = UDim2.new(0, 0, 0, 35)
ContentFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
ContentFrame.BorderSizePixel = 0
ContentFrame.Parent = MainFrame

-- Authentication Frame
local AuthFrame = Instance.new("Frame")
AuthFrame.Name = "AuthFrame"
AuthFrame.Size = UDim2.new(1, 0, 1, 0)
AuthFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
AuthFrame.BorderSizePixel = 0
AuthFrame.Visible = true
AuthFrame.Parent = ContentFrame

local AuthTitle = Instance.new("TextLabel")
AuthTitle.Name = "AuthTitle"
AuthTitle.Size = UDim2.new(1, 0, 0, 50)
AuthTitle.Position = UDim2.new(0, 0, 0.1, 0)
AuthTitle.BackgroundTransparency = 1
AuthTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
AuthTitle.TextSize = 24
AuthTitle.Font = Enum.Font.GothamBold
AuthTitle.Text = GetText("auth_title")
AuthTitle.Parent = AuthFrame

local KeyInput = Instance.new("TextBox")
KeyInput.Name = "KeyInput"
KeyInput.Size = UDim2.new(0.8, 0, 0, 40)
KeyInput.Position = UDim2.new(0.1, 0, 0.3, 0)
KeyInput.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
KeyInput.BorderSizePixel = 0
KeyInput.TextColor3 = Color3.fromRGB(255, 255, 255)
KeyInput.TextSize = 16
KeyInput.Font = Enum.Font.Gotham
KeyInput.PlaceholderText = "Enter Key Here..."
KeyInput.Text = ""
KeyInput.ClearTextOnFocus = false
KeyInput.Parent = AuthFrame

local KeyInputCorner = Instance.new("UICorner")
KeyInputCorner.CornerRadius = UDim.new(0, 8)
KeyInputCorner.Parent = KeyInput

local SubmitButton = Instance.new("TextButton")
SubmitButton.Name = "SubmitButton"
SubmitButton.Size = UDim2.new(0.5, 0, 0, 40)
SubmitButton.Position = UDim2.new(0.25, 0, 0.5, 0)
SubmitButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
SubmitButton.BorderSizePixel = 0
SubmitButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SubmitButton.TextSize = 16
SubmitButton.Font = Enum.Font.GothamBold
SubmitButton.Text = GetText("submit")
SubmitButton.Parent = AuthFrame

local SubmitCorner = Instance.new("UICorner")
SubmitCorner.CornerRadius = UDim.new(0, 8)
SubmitCorner.Parent = SubmitButton

local KeyNote = Instance.new("TextLabel")
KeyNote.Name = "KeyNote"
KeyNote.Size = UDim2.new(1, 0, 0, 30)
KeyNote.Position = UDim2.new(0, 0, 0.7, 0)
KeyNote.BackgroundTransparency = 1
KeyNote.TextColor3 = Color3.fromRGB(200, 200, 200)
KeyNote.TextSize = 14
KeyNote.Font = Enum.Font.Gotham
KeyNote.Text = "Contact admin for key"
KeyNote.Parent = AuthFrame

-- Features Frame
local FeaturesFrame = Instance.new("Frame")
FeaturesFrame.Name = "FeaturesFrame"
FeaturesFrame.Size = UDim2.new(1, 0, 1, 0)
FeaturesFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
FeaturesFrame.BorderSizePixel = 0
FeaturesFrame.Visible = false
FeaturesFrame.Parent = ContentFrame

local ScrollFrame = Instance.new("ScrollingFrame")
ScrollFrame.Name = "ScrollFrame"
ScrollFrame.Size = UDim2.new(1, -10, 1, -10)
ScrollFrame.Position = UDim2.new(0, 5, 0, 5)
ScrollFrame.BackgroundTransparency = 1
ScrollFrame.BorderSizePixel = 0
ScrollFrame.ScrollBarThickness = 6
ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 1200)
ScrollFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
ScrollFrame.ScrollingDirection = Enum.ScrollingDirection.Y
ScrollFrame.ScrollingEnabled = true
ScrollFrame.ElasticBehavior = Enum.ElasticBehavior.Always
ScrollFrame.Parent = FeaturesFrame

local ListLayout = Instance.new("UIListLayout")
ListLayout.Padding = UDim.new(0, 15)
ListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
ListLayout.Parent = ScrollFrame

-- Position Section
local PositionSection = Instance.new("Frame")
PositionSection.Name = "PositionSection"
PositionSection.Size = UDim2.new(0.95, 0, 0, 120)
PositionSection.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
PositionSection.BorderSizePixel = 0
PositionSection.Parent = ScrollFrame

local PositionSectionCorner = Instance.new("UICorner")
PositionSectionCorner.CornerRadius = UDim.new(0, 8)
PositionSectionCorner.Parent = PositionSection

local PositionTitle = Instance.new("TextLabel")
PositionTitle.Name = "PositionTitle"
PositionTitle.Size = UDim2.new(1, 0, 0, 35)
PositionTitle.BackgroundTransparency = 1
PositionTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
PositionTitle.TextSize = 18
PositionTitle.Font = Enum.Font.GothamBold
PositionTitle.Text = GetText("position_controls")
PositionTitle.Parent = PositionSection

local SavePositionButton = Instance.new("TextButton")
SavePositionButton.Name = "SavePositionButton"
SavePositionButton.Size = UDim2.new(0.45, 0, 0, 40)
SavePositionButton.Position = UDim2.new(0.05, 0, 0, 50)
SavePositionButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
SavePositionButton.BorderSizePixel = 0
SavePositionButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SavePositionButton.TextSize = 14
SavePositionButton.Font = Enum.Font.GothamBold
SavePositionButton.Text = GetText("save_position")
SavePositionButton.Parent = PositionSection

local SavePositionCorner = Instance.new("UICorner")
SavePositionCorner.CornerRadius = UDim.new(0, 6)
SavePositionCorner.Parent = SavePositionButton

local TeleportToSavedButton = Instance.new("TextButton")
TeleportToSavedButton.Name = "TeleportToSavedButton"
TeleportToSavedButton.Size = UDim2.new(0.45, 0, 0, 40)
TeleportToSavedButton.Position = UDim2.new(0.5, 0, 0, 50)
TeleportToSavedButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
TeleportToSavedButton.BorderSizePixel = 0
TeleportToSavedButton.TextColor3 = Color3.fromRGB(255, 255, 255)
TeleportToSavedButton.TextSize = 14
TeleportToSavedButton.Font = Enum.Font.GothamBold
TeleportToSavedButton.Text = GetText("teleport_to_saved")
TeleportToSavedButton.Parent = PositionSection

local TeleportToSavedCorner = Instance.new("UICorner")
TeleportToSavedCorner.CornerRadius = UDim.new(0, 6)
TeleportToSavedCorner.Parent = TeleportToSavedButton

-- Target Section
local TargetSection = Instance.new("Frame")
TargetSection.Name = "TargetSection"
TargetSection.Size = UDim2.new(0.95, 0, 0, 180)
TargetSection.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
TargetSection.BorderSizePixel = 0
TargetSection.Parent = ScrollFrame

local TargetSectionCorner = Instance.new("UICorner")
TargetSectionCorner.CornerRadius = UDim.new(0, 8)
TargetSectionCorner.Parent = TargetSection

local TargetTitle = Instance.new("TextLabel")
TargetTitle.Name = "TargetTitle"
TargetTitle.Size = UDim2.new(1, 0, 0, 35)
TargetTitle.BackgroundTransparency = 1
TargetTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
TargetTitle.TextSize = 18
TargetTitle.Font = Enum.Font.GothamBold
TargetTitle.Text = GetText("target_selection")
TargetTitle.Parent = TargetSection

local SearchBox = Instance.new("TextBox")
SearchBox.Name = "SearchBox"
SearchBox.Size = UDim2.new(0.6, 0, 0, 35)
SearchBox.Position = UDim2.new(0.05, 0, 0, 45)
SearchBox.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
SearchBox.BorderSizePixel = 0
SearchBox.TextColor3 = Color3.fromRGB(255, 255, 255)
SearchBox.TextSize = 14
SearchBox.Font = Enum.Font.Gotham
SearchBox.PlaceholderText = GetText("search_placeholder")
SearchBox.Text = ""
SearchBox.Parent = TargetSection

local SearchBoxCorner = Instance.new("UICorner")
SearchBoxCorner.CornerRadius = UDim.new(0, 6)
SearchBoxCorner.Parent = SearchBox

local TargetDropdown = Instance.new("TextButton")
TargetDropdown.Name = "TargetDropdown"
TargetDropdown.Size = UDim2.new(0.3, 0, 0, 35)
TargetDropdown.Position = UDim2.new(0.65, 0, 0, 45)
TargetDropdown.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
TargetDropdown.BorderSizePixel = 0
TargetDropdown.TextColor3 = Color3.fromRGB(255, 255, 255)
TargetDropdown.TextSize = 14
TargetDropdown.Font = Enum.Font.Gotham
TargetDropdown.Text = GetText("select_target")
TargetDropdown.Parent = TargetSection

local TargetDropdownCorner = Instance.new("UICorner")
TargetDropdownCorner.CornerRadius = UDim.new(0, 6)
TargetDropdownCorner.Parent = TargetDropdown

local ReloadButton = Instance.new("TextButton")
ReloadButton.Name = "ReloadButton"
ReloadButton.Size = UDim2.new(0.3, 0, 0, 35)
ReloadButton.Position = UDim2.new(0.65, 0, 0, 85)
ReloadButton.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
ReloadButton.BorderSizePixel = 0
ReloadButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ReloadButton.TextSize = 14
ReloadButton.Font = Enum.Font.Gotham
ReloadButton.Text = GetText("reload")
ReloadButton.Parent = TargetSection

local ReloadCorner = Instance.new("UICorner")
ReloadCorner.CornerRadius = UDim.new(0, 6)
ReloadCorner.Parent = ReloadButton

local FollowButton = Instance.new("TextButton")
FollowButton.Name = "FollowButton"
FollowButton.Size = UDim2.new(0.45, 0, 0, 40)
FollowButton.Position = UDim2.new(0.05, 0, 0, 125)
FollowButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
FollowButton.BorderSizePixel = 0
FollowButton.TextColor3 = Color3.fromRGB(255, 255, 255)
FollowButton.TextSize = 14
FollowButton.Font = Enum.Font.GothamBold
FollowButton.Text = GetText("follow")
FollowButton.Parent = TargetSection

local FollowCorner = Instance.new("UICorner")
FollowCorner.CornerRadius = UDim.new(0, 6)
FollowCorner.Parent = FollowButton

local NextButton = Instance.new("TextButton")
NextButton.Name = "NextButton"
NextButton.Size = UDim2.new(0.45, 0, 0, 40)
NextButton.Position = UDim2.new(0.5, 0, 0, 125)
NextButton.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
NextButton.BorderSizePixel = 0
NextButton.TextColor3 = Color3.fromRGB(255, 255, 255)
NextButton.TextSize = 14
NextButton.Font = Enum.Font.GothamBold
NextButton.Text = GetText("auto_next")
NextButton.Parent = TargetSection

local NextCorner = Instance.new("UICorner")
NextCorner.CornerRadius = UDim.new(0, 6)
NextCorner.Parent = NextButton

local DropdownFrame = Instance.new("Frame")
DropdownFrame.Name = "DropdownFrame"
DropdownFrame.Size = UDim2.new(0.6, 0, 0, 250)
DropdownFrame.Position = UDim2.new(0.05, 0, 0, 85)
DropdownFrame.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
DropdownFrame.BorderSizePixel = 0
DropdownFrame.Visible = false
DropdownFrame.ZIndex = 10
DropdownFrame.Parent = TargetSection

local DropdownFrameCorner = Instance.new("UICorner")
DropdownFrameCorner.CornerRadius = UDim.new(0, 6)
DropdownFrameCorner.Parent = DropdownFrame

local PlayerScrollFrame = Instance.new("ScrollingFrame")
PlayerScrollFrame.Name = "PlayerScrollFrame"
PlayerScrollFrame.Size = UDim2.new(1, -10, 1, -10)
PlayerScrollFrame.Position = UDim2.new(0, 5, 0, 5)
PlayerScrollFrame.BackgroundTransparency = 1
PlayerScrollFrame.BorderSizePixel = 0
PlayerScrollFrame.ScrollBarThickness = 4
PlayerScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
PlayerScrollFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
PlayerScrollFrame.ScrollingDirection = Enum.ScrollingDirection.Y
PlayerScrollFrame.ScrollingEnabled = true
PlayerScrollFrame.ElasticBehavior = Enum.ElasticBehavior.Always
PlayerScrollFrame.ZIndex = 11
PlayerScrollFrame.Parent = DropdownFrame

local PlayerListLayout = Instance.new("UIListLayout")
PlayerListLayout.Padding = UDim.new(0, 5)
PlayerListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
PlayerListLayout.Parent = PlayerScrollFrame

-- Distance Section
local DistanceSection = Instance.new("Frame")
DistanceSection.Name = "DistanceSection"
DistanceSection.Size = UDim2.new(0.95, 0, 0, 180)
DistanceSection.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
DistanceSection.BorderSizePixel = 0
DistanceSection.Parent = ScrollFrame

local DistanceSectionCorner = Instance.new("UICorner")
DistanceSectionCorner.CornerRadius = UDim.new(0, 8)
DistanceSectionCorner.Parent = DistanceSection

local DistanceTitle = Instance.new("TextLabel")
DistanceTitle.Name = "DistanceTitle"
DistanceTitle.Size = UDim2.new(1, 0, 0, 35)
DistanceTitle.BackgroundTransparency = 1
DistanceTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
DistanceTitle.TextSize = 18
DistanceTitle.Font = Enum.Font.GothamBold
DistanceTitle.Text = GetText("distance_controls")
DistanceTitle.Parent = DistanceSection

local HorizontalLabel = Instance.new("TextLabel")
HorizontalLabel.Name = "HorizontalLabel"
HorizontalLabel.Size = UDim2.new(0.4, 0, 0, 30)
HorizontalLabel.Position = UDim2.new(0.05, 0, 0, 45)
HorizontalLabel.BackgroundTransparency = 1
HorizontalLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
HorizontalLabel.TextSize = 14
HorizontalLabel.Font = Enum.Font.Gotham
HorizontalLabel.Text = "Behind:"
HorizontalLabel.TextXAlignment = Enum.TextXAlignment.Left
HorizontalLabel.Parent = DistanceSection

local HorizontalInput = Instance.new("TextBox")
HorizontalInput.Name = "HorizontalInput"
HorizontalInput.Size = UDim2.new(0.2, 0, 0, 30)
HorizontalInput.Position = UDim2.new(0.45, 0, 0, 45)
HorizontalInput.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
HorizontalInput.BorderSizePixel = 0
HorizontalInput.TextColor3 = Color3.fromRGB(255, 255, 255)
HorizontalInput.TextSize = 14
HorizontalInput.Font = Enum.Font.Gotham
HorizontalInput.Text = "5"
HorizontalInput.Parent = DistanceSection

local HorizontalInputCorner = Instance.new("UICorner")
HorizontalInputCorner.CornerRadius = UDim.new(0, 6)
HorizontalInputCorner.Parent = HorizontalInput

local HorizontalPlus = Instance.new("TextButton")
HorizontalPlus.Name = "HorizontalPlus"
HorizontalPlus.Size = UDim2.new(0.1, 0, 0, 30)
HorizontalPlus.Position = UDim2.new(0.7, 0, 0, 45)
HorizontalPlus.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
HorizontalPlus.BorderSizePixel = 0
HorizontalPlus.TextColor3 = Color3.fromRGB(255, 255, 255)
HorizontalPlus.TextSize = 14
HorizontalPlus.Font = Enum.Font.GothamBold
HorizontalPlus.Text = "+"
HorizontalPlus.Parent = DistanceSection

local HorizontalPlusCorner = Instance.new("UICorner")
HorizontalPlusCorner.CornerRadius = UDim.new(0, 6)
HorizontalPlusCorner.Parent = HorizontalPlus

local HorizontalMinus = Instance.new("TextButton")
HorizontalMinus.Name = "HorizontalMinus"
HorizontalMinus.Size = UDim2.new(0.1, 0, 0, 30)
HorizontalMinus.Position = UDim2.new(0.85, 0, 0, 45)
HorizontalMinus.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
HorizontalMinus.BorderSizePixel = 0
HorizontalMinus.TextColor3 = Color3.fromRGB(255, 255, 255)
HorizontalMinus.TextSize = 14
HorizontalMinus.Font = Enum.Font.GothamBold
HorizontalMinus.Text = "-"
HorizontalMinus.Parent = DistanceSection

local HorizontalMinusCorner = Instance.new("UICorner")
HorizontalMinusCorner.CornerRadius = UDim.new(0, 6)
HorizontalMinusCorner.Parent = HorizontalMinus

local VerticalLabel = Instance.new("TextLabel")
VerticalLabel.Name = "VerticalLabel"
VerticalLabel.Size = UDim2.new(0.4, 0, 0, 30)
VerticalLabel.Position = UDim2.new(0.05, 0, 0, 85)
VerticalLabel.BackgroundTransparency = 1
VerticalLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
VerticalLabel.TextSize = 14
VerticalLabel.Font = Enum.Font.Gotham
VerticalLabel.Text = "Above:"
VerticalLabel.TextXAlignment = Enum.TextXAlignment.Left
VerticalLabel.Parent = DistanceSection

local VerticalInput = Instance.new("TextBox")
VerticalInput.Name = "VerticalInput"
VerticalInput.Size = UDim2.new(0.2, 0, 0, 30)
VerticalInput.Position = UDim2.new(0.45, 0, 0, 85)
VerticalInput.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
VerticalInput.BorderSizePixel = 0
VerticalInput.TextColor3 = Color3.fromRGB(255, 255, 255)
VerticalInput.TextSize = 14
VerticalInput.Font = Enum.Font.Gotham
VerticalInput.Text = "0"
VerticalInput.Parent = DistanceSection

local VerticalInputCorner = Instance.new("UICorner")
VerticalInputCorner.CornerRadius = UDim.new(0, 6)
VerticalInputCorner.Parent = VerticalInput

local VerticalPlus = Instance.new("TextButton")
VerticalPlus.Name = "VerticalPlus"
VerticalPlus.Size = UDim2.new(0.1, 0, 0, 30)
VerticalPlus.Position = UDim2.new(0.7, 0, 0, 85)
VerticalPlus.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
VerticalPlus.BorderSizePixel = 0
VerticalPlus.TextColor3 = Color3.fromRGB(255, 255, 255)
VerticalPlus.TextSize = 14
VerticalPlus.Font = Enum.Font.GothamBold
VerticalPlus.Text = "+"
VerticalPlus.Parent = DistanceSection

local VerticalPlusCorner = Instance.new("UICorner")
VerticalPlusCorner.CornerRadius = UDim.new(0, 6)
VerticalPlusCorner.Parent = VerticalPlus

local VerticalMinus = Instance.new("TextButton")
VerticalMinus.Name = "VerticalMinus"
VerticalMinus.Size = UDim2.new(0.1, 0, 0, 30)
VerticalMinus.Position = UDim2.new(0.85, 0, 0, 85)
VerticalMinus.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
VerticalMinus.BorderSizePixel = 0
VerticalMinus.TextColor3 = Color3.fromRGB(255, 255, 255)
VerticalMinus.TextSize = 14
VerticalMinus.Font = Enum.Font.GothamBold
VerticalMinus.Text = "-"
VerticalMinus.Parent = DistanceSection

local VerticalMinusCorner = Instance.new("UICorner")
VerticalMinusCorner.CornerRadius = UDim.new(0, 6)
VerticalMinusCorner.Parent = VerticalMinus

local RadiusLabel = Instance.new("TextLabel")
RadiusLabel.Name = "RadiusLabel"
RadiusLabel.Size = UDim2.new(0.4, 0, 0, 30)
RadiusLabel.Position = UDim2.new(0.05, 0, 0, 125)
RadiusLabel.BackgroundTransparency = 1
RadiusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
RadiusLabel.TextSize = 14
RadiusLabel.Font = Enum.Font.Gotham
RadiusLabel.Text = "Detection Radius:"
RadiusLabel.TextXAlignment = Enum.TextXAlignment.Left
RadiusLabel.Parent = DistanceSection

local RadiusInput = Instance.new("TextBox")
RadiusInput.Name = "RadiusInput"
RadiusInput.Size = UDim2.new(0.2, 0, 0, 30)
RadiusInput.Position = UDim2.new(0.45, 0, 0, 125)
RadiusInput.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
RadiusInput.BorderSizePixel = 0
RadiusInput.TextColor3 = Color3.fromRGB(255, 255, 255)
RadiusInput.TextSize = 14
RadiusInput.Font = Enum.Font.Gotham
RadiusInput.Text = "20"
RadiusInput.Parent = DistanceSection

local RadiusInputCorner = Instance.new("UICorner")
RadiusInputCorner.CornerRadius = UDim.new(0, 6)
RadiusInputCorner.Parent = RadiusInput

local RadiusPlus = Instance.new("TextButton")
RadiusPlus.Name = "RadiusPlus"
RadiusPlus.Size = UDim2.new(0.1, 0, 0, 30)
RadiusPlus.Position = UDim2.new(0.7, 0, 0, 125)
RadiusPlus.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
RadiusPlus.BorderSizePixel = 0
RadiusPlus.TextColor3 = Color3.fromRGB(255, 255, 255)
RadiusPlus.TextSize = 14
RadiusPlus.Font = Enum.Font.GothamBold
RadiusPlus.Text = "+"
RadiusPlus.Parent = DistanceSection

local RadiusPlusCorner = Instance.new("UICorner")
RadiusPlusCorner.CornerRadius = UDim.new(0, 6)
RadiusPlusCorner.Parent = RadiusPlus

local RadiusMinus = Instance.new("TextButton")
RadiusMinus.Name = "RadiusMinus"
RadiusMinus.Size = UDim2.new(0.1, 0, 0, 30)
RadiusMinus.Position = UDim2.new(0.85, 0, 0, 125)
RadiusMinus.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
RadiusMinus.BorderSizePixel = 0
RadiusMinus.TextColor3 = Color3.fromRGB(255, 255, 255)
RadiusMinus.TextSize = 14
RadiusMinus.Font = Enum.Font.GothamBold
RadiusMinus.Text = "-"
RadiusMinus.Parent = DistanceSection

local RadiusMinusCorner = Instance.new("UICorner")
RadiusMinusCorner.CornerRadius = UDim.new(0, 6)
RadiusMinusCorner.Parent = RadiusMinus

-- Features Button Section
local FeaturesButtonSection = Instance.new("Frame")
FeaturesButtonSection.Name = "FeaturesButtonSection"
FeaturesButtonSection.Size = UDim2.new(0.95, 0, 0, 220)
FeaturesButtonSection.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
FeaturesButtonSection.BorderSizePixel = 0
FeaturesButtonSection.Parent = ScrollFrame

local FeaturesButtonSectionCorner = Instance.new("UICorner")
FeaturesButtonSectionCorner.CornerRadius = UDim.new(0, 8)
FeaturesButtonSectionCorner.Parent = FeaturesButtonSection

local FeaturesTitle = Instance.new("TextLabel")
FeaturesTitle.Name = "FeaturesTitle"
FeaturesTitle.Size = UDim2.new(1, 0, 0, 35)
FeaturesTitle.BackgroundTransparency = 1
FeaturesTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
FeaturesTitle.TextSize = 18
FeaturesTitle.Font = Enum.Font.GothamBold
FeaturesTitle.Text = GetText("features")
FeaturesTitle.Parent = FeaturesButtonSection

local NoclipButton = Instance.new("TextButton")
NoclipButton.Name = "NoclipButton"
NoclipButton.Size = UDim2.new(0.45, 0, 0, 40)
NoclipButton.Position = UDim2.new(0.05, 0, 0, 45)
NoclipButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
NoclipButton.BorderSizePixel = 0
NoclipButton.TextColor3 = Color3.fromRGB(255, 255, 255)
NoclipButton.TextSize = 14
NoclipButton.Font = Enum.Font.GothamBold
NoclipButton.Text = GetText("noclip")
NoclipButton.Parent = FeaturesButtonSection

local NoclipCorner = Instance.new("UICorner")
NoclipCorner.CornerRadius = UDim.new(0, 6)
NoclipCorner.Parent = NoclipButton

local PlatformButton = Instance.new("TextButton")
PlatformButton.Name = "PlatformButton"
PlatformButton.Size = UDim2.new(0.45, 0, 0, 40)
PlatformButton.Position = UDim2.new(0.5, 0, 0, 45)
PlatformButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
PlatformButton.BorderSizePixel = 0
PlatformButton.TextColor3 = Color3.fromRGB(255, 255, 255)
PlatformButton.TextSize = 14
PlatformButton.Font = Enum.Font.GothamBold
PlatformButton.Text = GetText("platform")
PlatformButton.Parent = FeaturesButtonSection

local PlatformCorner = Instance.new("UICorner")
PlatformCorner.CornerRadius = UDim.new(0, 6)
PlatformCorner.Parent = PlatformButton

local RunButton = Instance.new("TextButton")
RunButton.Name = "RunButton"
RunButton.Size = UDim2.new(0.45, 0, 0, 40)
RunButton.Position = UDim2.new(0.05, 0, 0, 95)
RunButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
RunButton.BorderSizePixel = 0
RunButton.TextColor3 = Color3.fromRGB(255, 255, 255)
RunButton.TextSize = 14
RunButton.Font = Enum.Font.GothamBold
RunButton.Text = GetText("run_away")
RunButton.Parent = FeaturesButtonSection

local RunCorner = Instance.new("UICorner")
RunCorner.CornerRadius = UDim.new(0, 6)
RunCorner.Parent = RunButton

local AutoNextCheck = Instance.new("Frame")
AutoNextCheck.Name = "AutoNextCheck"
AutoNextCheck.Size = UDim2.new(0.05, 0, 0, 25)
AutoNextCheck.Position = UDim2.new(0.5, 0, 0, 102.5)
AutoNextCheck.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
AutoNextCheck.BorderSizePixel = 0
AutoNextCheck.Parent = FeaturesButtonSection

local AutoNextCheckCorner = Instance.new("UICorner")
AutoNextCheckCorner.CornerRadius = UDim.new(0, 4)
AutoNextCheckCorner.Parent = AutoNextCheck

local AutoNextLabel = Instance.new("TextLabel")
AutoNextLabel.Name = "AutoNextLabel"
AutoNextLabel.Size = UDim2.new(0.35, 0, 0, 40)
AutoNextLabel.Position = UDim2.new(0.6, 0, 0, 95)
AutoNextLabel.BackgroundTransparency = 1
AutoNextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
AutoNextLabel.TextSize = 14
AutoNextLabel.Font = Enum.Font.Gotham
AutoNextLabel.Text = "Auto Next Target"
AutoNextLabel.TextXAlignment = Enum.TextXAlignment.Left
AutoNextLabel.Parent = FeaturesButtonSection

local AutoPlatformCheck = Instance.new("Frame")
AutoPlatformCheck.Name = "AutoPlatformCheck"
AutoPlatformCheck.Size = UDim2.new(0.05, 0, 0, 25)
AutoPlatformCheck.Position = UDim2.new(0.05, 0, 0, 152.5)
AutoPlatformCheck.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
AutoPlatformCheck.BorderSizePixel = 0
AutoPlatformCheck.Parent = FeaturesButtonSection

local AutoPlatformCheckCorner = Instance.new("UICorner")
AutoPlatformCheckCorner.CornerRadius = UDim.new(0, 4)
AutoPlatformCheckCorner.Parent = AutoPlatformCheck

local AutoPlatformLabel = Instance.new("TextLabel")
AutoPlatformLabel.Name = "AutoPlatformLabel"
AutoPlatformLabel.Size = UDim2.new(0.35, 0, 0, 40)
AutoPlatformLabel.Position = UDim2.new(0.15, 0, 0, 145)
AutoPlatformLabel.BackgroundTransparency = 1
AutoPlatformLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
AutoPlatformLabel.TextSize = 14
AutoPlatformLabel.Font = Enum.Font.Gotham
AutoPlatformLabel.Text = "Auto Platform"
AutoPlatformLabel.TextXAlignment = Enum.TextXAlignment.Left
AutoPlatformLabel.Parent = FeaturesButtonSection

local RunAwayCheck = Instance.new("Frame")
RunAwayCheck.Name = "RunAwayCheck"
RunAwayCheck.Size = UDim2.new(0.05, 0, 0, 25)
RunAwayCheck.Position = UDim2.new(0.5, 0, 0, 152.5)
RunAwayCheck.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
RunAwayCheck.BorderSizePixel = 0
RunAwayCheck.Parent = FeaturesButtonSection

local RunAwayCheckCorner = Instance.new("UICorner")
RunAwayCheckCorner.CornerRadius = UDim.new(0, 4)
RunAwayCheckCorner.Parent = RunAwayCheck

local RunAwayLabel = Instance.new("TextLabel")
RunAwayLabel.Name = "RunAwayLabel"
RunAwayLabel.Size = UDim2.new(0.35, 0, 0, 40)
RunAwayLabel.Position = UDim2.new(0.6, 0, 0, 145)
RunAwayLabel.BackgroundTransparency = 1
RunAwayLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
RunAwayLabel.TextSize = 14
RunAwayLabel.Font = Enum.Font.Gotham
RunAwayLabel.Text = "Run on Detect"
RunAwayLabel.TextXAlignment = Enum.TextXAlignment.Left
RunAwayLabel.Parent = FeaturesButtonSection

-- Expiration Section
local ExpirationSection = Instance.new("Frame")
ExpirationSection.Name = "ExpirationSection"
ExpirationSection.Size = UDim2.new(0.95, 0, 0, 60)
ExpirationSection.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
ExpirationSection.BorderSizePixel = 0
ExpirationSection.Parent = ScrollFrame

local ExpirationSectionCorner = Instance.new("UICorner")
ExpirationSectionCorner.CornerRadius = UDim.new(0, 8)
ExpirationSectionCorner.Parent = ExpirationSection

local ExpirationLabel = Instance.new("TextLabel")
ExpirationLabel.Name = "ExpirationLabel"
ExpirationLabel.Size = UDim2.new(1, 0, 1, 0)
ExpirationLabel.BackgroundTransparency = 1
ExpirationLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
ExpirationLabel.TextSize = 14
ExpirationLabel.Font = Enum.Font.Gotham
ExpirationLabel.Text = GetText("expires")
ExpirationLabel.Parent = ExpirationSection

-- Look At Section
local LookAtSection = Instance.new("Frame")
LookAtSection.Name = "LookAtSection"
LookAtSection.Size = UDim2.new(0.95, 0, 0, 200)
LookAtSection.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
LookAtSection.BorderSizePixel = 0
LookAtSection.Parent = ScrollFrame

local LookAtSectionCorner = Instance.new("UICorner")
LookAtSectionCorner.CornerRadius = UDim.new(0, 8)
LookAtSectionCorner.Parent = LookAtSection

local LookAtTitle = Instance.new("TextLabel")
LookAtTitle.Name = "LookAtTitle"
LookAtTitle.Size = UDim2.new(1, 0, 0, 35)
LookAtTitle.BackgroundTransparency = 1
LookAtTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
LookAtTitle.TextSize = 18
LookAtTitle.Font = Enum.Font.GothamBold
LookAtTitle.Text = GetText("look_at_player")
LookAtTitle.Parent = LookAtSection

local LookAtButton = Instance.new("TextButton")
LookAtButton.Name = "LookAtButton"
LookAtButton.Size = UDim2.new(0.45, 0, 0, 40)
LookAtButton.Position = UDim2.new(0.05, 0, 0, 45)
LookAtButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
LookAtButton.BorderSizePixel = 0
LookAtButton.TextColor3 = Color3.fromRGB(255, 255, 255)
LookAtButton.TextSize = 14
LookAtButton.Font = Enum.Font.GothamBold
LookAtButton.Text = GetText("look_at")
LookAtButton.Parent = LookAtSection

local LookAtCorner = Instance.new("UICorner")
LookAtCorner.CornerRadius = UDim.new(0, 6)
LookAtCorner.Parent = LookAtButton

local BodyPartButton = Instance.new("TextButton")
BodyPartButton.Name = "BodyPartButton"
BodyPartButton.Size = UDim2.new(0.45, 0, 0, 40)
BodyPartButton.Position = UDim2.new(0.5, 0, 0, 45)
BodyPartButton.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
BodyPartButton.BorderSizePixel = 0
BodyPartButton.TextColor3 = Color3.fromRGB(255, 255, 255)
BodyPartButton.TextSize = 14
BodyPartButton.Font = Enum.Font.GothamBold
BodyPartButton.Text = GetText("part")
BodyPartButton.Parent = LookAtSection

local BodyPartCorner = Instance.new("UICorner")
BodyPartCorner.CornerRadius = UDim.new(0, 6)
BodyPartCorner.Parent = BodyPartButton

local NearestPlayerButton = Instance.new("TextButton")
NearestPlayerButton.Name = "NearestPlayerButton"
NearestPlayerButton.Size = UDim2.new(0.45, 0, 0, 40)
NearestPlayerButton.Position = UDim2.new(0.05, 0, 0, 95)
NearestPlayerButton.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
NearestPlayerButton.BorderSizePixel = 0
NearestPlayerButton.TextColor3 = Color3.fromRGB(255, 255, 255)
NearestPlayerButton.TextSize = 14
NearestPlayerButton.Font = Enum.Font.GothamBold
NearestPlayerButton.Text = GetText("select_nearest")
NearestPlayerButton.Parent = LookAtSection

local NearestPlayerCorner = Instance.new("UICorner")
NearestPlayerCorner.CornerRadius = UDim.new(0, 6)
NearestPlayerCorner.Parent = NearestPlayerButton

local TeleportBehindButton = Instance.new("TextButton")
TeleportBehindButton.Name = "TeleportBehindButton"
TeleportBehindButton.Size = UDim2.new(0.45, 0, 0, 40)
TeleportBehindButton.Position = UDim2.new(0.5, 0, 0, 95)
TeleportBehindButton.BackgroundColor3 = Color3.fromRGB(0, 0, 255)
TeleportBehindButton.BorderSizePixel = 0
TeleportBehindButton.TextColor3 = Color3.fromRGB(255, 255, 255)
TeleportBehindButton.TextSize = 14
TeleportBehindButton.Font = Enum.Font.GothamBold
TeleportBehindButton.Text = GetText("teleport_behind")
TeleportBehindButton.Parent = LookAtSection

local TeleportBehindCorner = Instance.new("UICorner")
TeleportBehindCorner.CornerRadius = UDim.new(0, 6)
TeleportBehindCorner.Parent = TeleportBehindButton

local CurrentTargetLabel = Instance.new("TextLabel")
CurrentTargetLabel.Name = "CurrentTargetLabel"
CurrentTargetLabel.Size = UDim2.new(0.9, 0, 0, 30)
CurrentTargetLabel.Position = UDim2.new(0.05, 0, 0, 145)
CurrentTargetLabel.BackgroundTransparency = 1
CurrentTargetLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
CurrentTargetLabel.TextSize = 14
CurrentTargetLabel.Font = Enum.Font.Gotham
CurrentTargetLabel.Text = GetText("current_target")
CurrentTargetLabel.TextXAlignment = Enum.TextXAlignment.Left
CurrentTargetLabel.Parent = LookAtSection

-- Expired Frame
local ExpiredFrame = Instance.new("Frame")
ExpiredFrame.Name = "ExpiredFrame"
ExpiredFrame.Size = UDim2.new(1, 0, 1, 0)
ExpiredFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
ExpiredFrame.BorderSizePixel = 0
ExpiredFrame.Visible = false
ExpiredFrame.Parent = ContentFrame

local ExpiredLabel = Instance.new("TextLabel")
ExpiredLabel.Name = "ExpiredLabel"
ExpiredLabel.Size = UDim2.new(1, 0, 0, 50)
ExpiredLabel.Position = UDim2.new(0, 0, 0.3, 0)
ExpiredLabel.BackgroundTransparency = 1
ExpiredLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
ExpiredLabel.TextSize = 24
ExpiredLabel.Font = Enum.Font.GothamBold
ExpiredLabel.Text = GetText("script_expired")
ExpiredLabel.Parent = ExpiredFrame

local DeleteButton = Instance.new("TextButton")
DeleteButton.Name = "DeleteButton"
DeleteButton.Size = UDim2.new(0.6, 0, 0, 40)
DeleteButton.Position = UDim2.new(0.2, 0, 0.5, 0)
DeleteButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
DeleteButton.BorderSizePixel = 0
DeleteButton.TextColor3 = Color3.fromRGB(255, 255, 255)
DeleteButton.TextSize = 16
DeleteButton.Font = Enum.Font.GothamBold
DeleteButton.Text = GetText("delete_script")
DeleteButton.Parent = ExpiredFrame

local DeleteCorner = Instance.new("UICorner")
DeleteCorner.CornerRadius = UDim.new(0, 8)
DeleteCorner.Parent = DeleteButton

-- Minimized Icon
local MinimizedIcon = Instance.new("ImageButton")
MinimizedIcon.Name = "MinimizedIcon"
MinimizedIcon.Size = UDim2.new(0, 60, 0, 60)
MinimizedIcon.Position = UDim2.new(0, 10, 0, 10)
MinimizedIcon.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
MinimizedIcon.BorderSizePixel = 0
MinimizedIcon.Image = "rbxassetid://6034684949"
MinimizedIcon.Visible = false
MinimizedIcon.Active = true
MinimizedIcon.Draggable = false
MinimizedIcon.Parent = ScreenGui

local MinimizedIconCorner = Instance.new("UICorner")
MinimizedIconCorner.CornerRadius = UDim.new(0, 10)
MinimizedIconCorner.Parent = MinimizedIcon

local MinimizedIconStroke = Instance.new("UIStroke")
MinimizedIconStroke.Thickness = 2
MinimizedIconStroke.Color = Color3.fromRGB(255, 0, 0)
MinimizedIconStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
MinimizedIconStroke.Parent = MinimizedIcon

-- SubMenu Frame
local SubMenuFrame = Instance.new("Frame")
SubMenuFrame.Name = "SubMenuFrame"
SubMenuFrame.Size = UDim2.new(0, 300, 0, 600)
SubMenuFrame.Position = UDim2.new(0.5, 200, 0.5, -300)
SubMenuFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
SubMenuFrame.BorderSizePixel = 0
SubMenuFrame.Visible = false
SubMenuFrame.Active = true
SubMenuFrame.Draggable = true
SubMenuFrame.Parent = ScreenGui

local SubMenuCorner = Instance.new("UICorner")
SubMenuCorner.CornerRadius = UDim.new(0, 10)
SubMenuCorner.Parent = SubMenuFrame

local SubMenuStroke = Instance.new("UIStroke")
SubMenuStroke.Thickness = 2
SubMenuStroke.Color = Color3.fromRGB(255, 0, 0)
SubMenuStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
SubMenuStroke.Parent = SubMenuFrame

local SubMenuTitleBar = Instance.new("Frame")
SubMenuTitleBar.Name = "SubMenuTitleBar"
SubMenuTitleBar.Size = UDim2.new(1, 0, 0, 35)
SubMenuTitleBar.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
SubMenuTitleBar.BorderSizePixel = 0
SubMenuTitleBar.Parent = SubMenuFrame

local SubMenuTitleCorner = Instance.new("UICorner")
SubMenuTitleCorner.CornerRadius = UDim.new(0, 10)
SubMenuTitleCorner.Parent = SubMenuTitleBar

local SubMenuTitle = Instance.new("TextLabel")
SubMenuTitle.Name = "SubMenuTitle"
SubMenuTitle.Size = UDim2.new(1, -40, 1, 0)
SubMenuTitle.Position = UDim2.new(0, 15, 0, 0)
SubMenuTitle.BackgroundTransparency = 1
SubMenuTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
SubMenuTitle.TextSize = 18
SubMenuTitle.Font = Enum.Font.GothamBold
SubMenuTitle.Text = GetText("settings")
SubMenuTitle.TextXAlignment = Enum.TextXAlignment.Left
SubMenuTitle.Parent = SubMenuTitleBar

local SubMenuCloseButton = Instance.new("TextButton")
SubMenuCloseButton.Name = "SubMenuCloseButton"
SubMenuCloseButton.Size = UDim2.new(0, 35, 0, 35)
SubMenuCloseButton.Position = UDim2.new(1, -35, 0, 0)
SubMenuCloseButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
SubMenuCloseButton.BorderSizePixel = 0
SubMenuCloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SubMenuCloseButton.TextSize = 18
SubMenuCloseButton.Font = Enum.Font.GothamBold
SubMenuCloseButton.Text = "X"
SubMenuCloseButton.Parent = SubMenuTitleBar

local SubMenuCloseCorner = Instance.new("UICorner")
SubMenuCloseCorner.CornerRadius = UDim.new(0, 8)
SubMenuCloseCorner.Parent = SubMenuCloseButton

local SubMenuContent = Instance.new("Frame")
SubMenuContent.Name = "SubMenuContent"
SubMenuContent.Size = UDim2.new(1, 0, 1, -35)
SubMenuContent.Position = UDim2.new(0, 0, 0, 35)
SubMenuContent.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
SubMenuContent.BorderSizePixel = 0
SubMenuContent.Parent = SubMenuFrame

-- ESP Settings
local ESPLabel = Instance.new("TextLabel")
ESPLabel.Name = "ESPLabel"
ESPLabel.Size = UDim2.new(0.7, 0, 0, 35)
ESPLabel.Position = UDim2.new(0.05, 0, 0, 15)
ESPLabel.BackgroundTransparency = 1
ESPLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ESPLabel.TextSize = 14
ESPLabel.Font = Enum.Font.GothamBold
ESPLabel.Text = "ESP Names:"
ESPLabel.TextXAlignment = Enum.TextXAlignment.Left
ESPLabel.Parent = SubMenuContent

local ESPButton = Instance.new("TextButton")
ESPButton.Name = "ESPButton"
ESPButton.Size = UDim2.new(0.2, 0, 0, 35)
ESPButton.Position = UDim2.new(0.75, 0, 0, 15)
ESPButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
ESPButton.BorderSizePixel = 0
ESPButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ESPButton.TextSize = 14
ESPButton.Font = Enum.Font.GothamBold
ESPButton.Text = GetText("off")
ESPButton.Parent = SubMenuContent

local ESPCorner = Instance.new("UICorner")
ESPCorner.CornerRadius = UDim.new(0, 6)
ESPCorner.Parent = ESPButton

local ESPTextSizeLabel = Instance.new("TextLabel")
ESPTextSizeLabel.Name = "ESPTextSizeLabel"
ESPTextSizeLabel.Size = UDim2.new(0.5, 0, 0, 35)
ESPTextSizeLabel.Position = UDim2.new(0.05, 0, 0, 60)
ESPTextSizeLabel.BackgroundTransparency = 1
ESPTextSizeLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ESPTextSizeLabel.TextSize = 14
ESPTextSizeLabel.Font = Enum.Font.Gotham
ESPTextSizeLabel.Text = "ESP Text Size:"
ESPTextSizeLabel.TextXAlignment = Enum.TextXAlignment.Left
ESPTextSizeLabel.Parent = SubMenuContent

local ESPTextSizeInput = Instance.new("TextBox")
ESPTextSizeInput.Name = "ESPTextSizeInput"
ESPTextSizeInput.Size = UDim2.new(0.3, 0, 0, 35)
ESPTextSizeInput.Position = UDim2.new(0.65, 0, 0, 60)
ESPTextSizeInput.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
ESPTextSizeInput.BorderSizePixel = 0
ESPTextSizeInput.TextColor3 = Color3.fromRGB(255, 255, 255)
ESPTextSizeInput.TextSize = 14
ESPTextSizeInput.Font = Enum.Font.Gotham
ESPTextSizeInput.Text = "14"
ESPTextSizeInput.Parent = SubMenuContent

local ESPTextSizeCorner = Instance.new("UICorner")
ESPTextSizeCorner.CornerRadius = UDim.new(0, 6)
ESPTextSizeCorner.Parent = ESPTextSizeInput

local ESPColorLabel = Instance.new("TextLabel")
ESPColorLabel.Name = "ESPColorLabel"
ESPColorLabel.Size = UDim2.new(0.5, 0, 0, 35)
ESPColorLabel.Position = UDim2.new(0.05, 0, 0, 105)
ESPColorLabel.BackgroundTransparency = 1
ESPColorLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ESPColorLabel.TextSize = 14
ESPColorLabel.Font = Enum.Font.Gotham
ESPColorLabel.Text = "ESP Color (RGB or Hex):"
ESPColorLabel.TextXAlignment = Enum.TextXAlignment.Left
ESPColorLabel.Parent = SubMenuContent

local ESPColorInput = Instance.new("TextBox")
ESPColorInput.Name = "ESPColorInput"
ESPColorInput.Size = UDim2.new(0.3, 0, 0, 35)
ESPColorInput.Position = UDim2.new(0.65, 0, 0, 105)
ESPColorInput.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
ESPColorInput.BorderSizePixel = 0
ESPColorInput.TextColor3 = Color3.fromRGB(255, 255, 255)
ESPColorInput.TextSize = 14
ESPColorInput.Font = Enum.Font.Gotham
ESPColorInput.Text = "255,255,255"
ESPColorInput.Parent = SubMenuContent

local ESPColorCorner = Instance.new("UICorner")
ESPColorCorner.CornerRadius = UDim.new(0, 6)
ESPColorCorner.Parent = ESPColorInput

local ESPDisplayModeLabel = Instance.new("TextLabel")
ESPDisplayModeLabel.Name = "ESPDisplayModeLabel"
ESPDisplayModeLabel.Size = UDim2.new(0.5, 0, 0, 35)
ESPDisplayModeLabel.Position = UDim2.new(0.05, 0, 0, 150)
ESPDisplayModeLabel.BackgroundTransparency = 1
ESPDisplayModeLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ESPDisplayModeLabel.TextSize = 14
ESPDisplayModeLabel.Font = Enum.Font.Gotham
ESPDisplayModeLabel.Text = "ESP Display Mode:"
ESPDisplayModeLabel.TextXAlignment = Enum.TextXAlignment.Left
ESPDisplayModeLabel.Parent = SubMenuContent

local ESPDisplayModeButton = Instance.new("TextButton")
ESPDisplayModeButton.Name = "ESPDisplayModeButton"
ESPDisplayModeButton.Size = UDim2.new(0.3, 0, 0, 35)
ESPDisplayModeButton.Position = UDim2.new(0.65, 0, 0, 150)
ESPDisplayModeButton.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
ESPDisplayModeButton.BorderSizePixel = 0
ESPDisplayModeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ESPDisplayModeButton.TextSize = 14
ESPDisplayModeButton.Font = Enum.Font.GothamBold
ESPDisplayModeButton.Text = "Name"
ESPDisplayModeButton.Parent = SubMenuContent

local ESPDisplayModeCorner = Instance.new("UICorner")
ESPDisplayModeCorner.CornerRadius = UDim.new(0, 6)
ESPDisplayModeCorner.Parent = ESPDisplayModeButton

local ESPAlwaysOnTopLabel = Instance.new("TextLabel")
ESPAlwaysOnTopLabel.Name = "ESPAlwaysOnTopLabel"
ESPAlwaysOnTopLabel.Size = UDim2.new(0.7, 0, 0, 35)
ESPAlwaysOnTopLabel.Position = UDim2.new(0.05, 0, 0, 195)
ESPAlwaysOnTopLabel.BackgroundTransparency = 1
ESPAlwaysOnTopLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ESPAlwaysOnTopLabel.TextSize = 14
ESPAlwaysOnTopLabel.Font = Enum.Font.Gotham
ESPAlwaysOnTopLabel.Text = "ESP Always On Top:"
ESPAlwaysOnTopLabel.TextXAlignment = Enum.TextXAlignment.Left
ESPAlwaysOnTopLabel.Parent = SubMenuContent

local ESPAlwaysOnTopButton = Instance.new("TextButton")
ESPAlwaysOnTopButton.Name = "ESPAlwaysOnTopButton"
ESPAlwaysOnTopButton.Size = UDim2.new(0.2, 0, 0, 35)
ESPAlwaysOnTopButton.Position = UDim2.new(0.75, 0, 0, 195)
ESPAlwaysOnTopButton.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
ESPAlwaysOnTopButton.BorderSizePixel = 0
ESPAlwaysOnTopButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ESPAlwaysOnTopButton.TextSize = 14
ESPAlwaysOnTopButton.Font = Enum.Font.GothamBold
ESPAlwaysOnTopButton.Text = GetText("on")
ESPAlwaysOnTopButton.Parent = SubMenuContent

local ESPAlwaysOnTopCorner = Instance.new("UICorner")
ESPAlwaysOnTopCorner.CornerRadius = UDim.new(0, 6)
ESPAlwaysOnTopCorner.Parent = ESPAlwaysOnTopButton

-- Safety Settings
local AutoCheckLabel = Instance.new("TextLabel")
AutoCheckLabel.Name = "AutoCheckLabel"
AutoCheckLabel.Size = UDim2.new(0.7, 0, 0, 35)
AutoCheckLabel.Position = UDim2.new(0.05, 0, 0, 240)
AutoCheckLabel.BackgroundTransparency = 1
AutoCheckLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
AutoCheckLabel.TextSize = 14
AutoCheckLabel.Font = Enum.Font.GothamBold
AutoCheckLabel.Text = "Auto Check Position:"
AutoCheckLabel.TextXAlignment = Enum.TextXAlignment.Left
AutoCheckLabel.Parent = SubMenuContent

local AutoCheckButton = Instance.new("TextButton")
AutoCheckButton.Name = "AutoCheckButton"
AutoCheckButton.Size = UDim2.new(0.2, 0, 0, 35)
AutoCheckButton.Position = UDim2.new(0.75, 0, 0, 240)
AutoCheckButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
AutoCheckButton.BorderSizePixel = 0
AutoCheckButton.TextColor3 = Color3.fromRGB(255, 255, 255)
AutoCheckButton.TextSize = 14
AutoCheckButton.Font = Enum.Font.GothamBold
AutoCheckButton.Text = "OFF"
AutoCheckButton.Parent = SubMenuContent

local AutoCheckCorner = Instance.new("UICorner")
AutoCheckCorner.CornerRadius = UDim.new(0, 6)
AutoCheckCorner.Parent = AutoCheckButton

local VerticalMinLabel = Instance.new("TextLabel")
VerticalMinLabel.Name = "VerticalMinLabel"
VerticalMinLabel.Size = UDim2.new(0.5, 0, 0, 35)
VerticalMinLabel.Position = UDim2.new(0.05, 0, 0, 285)
VerticalMinLabel.BackgroundTransparency = 1
VerticalMinLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
VerticalMinLabel.TextSize = 14
VerticalMinLabel.Font = Enum.Font.Gotham
VerticalMinLabel.Text = "Vertical Min (Y):"
VerticalMinLabel.TextXAlignment = Enum.TextXAlignment.Left
VerticalMinLabel.Parent = SubMenuContent

local VerticalMinInput = Instance.new("TextBox")
VerticalMinInput.Name = "VerticalMinInput"
VerticalMinInput.Size = UDim2.new(0.3, 0, 0, 35)
VerticalMinInput.Position = UDim2.new(0.65, 0, 0, 285)
VerticalMinInput.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
VerticalMinInput.BorderSizePixel = 0
VerticalMinInput.TextColor3 = Color3.fromRGB(255, 255, 255)
VerticalMinInput.TextSize = 14
VerticalMinInput.Font = Enum.Font.Gotham
VerticalMinInput.Text = "-1000"
VerticalMinInput.Parent = SubMenuContent

local VerticalMinCorner = Instance.new("UICorner")
VerticalMinCorner.CornerRadius = UDim.new(0, 6)
VerticalMinCorner.Parent = VerticalMinInput

local VerticalMaxLabel = Instance.new("TextLabel")
VerticalMaxLabel.Name = "VerticalMaxLabel"
VerticalMaxLabel.Size = UDim2.new(0.5, 0, 0, 35)
VerticalMaxLabel.Position = UDim2.new(0.05, 0, 0, 330)
VerticalMaxLabel.BackgroundTransparency = 1
VerticalMaxLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
VerticalMaxLabel.TextSize = 14
VerticalMaxLabel.Font = Enum.Font.Gotham
VerticalMaxLabel.Text = "Vertical Max (Y):"
VerticalMaxLabel.TextXAlignment = Enum.TextXAlignment.Left
VerticalMaxLabel.Parent = SubMenuContent

local VerticalMaxInput = Instance.new("TextBox")
VerticalMaxInput.Name = "VerticalMaxInput"
VerticalMaxInput.Size = UDim2.new(0.3, 0, 0, 35)
VerticalMaxInput.Position = UDim2.new(0.65, 0, 0, 330)
VerticalMaxInput.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
VerticalMaxInput.BorderSizePixel = 0
VerticalMaxInput.TextColor3 = Color3.fromRGB(255, 255, 255)
VerticalMaxInput.TextSize = 14
VerticalMaxInput.Font = Enum.Font.Gotham
VerticalMaxInput.Text = "1000"
VerticalMaxInput.Parent = SubMenuContent

local VerticalMaxCorner = Instance.new("UICorner")
VerticalMaxCorner.CornerRadius = UDim.new(0, 6)
VerticalMaxCorner.Parent = VerticalMaxInput

local HorizontalMinLabel = Instance.new("TextLabel")
HorizontalMinLabel.Name = "HorizontalMinLabel"
HorizontalMinLabel.Size = UDim2.new(0.5, 0, 0, 35)
HorizontalMinLabel.Position = UDim2.new(0.05, 0, 0, 375)
HorizontalMinLabel.BackgroundTransparency = 1
HorizontalMinLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
HorizontalMinLabel.TextSize = 14
HorizontalMinLabel.Font = Enum.Font.Gotham
HorizontalMinLabel.Text = "Horizontal Min (X/Z):"
HorizontalMinLabel.TextXAlignment = Enum.TextXAlignment.Left
HorizontalMinLabel.Parent = SubMenuContent

local HorizontalMinInput = Instance.new("TextBox")
HorizontalMinInput.Name = "HorizontalMinInput"
HorizontalMinInput.Size = UDim2.new(0.3, 0, 0, 35)
HorizontalMinInput.Position = UDim2.new(0.65, 0, 0, 375)
HorizontalMinInput.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
HorizontalMinInput.BorderSizePixel = 0
HorizontalMinInput.TextColor3 = Color3.fromRGB(255, 255, 255)
HorizontalMinInput.TextSize = 14
HorizontalMinInput.Font = Enum.Font.Gotham
HorizontalMinInput.Text = "-1000"
HorizontalMinInput.Parent = SubMenuContent

local HorizontalMinCorner = Instance.new("UICorner")
HorizontalMinCorner.CornerRadius = UDim.new(0, 6)
HorizontalMinCorner.Parent = HorizontalMinInput

local HorizontalMaxLabel = Instance.new("TextLabel")
HorizontalMaxLabel.Name = "HorizontalMaxLabel"
HorizontalMaxLabel.Size = UDim2.new(0.5, 0, 0, 35)
HorizontalMaxLabel.Position = UDim2.new(0.05, 0, 0, 420)
HorizontalMaxLabel.BackgroundTransparency = 1
HorizontalMaxLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
HorizontalMaxLabel.TextSize = 14
HorizontalMaxLabel.Font = Enum.Font.Gotham
HorizontalMaxLabel.Text = "Horizontal Max (X/Z):"
HorizontalMaxLabel.TextXAlignment = Enum.TextXAlignment.Left
HorizontalMaxLabel.Parent = SubMenuContent

local HorizontalMaxInput = Instance.new("TextBox")
HorizontalMaxInput.Name = "HorizontalMaxInput"
HorizontalMaxInput.Size = UDim2.new(0.3, 0, 0, 35)
HorizontalMaxInput.Position = UDim2.new(0.65, 0, 0, 420)
HorizontalMaxInput.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
HorizontalMaxInput.BorderSizePixel = 0
HorizontalMaxInput.TextColor3 = Color3.fromRGB(255, 255, 255)
HorizontalMaxInput.TextSize = 14
HorizontalMaxInput.Font = Enum.Font.Gotham
HorizontalMaxInput.Text = "1000"
HorizontalMaxInput.Parent = SubMenuContent

local HorizontalMaxCorner = Instance.new("UICorner")
HorizontalMaxCorner.CornerRadius = UDim.new(0, 6)
HorizontalMaxCorner.Parent = HorizontalMaxInput

local ApplySettingsButton = Instance.new("TextButton")
ApplySettingsButton.Name = "ApplySettingsButton"
ApplySettingsButton.Size = UDim2.new(0.9, 0, 0, 40)
ApplySettingsButton.Position = UDim2.new(0.05, 0, 0, 465)
ApplySettingsButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
ApplySettingsButton.BorderSizePixel = 0
ApplySettingsButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ApplySettingsButton.TextSize = 16
ApplySettingsButton.Font = Enum.Font.GothamBold
ApplySettingsButton.Text = GetText("apply_settings")
ApplySettingsButton.Parent = SubMenuContent

local ApplySettingsCorner = Instance.new("UICorner")
ApplySettingsCorner.CornerRadius = UDim.new(0, 6)
ApplySettingsCorner.Parent = ApplySettingsButton

-- Icon Settings
local IconSizeLabel = Instance.new("TextLabel")
IconSizeLabel.Name = "IconSizeLabel"
IconSizeLabel.Size = UDim2.new(0.5, 0, 0, 35)
IconSizeLabel.Position = UDim2.new(0.05, 0, 0, 510)
IconSizeLabel.BackgroundTransparency = 1
IconSizeLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
IconSizeLabel.TextSize = 14
IconSizeLabel.Font = Enum.Font.Gotham
IconSizeLabel.Text = "Minimized Icon Size:"
IconSizeLabel.TextXAlignment = Enum.TextXAlignment.Left
IconSizeLabel.Parent = SubMenuContent

local IconSizeInput = Instance.new("TextBox")
IconSizeInput.Name = "IconSizeInput"
IconSizeInput.Size = UDim2.new(0.3, 0, 0, 35)
IconSizeInput.Position = UDim2.new(0.65, 0, 0, 510)
IconSizeInput.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
IconSizeInput.BorderSizePixel = 0
IconSizeInput.TextColor3 = Color3.fromRGB(255, 255, 255)
IconSizeInput.TextSize = 14
IconSizeInput.Font = Enum.Font.Gotham
IconSizeInput.Text = "60"
IconSizeInput.Parent = SubMenuContent

local IconSizeCorner = Instance.new("UICorner")
IconSizeCorner.CornerRadius = UDim.new(0, 6)
IconSizeCorner.Parent = IconSizeInput

local IconDraggableLabel = Instance.new("TextLabel")
IconDraggableLabel.Name = "IconDraggableLabel"
IconDraggableLabel.Size = UDim2.new(0.7, 0, 0, 35)
IconDraggableLabel.Position = UDim2.new(0.05, 0, 0, 555)
IconDraggableLabel.BackgroundTransparency = 1
IconDraggableLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
IconDraggableLabel.TextSize = 14
IconDraggableLabel.Font = Enum.Font.Gotham
IconDraggableLabel.Text = "Icon Draggable:"
IconDraggableLabel.TextXAlignment = Enum.TextXAlignment.Left
IconDraggableLabel.Parent = SubMenuContent

local IconDraggableButton = Instance.new("TextButton")
IconDraggableButton.Name = "IconDraggableButton"
IconDraggableButton.Size = UDim2.new(0.2, 0, 0, 35)
IconDraggableButton.Position = UDim2.new(0.75, 0, 0, 555)
IconDraggableButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
IconDraggableButton.BorderSizePixel = 0
IconDraggableButton.TextColor3 = Color3.fromRGB(255, 255, 255)
IconDraggableButton.TextSize = 14
IconDraggableButton.Font = Enum.Font.GothamBold
IconDraggableButton.Text = GetText("off")
IconDraggableButton.Parent = SubMenuContent

local IconDraggableCorner = Instance.new("UICorner")
IconDraggableCorner.CornerRadius = UDim.new(0, 6)
IconDraggableCorner.Parent = IconDraggableButton

local IconImageLabel = Instance.new("TextLabel")
IconImageLabel.Name = "IconImageLabel"
IconImageLabel.Size = UDim2.new(0.5, 0, 0, 35)
IconImageLabel.Position = UDim2.new(0.05, 0, 0, 600)
IconImageLabel.BackgroundTransparency = 1
IconImageLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
IconImageLabel.TextSize = 14
IconImageLabel.Font = Enum.Font.Gotham
IconImageLabel.Text = "Icon Image ID:"
IconImageLabel.TextXAlignment = Enum.TextXAlignment.Left
IconImageLabel.Parent = SubMenuContent

local IconImageInput = Instance.new("TextBox")
IconImageInput.Name = "IconImageInput"
IconImageInput.Size = UDim2.new(0.3, 0, 0, 35)
IconImageInput.Position = UDim2.new(0.65, 0, 0, 600)
IconImageInput.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
IconImageInput.BorderSizePixel = 0
IconImageInput.TextColor3 = Color3.fromRGB(255, 255, 255)
IconImageInput.TextSize = 14
IconImageInput.Font = Enum.Font.Gotham
IconImageInput.Text = "6034684949"
IconImageInput.Parent = SubMenuContent

local IconImageCorner = Instance.new("UICorner")
IconImageCorner.CornerRadius = UDim.new(0, 6)
IconImageCorner.Parent = IconImageInput

-- GUI Scale Setting
local ScaleLabel = Instance.new("TextLabel")
ScaleLabel.Name = "ScaleLabel"
ScaleLabel.Size = UDim2.new(0.5, 0, 0, 35)
ScaleLabel.Position = UDim2.new(0.05, 0, 0, 645)
ScaleLabel.BackgroundTransparency = 1
ScaleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ScaleLabel.TextSize = 14
ScaleLabel.Font = Enum.Font.Gotham
ScaleLabel.Text = "GUI Scale:"
ScaleLabel.TextXAlignment = Enum.TextXAlignment.Left
ScaleLabel.Parent = SubMenuContent

local ScaleInput = Instance.new("TextBox")
ScaleInput.Name = "ScaleInput"
ScaleInput.Size = UDim2.new(0.3, 0, 0, 35)
ScaleInput.Position = UDim2.new(0.65, 0, 0, 645)
ScaleInput.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
ScaleInput.BorderSizePixel = 0
ScaleInput.TextColor3 = Color3.fromRGB(255, 255, 255)
ScaleInput.TextSize = 14
ScaleInput.Font = Enum.Font.Gotham
ScaleInput.Text = "1.0"
ScaleInput.Parent = SubMenuContent

local ScaleCorner = Instance.new("UICorner")
ScaleCorner.CornerRadius = UDim.new(0, 6)
ScaleCorner.Parent = ScaleInput

-- Drag Handle Setting
local DragHandleLabel = Instance.new("TextLabel")
DragHandleLabel.Name = "DragHandleLabel"
DragHandleLabel.Size = UDim2.new(0.7, 0, 0, 35)
DragHandleLabel.Position = UDim2.new(0.05, 0, 0, 690)
DragHandleLabel.BackgroundTransparency = 1
DragHandleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
DragHandleLabel.TextSize = 14
DragHandleLabel.Font = Enum.Font.Gotham
DragHandleLabel.Text = "Show Drag Handle:"
DragHandleLabel.TextXAlignment = Enum.TextXAlignment.Left
DragHandleLabel.Parent = SubMenuContent

local DragHandleButton = Instance.new("TextButton")
DragHandleButton.Name = "DragHandleButton"
DragHandleButton.Size = UDim2.new(0.2, 0, 0, 35)
DragHandleButton.Position = UDim2.new(0.75, 0, 0, 690)
DragHandleButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
DragHandleButton.BorderSizePixel = 0
DragHandleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
DragHandleButton.TextSize = 14
DragHandleButton.Font = Enum.Font.GothamBold
DragHandleButton.Text = GetText("off")
DragHandleButton.Parent = SubMenuContent

local DragHandleButtonCorner = Instance.new("UICorner")
DragHandleButtonCorner.CornerRadius = UDim.new(0, 6)
DragHandleButtonCorner.Parent = DragHandleButton

-- Language Selection
local LanguageLabel = Instance.new("TextLabel")
LanguageLabel.Name = "LanguageLabel"
LanguageLabel.Size = UDim2.new(0.5, 0, 0, 35)
LanguageLabel.Position = UDim2.new(0.05, 0, 0, 735)
LanguageLabel.BackgroundTransparency = 1
LanguageLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
LanguageLabel.TextSize = 14
LanguageLabel.Font = Enum.Font.Gotham
LanguageLabel.Text = "Language:"
LanguageLabel.TextXAlignment = Enum.TextXAlignment.Left
LanguageLabel.Parent = SubMenuContent

local LanguageButtonEN = Instance.new("TextButton")
LanguageButtonEN.Name = "LanguageButtonEN"
LanguageButtonEN.Size = UDim2.new(0.15, 0, 0, 35)
LanguageButtonEN.Position = UDim2.new(0.65, 0, 0, 735)
LanguageButtonEN.BackgroundColor3 = Config.Language == "en" and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(65, 65, 65)
LanguageButtonEN.BorderSizePixel = 0
LanguageButtonEN.TextColor3 = Color3.fromRGB(255, 255, 255)
LanguageButtonEN.TextSize = 14
LanguageButtonEN.Font = Enum.Font.GothamBold
LanguageButtonEN.Text = "EN"
LanguageButtonEN.Parent = SubMenuContent

local LanguageButtonVICorner = Instance.new("UICorner")
LanguageButtonVICorner.CornerRadius = UDim.new(0, 6)
LanguageButtonVICorner.Parent = LanguageButtonEN

local LanguageButtonVI = Instance.new("TextButton")
LanguageButtonVI.Name = "LanguageButtonVI"
LanguageButtonVI.Size = UDim2.new(0.15, 0, 0, 35)
LanguageButtonVI.Position = UDim2.new(0.8, 0, 0, 735)
LanguageButtonVI.BackgroundColor3 = Config.Language == "vi" and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(65, 65, 65)
LanguageButtonVI.BorderSizePixel = 0
LanguageButtonVI.TextColor3 = Color3.fromRGB(255, 255, 255)
LanguageButtonVI.TextSize = 14
LanguageButtonVI.Font = Enum.Font.GothamBold
LanguageButtonVI.Text = "VI"
LanguageButtonVI.Parent = SubMenuContent

local LanguageButtonENCorner = Instance.new("UICorner")
LanguageButtonENCorner.CornerRadius = UDim.new(0, 6)
LanguageButtonENCorner.Parent = LanguageButtonVI

-- Functions
local function CheckExpiration()
    local currentTime = os.time()
    local expirationTime = os.time({
        year = EXPIRATION_DATE.Year,
        month = EXPIRATION_DATE.Month,
        day = EXPIRATION_DATE.Day,
        hour = EXPIRATION_DATE.Hour,
        min = EXPIRATION_DATE.Minute,
        sec = EXPIRATION_DATE.Second
    })
    local timeLeft = expirationTime - currentTime
    if timeLeft <= 0 then
        AuthFrame.Visible = false
        FeaturesFrame.Visible = false
        ExpiredFrame.Visible = true
        Log("Script has expired")
        return true
    else
        local days = math.floor(timeLeft / 86400)
        local hours = math.floor((timeLeft % 86400) / 3600)
        local minutes = math.floor((timeLeft % 3600) / 60)
        local seconds = timeLeft % 60
        ExpirationLabel.Text = string.format("Expires in: %d days, %02d:%02d:%02d", days, hours, minutes, seconds)
        return false
    end
end

local function StartRainbowEffect()
    local colors = {
        Color3.fromRGB(255, 0, 0),
        Color3.fromRGB(255, 165, 0),
        Color3.fromRGB(255, 255, 0),
        Color3.fromRGB(0, 255, 0),
        Color3.fromRGB(0, 0, 255),
        Color3.fromRGB(75, 0, 130),
        Color3.fromRGB(238, 130, 238)
    }
    local index = 1
    spawn(function()
        while ScreenGui.Parent do
            local targetColor = colors[index]
            local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Linear)
            local mainTween = TweenService:Create(MainStroke, tweenInfo, {Color = targetColor})
            local iconTween = TweenService:Create(MinimizedIconStroke, tweenInfo, {Color = targetColor})
            local subMenuTween = TweenService:Create(SubMenuStroke, tweenInfo, {Color = targetColor})
            mainTween:Play()
            iconTween:Play()
            subMenuTween:Play()
            index = (index % #colors) + 1
            wait(0.5)
        end
    end)
end

local function PopulatePlayerList()
    for _, child in pairs(PlayerScrollFrame:GetChildren()) do
        if child:IsA("TextButton") then
            child:Destroy()
        end
    end
    PlayerList = {}
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            table.insert(PlayerList, player)
            local playerButton = Instance.new("TextButton")
            playerButton.Name = player.Name .. "Button"
            playerButton.Size = UDim2.new(0.9, 0, 0, 35)
            playerButton.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
            playerButton.BorderSizePixel = 0
            playerButton.TextColor3 = Color3.fromRGB(255, 255, 255)
            playerButton.TextSize = 14
            playerButton.Font = Enum.Font.Gotham
            playerButton.Text = player.Name
            playerButton.ZIndex = 12
            playerButton.Parent = PlayerScrollFrame
            local playerButtonCorner = Instance.new("UICorner")
            playerButtonCorner.CornerRadius = UDim.new(0, 4)
            playerButtonCorner.Parent = playerButton
            playerButton.MouseButton1Click:Connect(function()
                TargetPlayer = player
                TargetDropdown.Text = player.Name
                DropdownFrame.Visible = false
                LookTarget = player
                CurrentTargetLabel.Text = "Current Target: " .. player.Name
                Log("Selected target: " .. player.Name)
            end)
        end
    end
end

local function FilterPlayerList()
    local searchText = SearchBox.Text:lower()
    for _, button in pairs(PlayerScrollFrame:GetChildren()) do
        if button:IsA("TextButton") then
            local playerName = button.Text:lower()
            button.Visible = searchText == "" or playerName:find(searchText)
        end
    end
end

local function ToggleNoclip()
    NoClipping = not NoClipping
    NoclipButton.Text = GetText("noclip") .. ": " .. GetText(NoClipping and "on" or "off")
    NoclipButton.BackgroundColor3 = NoClipping and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(0, 150, 255)
    if NoClipping then
        local noclipConnection = RunService.Stepped:Connect(function()
            if Character and NoClipping then
                for _, part in pairs(Character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = false
                    end
                end
            end
        end)
        NoclipButton.NoclipConnection = noclipConnection
        Log("Noclip enabled")
    else
        if NoclipButton.NoclipConnection then
            NoclipButton.NoclipConnection:Disconnect()
            NoclipButton.NoclipConnection = nil
        end
        for _, part in pairs(Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = true
            end
        end
        Log("Noclip disabled")
    end
end

local function TogglePlatform()
    AutoPlatform = not AutoPlatform
    PlatformButton.Text = GetText("platform") .. ": " .. GetText(AutoPlatform and "on" or "off")
    PlatformButton.BackgroundColor3 = AutoPlatform and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(0, 150, 255)
    AutoPlatformCheck.BackgroundColor3 = AutoPlatform and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(65, 65, 65)
    if AutoPlatform then
        local platform = Instance.new("Part")
        platform.Name = "ExecutorPlatform"
        platform.Size = Vector3.new(5, 1, 5)
        platform.Anchored = true
        platform.CanCollide = true
        platform.Transparency = 0.5
        platform.Material = Enum.Material.Neon
        platform.Color = Color3.fromRGB(0, 150, 255)
        platform.Parent = workspace
        local platformConnection = RunService.Heartbeat:Connect(function()
            if AutoPlatform and Character and HumanoidRootPart then
                platform.CFrame = CFrame.new(HumanoidRootPart.Position.X, HumanoidRootPart.Position.Y - 3.5, HumanoidRootPart.Position.Z)
            end
        end)
        PlatformButton.Platform = platform
        PlatformButton.PlatformConnection = platformConnection
        Log("Platform enabled")
    else
        if PlatformButton.Platform and PlatformButton.Platform:IsDescendantOf(workspace) then
            PlatformButton.Platform:Destroy()
            PlatformButton.Platform = nil
        end
        if PlatformButton.PlatformConnection then
            PlatformButton.PlatformConnection:Disconnect()
            PlatformButton.PlatformConnection = nil
        end
        Log("Platform disabled")
    end
end

local function ToggleFollowTarget()
    FollowingTarget = not FollowingTarget
    FollowButton.Text = GetText("follow") .. ": " .. GetText(FollowingTarget and "on" or "off")
    FollowButton.BackgroundColor3 = FollowingTarget and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(0, 150, 255)
    if FollowingTarget then
        if not TargetPlayer or not TargetPlayer.Character then
            FollowingTarget = false
            FollowButton.Text = GetText("follow") .. ": " .. GetText("off")
            FollowButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
            return
        end
        DistanceBehind = tonumber(HorizontalInput.Text) or 5
        DistanceAbove = tonumber(VerticalInput.Text) or 0
        local followConnection = RunService.Heartbeat:Connect(function()
            if FollowingTarget and TargetPlayer and TargetPlayer.Character and TargetPlayer.Character:FindFirstChild("HumanoidRootPart") and Character and HumanoidRootPart then
                local targetHRP = TargetPlayer.Character.HumanoidRootPart
                local targetHumanoid = TargetPlayer.Character:FindFirstChild("Humanoid")
                if AutoNextTarget and targetHumanoid and targetHumanoid.Health <= 0 then
                    local foundNext = false
                    for _, player in pairs(PlayerList) do
                        if player ~= TargetPlayer and player.Character and player.Character:FindFirstChild("Humanoid") and player.Character.Humanoid.Health > 0 then
                            TargetPlayer = player
                            TargetDropdown.Text = player.Name
                            LookTarget = player
                            CurrentTargetLabel.Text = "Current Target: " .. player.Name
                            foundNext = true
                            Log("Auto switched to next target: " .. player.Name)
                            break
                        end
                    end
                    if not foundNext then
                        FollowingTarget = false
                        FollowButton.Text = GetText("follow") .. ": " .. GetText("off")
                        FollowButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
                        followConnection:Disconnect()
                    end
                else
                    local targetLookVector = targetHRP.CFrame.LookVector
                    local behindPosition = targetHRP.Position - (targetLookVector * DistanceBehind)
                    behindPosition = behindPosition + Vector3.new(0, DistanceAbove, 0)
                    HumanoidRootPart.CFrame = CFrame.new(behindPosition, targetHRP.Position)
                end
            end
        end)
        FollowButton.FollowConnection = followConnection
        Log("Following target: " .. TargetPlayer.Name)
    else
        if FollowButton.FollowConnection then
            FollowButton.FollowConnection:Disconnect()
            FollowButton.FollowConnection = nil
        end
        Log("Stopped following target")
    end
end

local function ToggleRunAway()
    RunningAway = not RunningAway
    RunButton.Text = GetText("run_away") .. ": " .. GetText(RunningAway and "on" or "off")
    RunButton.BackgroundColor3 = RunningAway and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(0, 150, 255)
    RunAwayCheck.BackgroundColor3 = RunningAway and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(65, 65, 65)
    if RunningAway then
        DetectionRadius = tonumber(RadiusInput.Text) or 20
        local runConnection = RunService.Heartbeat:Connect(function()
            if RunningAway and Character and HumanoidRootPart then
                for _, player in pairs(Players:GetPlayers()) do
                    if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                        local distance = (HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude
                        if distance <= DetectionRadius then
                            local direction = (HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Unit
                            local escapePosition = HumanoidRootPart.Position + direction * 100
                            HumanoidRootPart.CFrame = CFrame.new(escapePosition, escapePosition + HumanoidRootPart.CFrame.LookVector)
                            Log("Running away from: " .. player.Name)
                            break
                        end
                    end
                end
            end
        end)
        RunButton.RunConnection = runConnection
        Log("Run away enabled")
    else
        if RunButton.RunConnection then
            RunButton.RunConnection:Disconnect()
            RunButton.RunConnection = nil
        end
        Log("Run away disabled")
    end
end

local function ToggleAutoNext()
    AutoNextTarget = not AutoNextTarget
    NextButton.Text = GetText("auto_next") .. ": " .. GetText(AutoNextTarget and "on" or "off")
    NextButton.BackgroundColor3 = AutoNextTarget and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(65, 65, 65)
    AutoNextCheck.BackgroundColor3 = AutoNextTarget and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(65, 65, 65)
    Log(AutoNextTarget and "Auto next target enabled" or "Auto next target disabled")
end

local function SaveCurrentPosition()
    if Character and HumanoidRootPart then
        SavedPosition = HumanoidRootPart.CFrame
        local confirmMsg = Instance.new("TextLabel")
        confirmMsg.Size = UDim2.new(0.9, 0, 0, 25)
        confirmMsg.Position = UDim2.new(0.05, 0, 0, 90)
        confirmMsg.BackgroundTransparency = 1
        confirmMsg.TextColor3 = Color3.fromRGB(0, 255, 0)
        confirmMsg.TextSize = 12
        confirmMsg.Font = Enum.Font.Gotham
        confirmMsg.Text = GetText("position_saved")
        confirmMsg.Parent = PositionSection
        task.delay(2, function()
            confirmMsg:Destroy()
        end)
        Log("Position saved at: " .. tostring(SavedPosition.Position))
    end
end

local function TeleportToSavedPosition()
    if SavedPosition and Character and HumanoidRootPart then
        HumanoidRootPart.CFrame = SavedPosition
        Log("Teleported to saved position")
    else
        local errorMsg = Instance.new("TextLabel")
        errorMsg.Size = UDim2.new(0.9, 0, 0, 25)
        errorMsg.Position = UDim2.new(0.05, 0, 0, 90)
        errorMsg.BackgroundTransparency = 1
        errorMsg.TextColor3 = Color3.fromRGB(255, 0, 0)
        errorMsg.TextSize = 12
        errorMsg.Font = Enum.Font.Gotham
        errorMsg.Text = GetText("no_position_saved")
        errorMsg.Parent = PositionSection
        task.delay(2, function()
            errorMsg:Destroy()
        end)
    end
end

local function ToggleAutoCheckPosition()
    AutoCheckPosition = not AutoCheckPosition
    AutoCheckButton.Text = GetText(AutoCheckPosition and "on" or "off")
    AutoCheckButton.BackgroundColor3 = AutoCheckPosition and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(0, 150, 255)
    if AutoCheckPosition then
        local verticalMin = tonumber(VerticalMinInput.Text) or -1000
        local verticalMax = tonumber(VerticalMaxInput.Text) or 1000
        local horizontalMin = tonumber(HorizontalMinInput.Text) or -1000
        local horizontalMax = tonumber(HorizontalMaxInput.Text) or 1000
        SafePositionMin = Vector3.new(horizontalMin, verticalMin, horizontalMin)
        SafePositionMax = Vector3.new(horizontalMax, verticalMax, horizontalMax)
        local checkConnection = RunService.Heartbeat:Connect(function()
            if AutoCheckPosition and Character and HumanoidRootPart then
                local pos = HumanoidRootPart.Position
                if pos.Y < SafePositionMin.Y or pos.Y > SafePositionMax.Y or
                   pos.X < SafePositionMin.X or pos.X > SafePositionMax.X or
                   pos.Z < SafePositionMin.Z or pos.Z > SafePositionMax.Z then
                    if SavedPosition then
                        HumanoidRootPart.CFrame = SavedPosition
                    else
                        local safeY = math.clamp(pos.Y, SafePositionMin.Y, SafePositionMax.Y)
                        local safeX = math.clamp(pos.X, SafePositionMin.X, SafePositionMax.X)
                        local safeZ = math.clamp(pos.Z, SafePositionMin.Z, SafePositionMax.Z)
                        HumanoidRootPart.CFrame = CFrame.new(safeX, safeY, safeZ, HumanoidRootPart.CFrame:GetComponents())
                    end
                    Log("Position corrected to safe bounds")
                end
            end
        end)
        AutoCheckButton.CheckConnection = checkConnection
        Log("Auto check position enabled")
    else
        if AutoCheckButton.CheckConnection then
            AutoCheckButton.CheckConnection:Disconnect()
            AutoCheckButton.CheckConnection = nil
        end
        Log("Auto check position disabled")
    end
end

local function ApplySafetySettings()
    local verticalMin = tonumber(VerticalMinInput.Text) or -1000
    local verticalMax = tonumber(VerticalMaxInput.Text) or 1000
    local horizontalMin = tonumber(HorizontalMinInput.Text) or -1000
    local horizontalMax = tonumber(HorizontalMaxInput.Text) or 1000
    SafePositionMin = Vector3.new(horizontalMin, verticalMin, horizontalMin)
    SafePositionMax = Vector3.new(horizontalMax, verticalMax, horizontalMax)
    local confirmMsg = Instance.new("TextLabel")
    confirmMsg.Size = UDim2.new(0.9, 0, 0, 25)
    confirmMsg.Position = UDim2.new(0.05, 0, 0, 510)
    confirmMsg.BackgroundTransparency = 1
    confirmMsg.TextColor3 = Color3.fromRGB(0, 255, 0)
    confirmMsg.TextSize = 12
    confirmMsg.Font = Enum.Font.Gotham
    confirmMsg.Text = GetText("settings_applied")
    confirmMsg.Parent = SubMenuContent
    task.delay(2, function()
        confirmMsg:Destroy()
    end)
    if AutoCheckPosition then
        if AutoCheckButton.CheckConnection then
            AutoCheckButton.CheckConnection:Disconnect()
            AutoCheckButton.CheckConnection = nil
        end
        ToggleAutoCheckPosition()
        ToggleAutoCheckPosition()
    end
    Log("Safety settings applied")
end

local function ToggleSubMenu()
    SubMenuVisible = not SubMenuVisible
    SubMenuFrame.Visible = SubMenuVisible
end

local function LimitDragging(frame)
    local screenSize = Camera.ViewportSize
    local frameSize = frame.AbsoluteSize
    local minX, minY = 0, 0
    local maxX, maxY = screenSize.X - frameSize.X, screenSize.Y - frameSize.Y
    local newX = math.clamp(frame.AbsolutePosition.X, minX, maxX)
    local newY = math.clamp(frame.AbsolutePosition.Y, minY, maxY)
    if frame.AbsolutePosition.X ~= newX or frame.AbsolutePosition.Y ~= newY then
        frame.Position = UDim2.new(0, newX, 0, newY)
    end
end

local function GetNearestPlayer()
    local closestPlayer, shortestDistance = nil, math.huge
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local distance = (player.Character.HumanoidRootPart.Position - HumanoidRootPart.Position).Magnitude
            if distance < shortestDistance then
                closestPlayer = player
                shortestDistance = distance
            end
        end
    end
    return closestPlayer
end

local function ToggleLookAtPlayer()
    LookingAtPlayer = not LookingAtPlayer
    LookAtButton.Text = GetText("look_at") .. ": " .. GetText(LookingAtPlayer and "on" or "off")
    LookAtButton.BackgroundColor3 = LookingAtPlayer and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(0, 150, 255)
    if LookingAtPlayer then
        if not LookTarget or not LookTarget.Character or not LookTarget.Character:FindFirstChild(LookBodyPart) then
            LookingAtPlayer = false
            LookAtButton.Text = GetText("look_at") .. ": " .. GetText("off")
            LookAtButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
            return
        end
        local lookConnection = RunService.RenderStepped:Connect(function()
            if LookingAtPlayer and LookTarget and LookTarget.Character and LookTarget.Character:FindFirstChild(LookBodyPart) and Camera and Character and HumanoidRootPart then
                local targetPos = LookTarget.Character[LookBodyPart].Position
                Camera.CFrame = CFrame.new(Camera.CFrame.Position, targetPos)
                HumanoidRootPart.CFrame = CFrame.new(HumanoidRootPart.Position, targetPos)
            end
        end)
        LookAtButton.LookConnection = lookConnection
        Log("Looking at player enabled")
    else
        if LookAtButton.LookConnection then
            LookAtButton.LookConnection:Disconnect()
            LookAtButton.LookConnection = nil
        end
        Log("Looking at player disabled")
    end
end

local function CycleBodyPart()
    BodyPartIndex = (BodyPartIndex % #BodyParts) + 1
    LookBodyPart = BodyParts[BodyPartIndex]
    BodyPartButton.Text = "Part: " .. LookBodyPart
    Log("Cycled body part to: " .. LookBodyPart)
end

local function TeleportBehindTarget()
    if LookTarget and LookTarget.Character and LookTarget.Character:FindFirstChild("HumanoidRootPart") and Character and HumanoidRootPart then
        local targetHRP = LookTarget.Character.HumanoidRootPart
        local lookVector = targetHRP.CFrame.LookVector
        local teleportPosition = targetHRP.Position - (lookVector * 3)
        HumanoidRootPart.CFrame = CFrame.new(teleportPosition, targetHRP.Position)
        Log("Teleported behind target: " .. LookTarget.Name)
    else
        local errorMsg = Instance.new("TextLabel")
        errorMsg.Size = UDim2.new(0.9, 0, 0, 25)
        errorMsg.Position = UDim2.new(0.05, 0, 0, 175)
        errorMsg.BackgroundTransparency = 1
        errorMsg.TextColor3 = Color3.fromRGB(255, 0, 0)
        errorMsg.TextSize = 12
        errorMsg.Font = Enum.Font.Gotham
        errorMsg.Text = GetText("no_target_selected")
        errorMsg.Parent = LookAtSection
        task.delay(2, function()
            errorMsg:Destroy()
        end)
    end
end

local function CreateESP(player)
    if player == LocalPlayer or not player.Character or not player.Character:FindFirstChild("Head") then return end
    local billboard = Instance.new("BillboardGui")
    billboard.Name = "ESP"
    billboard.AlwaysOnTop = ESPAlwaysOnTop
    billboard.Size = UDim2.new(0, 100, 0, 50)
    billboard.StudsOffset = Vector3.new(0, 3, 0)
    billboard.Adornee = player.Character.Head
    billboard.Parent = player.Character.Head

    local textLabel = Instance.new("TextLabel")
    textLabel.Name = "ESPText"
    textLabel.Size = UDim2.new(1, 0, 1, 0)
    textLabel.BackgroundTransparency = 1
    textLabel.TextColor3 = ESPColor
    textLabel.TextSize = ESPTextSize
    textLabel.Font = Enum.Font.Gotham
    textLabel.TextStrokeTransparency = 0.5
    textLabel.Text = player.Name
    textLabel.Parent = billboard

    ESPTable[player] = {billboard = billboard, textLabel = textLabel}
end

local function UpdateESP()
    for player, esp in pairs(ESPTable) do
        if player.Character and player.Character:FindFirstChild("Head") and esp.textLabel then
            local text = ""
            if ESPDisplayMode == "name" then
                text = player.Name
            elseif ESPDisplayMode == "distance" then
                local distance = (player.Character.HumanoidRootPart.Position - HumanoidRootPart.Position).Magnitude
                text = string.format("%.2f m", distance)
            elseif ESPDisplayMode == "hp" then
                local humanoid = player.Character:FindFirstChild("Humanoid")
                text = humanoid and string.format("HP: %d", humanoid.Health) or "No HP"
            end
            esp.textLabel.Text = text
            esp.textLabel.TextColor3 = ESPColor
            esp.textLabel.TextSize = ESPTextSize
            esp.billboard.AlwaysOnTop = ESPAlwaysOnTop
        end
    end
end

local function ToggleESP()
    ESPEnabled = not ESPEnabled
    ESPButton.Text = GetText(ESPEnabled and "on" or "off")
    ESPButton.BackgroundColor3 = ESPEnabled and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(0, 150, 255)
    if ESPEnabled then
        for _, player in pairs(Players:GetPlayers()) do
            CreateESP(player)
        end
        local espConnection = RunService.RenderStepped:Connect(UpdateESP)
        ESPButton.ESPConnection = espConnection
    else
        for _, esp in pairs(ESPTable) do
            esp.billboard:Destroy()
        end
        ESPTable = {}
        if ESPButton.ESPConnection then
            ESPButton.ESPConnection:Disconnect()
        end
    end
end
ESPButton.MouseButton1Click:Connect(ToggleESP)

local function SelectNearestPlayer()
    local nearest = GetNearestPlayer()
    if nearest then
        TargetPlayer = nearest
        LookTarget = nearest
        TargetDropdown.Text = nearest.Name
        CurrentTargetLabel.Text = "Current Target: " .. nearest.Name
        Log("Selected nearest player: " .. nearest.Name)
    end
end
NearestPlayerButton.MouseButton1Click:Connect(SelectNearestPlayer)

local function ToggleLookAtPlayer()
    LookingAtPlayer = not LookingAtPlayer
    LookAtButton.Text = GetText("look_at") .. ": " .. GetText(LookingAtPlayer and "on" or "off")
    LookAtButton.BackgroundColor3 = LookingAtPlayer and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(0, 150, 255)
    if LookingAtPlayer then
        if not LookTarget or not LookTarget.Character or not LookTarget.Character:FindFirstChild(LookBodyPart) then
            LookingAtPlayer = false
            LookAtButton.Text = GetText("look_at") .. ": " .. GetText("off")
            LookAtButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
            return
        end
        local lookConnection = RunService.RenderStepped:Connect(function()
            if LookingAtPlayer and LookTarget and LookTarget.Character and LookTarget.Character:FindFirstChild(LookBodyPart) then
                local targetPos = LookTarget.Character[LookBodyPart].Position
                Camera.CFrame = CFrame.new(Camera.CFrame.Position, targetPos)
                HumanoidRootPart.CFrame = CFrame.new(HumanoidRootPart.Position, Vector3.new(targetPos.X, HumanoidRootPart.Position.Y, targetPos.Z))
            end
        end)
        LookAtButton.LookConnection = lookConnection
        Log("Looking at player enabled")
    else
        if LookAtButton.LookConnection then
            LookAtButton.LookConnection:Disconnect()
        end
        Log("Looking at player disabled")
    end
end
LookAtButton.MouseButton1Click:Connect(ToggleLookAtPlayer)

local function CycleBodyPart()
    BodyPartIndex = (BodyPartIndex % #BodyParts) + 1
    LookBodyPart = BodyParts[BodyPartIndex]
    BodyPartButton.Text = "Part: " .. LookBodyPart
    Log("Cycled body part to: " .. LookBodyPart)
end
BodyPartButton.MouseButton1Click:Connect(CycleBodyPart)

local function TeleportBehindTarget()
    if LookTarget and LookTarget.Character and LookTarget.Character:FindFirstChild("HumanoidRootPart") then
        local targetHRP = LookTarget.Character.HumanoidRootPart
        local lookVector = targetHRP.CFrame.LookVector
        local teleportPosition = targetHRP.Position - (lookVector * 3)
        HumanoidRootPart.CFrame = CFrame.new(teleportPosition, targetHRP.Position)
        Log("Teleported behind target: " .. LookTarget.Name)
    else
        local errorMsg = Instance.new("TextLabel")
        errorMsg.Size = UDim2.new(0.9, 0, 0, 25)
        errorMsg.Position = UDim2.new(0.05, 0, 0, 175)
        errorMsg.BackgroundTransparency = 1
        errorMsg.TextColor3 = Color3.fromRGB(255, 0, 0)
        errorMsg.TextSize = 12
        errorMsg.Font = Enum.Font.Gotham
        errorMsg.Text = GetText("no_target_selected")
        errorMsg.Parent = LookAtSection
        task.delay(2, function()
            errorMsg:Destroy()
        end)
    end
end
TeleportBehindButton.MouseButton1Click:Connect(TeleportBehindTarget)

local function ApplySettings()
    ESPTextSize = tonumber(ESPTextSizeInput.Text) or 14
    local colorInput = ESPColorInput.Text
    if colorInput:match("^#") then
        ESPColor = Color3.fromHex(colorInput)
    else
        local r, g, b = colorInput:match("(%d+),(%d+),(%d+)")
        if r and g and b then
            ESPColor = Color3.fromRGB(tonumber(r), tonumber(g), tonumber(b))
        end
    end
    ESPAlwaysOnTop = ESPAlwaysOnTopButton.Text == GetText("on")
    ESPDisplayMode = ESPDisplayModeButton.Text:lower()

    local iconSize = tonumber(IconSizeInput.Text) or 60
    MinimizedIcon.Size = UDim2.new(0, iconSize, 0, iconSize)
    MinimizedIcon.Draggable = IconDraggableButton.Text == GetText("on")
    MinimizedIcon.Image = "rbxassetid://" .. IconImageInput.Text

    uiScale.Scale = tonumber(ScaleInput.Text) or 1.0

    DragHandle.Visible = DragHandleButton.Text == GetText("on")

    Config.Language = LanguageButtonEN.BackgroundColor3 == Color3.fromRGB(0, 200, 0) and "en" or "vi"
    UpdateLanguage()

    Log("Settings applied")
end
ApplySettingsButton.MouseButton1Click:Connect(ApplySettings)

local function UpdateLanguage()
    Title.Text = GetText("title")
    AuthTitle.Text = GetText("auth_title")
    SubmitButton.Text = GetText("submit")
    PositionTitle.Text = GetText("position_controls")
    TargetTitle.Text = GetText("target_selection")
    DistanceTitle.Text = GetText("distance_controls")
    FeaturesTitle.Text = GetText("features")
    LookAtTitle.Text = GetText("look_at_player")
    SubMenuTitle.Text = GetText("settings")
    SavePositionButton.Text = GetText("save_position")
    TeleportToSavedButton.Text = GetText("teleport_to_saved")
    SearchBox.PlaceholderText = GetText("search_placeholder")
    TargetDropdown.Text = TargetPlayer and TargetPlayer.Name or GetText("select_target")
    ReloadButton.Text = GetText("reload")
    FollowButton.Text = GetText("follow") .. ": " .. GetText(FollowingTarget and "on" or "off")
    NextButton.Text = GetText("auto_next") .. ": " .. GetText(AutoNextTarget and "on" or "off")
    NoclipButton.Text = GetText("noclip") .. ": " .. GetText(NoClipping and "on" or "off")
    PlatformButton.Text = GetText("platform") .. ": " .. GetText(AutoPlatform and "on" or "off")
    RunButton.Text = GetText("run_away") .. ": " .. GetText(RunningAway and "on" or "off")
    LookAtButton.Text = GetText("look_at") .. ": " .. GetText(LookingAtPlayer and "on" or "off")
    NearestPlayerButton.Text = GetText("select_nearest")
    TeleportBehindButton.Text = GetText("teleport_behind")
    CurrentTargetLabel.Text = LookTarget and ("Current Target: " .. LookTarget.Name) or GetText("current_target")
    ExpirationLabel.Text = GetText("expires")
    ExpiredLabel.Text = GetText("script_expired")
    DeleteButton.Text = GetText("delete_script")
    ApplySettingsButton.Text = GetText("apply_settings")
    Log("Language updated to: " .. Config.Language)
end

LanguageButtonEN.MouseButton1Click:Connect(function()
    LanguageButtonEN.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
    LanguageButtonVI.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
    Config.Language = "en"
    UpdateLanguage()
end)

LanguageButtonVI.MouseButton1Click:Connect(function()
    LanguageButtonVI.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
    LanguageButtonEN.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
    Config.Language = "vi"
    UpdateLanguage()
end)

ESPAlwaysOnTopButton.MouseButton1Click:Connect(function()
    ESPAlwaysOnTopButton.Text = ESPAlwaysOnTopButton.Text == GetText("on") and GetText("off") or GetText("on")
    ESPAlwaysOnTopButton.BackgroundColor3 = ESPAlwaysOnTopButton.Text == GetText("on") and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(0, 150, 255)
end)

ESPDisplayModeButton.MouseButton1Click:Connect(function()
    local modes = {"Name", "Distance", "HP"}
    local currentIndex = table.find(modes, ESPDisplayModeButton.Text) or 1
    local nextIndex = (currentIndex % #modes) + 1
    ESPDisplayModeButton.Text = modes[nextIndex]
end)

IconDraggableButton.MouseButton1Click:Connect(function()
    IconDraggableButton.Text = IconDraggableButton.Text == GetText("on") and GetText("off") or GetText("on")
    IconDraggableButton.BackgroundColor3 = IconDraggableButton.Text == GetText("on") and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(0, 150, 255)
end)

DragHandleButton.MouseButton1Click:Connect(function()
    DragHandleButton.Text = DragHandleButton.Text == GetText("on") and GetText("off") or GetText("on")
    DragHandleButton.BackgroundColor3 = DragHandleButton.Text == GetText("on") and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(0, 150, 255)
end)

Players.PlayerAdded:Connect(function(player)
    if ESPEnabled then
        CreateESP(player)
    end)
end)

Players.PlayerRemoving:Connect(function(player)
    if ESPTable[player] then
        ESPTable[player].billboard:Destroy()
        ESPTable[player] = nil
    end
end)

MinimizeButton.MouseButton1Click:Connect(function()
    Minimized = not Minimized
    MainFrame.Visible = not Minimized
    MinimizedIcon.Visible = Minimized
end)

MinimizedIcon.MouseButton1Click:Connect(function()
    Minimized = false
    MainFrame.Visible = true
    MinimizedIcon.Visible = false
end)

CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
    Log("GUI closed")
end)

SubMenuButton.MouseButton1Click:Connect(ToggleSubMenu)
SubMenuCloseButton.MouseButton1Click:Connect(ToggleSubMenu)

RunService.RenderStepped:Connect(function()
    LimitDragging(MainFrame)
    LimitDragging(SubMenuFrame)
end)

if not CheckExpiration() then
    AuthFrame.Visible = true
    FeaturesFrame.Visible = false
end

SubmitButton.MouseButton1Click:Connect(function()
    if KeyInput.Text == KEY then
        Authenticated = true
        AuthFrame.Visible = false
        FeaturesFrame.Visible = true
        PopulatePlayerList()
        StartRainbowEffect()
        Log("Authentication successful")
    else
        KeyNote.Text = GetText("invalid_key")
        KeyNote.TextColor3 = Color3.fromRGB(255, 0, 0)
        task.delay(2, function()
            KeyNote.Text = "Contact admin for key"
            KeyNote.TextColor3 = Color3.fromRGB(200, 200, 200)
        end)
        Log("Authentication failed")
    end
end)

DeleteButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
    Log("Script deleted")
end)
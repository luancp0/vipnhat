-- Enhanced Roblox Executor Script
-- Features: Draggable GUI, Minimize, Close, Player Targeting, Teleport, Noclip, Distance Adjustment, Auto Platform, Position Saving, ESP

-- Configuration (EDIT THESE VALUES)
local KEY = "123456" -- Change this to your desired key
local VIP_PASSWORD = "987654321" -- Password for VIP icon
local EXPIRATION_DATE = {
    Year = 2025,
    Month = 12, -- Fixed: Changed from 20 to 12 (valid month)
    Day = 15,
    Hour = 12,
    Minute = 0,
    Second = 0
}

-- Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")

-- Variables
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
local Camera = workspace.CurrentCamera

-- State Variables
local NoClipping = false
local Authenticated = false
local Minimized = false
local AutoPlatform = false
local RunningAway = false
local FollowingTarget = false
local AutoNextTarget = false
local AutoCheckPosition = false
local SubMenuVisible = false
local LookingAtPlayer = false
local ESPEnabled = false
local LookTarget = nil
local LookBodyPart = "Head"
local BodyParts = {"Head", "UpperTorso", "HumanoidRootPart", "LeftFoot", "RightFoot"}
local BodyPartIndex = 1

-- ESP Settings
local ESPSettings = {
    FontSize = 18,
    TextColor = Color3.fromRGB(255, 255, 255), -- Default white
    ShowThroughWalls = true,
    ShowName = true,
    ShowDistance = false,
    ShowHealth = false
}

-- Distance Settings
local DistanceBehind = 5
local DistanceAbove = 0
local DetectionRadius = 20

-- Icon Settings
local IconSettings = {
    Size = 50,
    Draggable = false,
    ImageUrl = "rbxassetid://6034684949" -- Default icon
}

-- Safe Position Boundaries
local SafePositionMin = Vector3.new(-1000, -1000, -1000)
local SafePositionMax = Vector3.new(1000, 1000, 1000)

-- Saved Position
local SavedPosition = nil

-- Target Variables
local TargetPlayer = nil
local PlayerList = {}

-- ESP Objects
local ESPObjects = {}

-- Anti-Detection Settings
local AntiDetectionEnabled = false
local AntiKickEnabled = false
local AntiTeleportEnabled = false
local AntiSpeedEnabled = false

-- Create GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ExecutorGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Try to parent to CoreGui for better compatibility, fallback to PlayerGui
local success, err = pcall(function()
    ScreenGui.Parent = CoreGui
end)

if not success then
    ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
end

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 350, 0, 400)
MainFrame.Position = UDim2.new(0.5, -175, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

-- Add UICorner for rounded corners
local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 8)
MainCorner.Parent = MainFrame

-- Add UIStroke for rainbow border
local MainStroke = Instance.new("UIStroke")
MainStroke.Thickness = 2
MainStroke.Color = Color3.fromRGB(255, 0, 0)
MainStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
MainStroke.Parent = MainFrame

-- Title Bar
local TitleBar = Instance.new("Frame")
TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, 30)
TitleBar.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainFrame

-- Add UICorner for title bar
local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 8)
TitleCorner.Parent = TitleBar

-- Title
local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(1, -90, 1, 0)
Title.Position = UDim2.new(0, 10, 0, 0)
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 16
Title.Font = Enum.Font.SourceSansBold
Title.Text = "Roblox Executor"
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = TitleBar

-- SubMenu Button
local SubMenuButton = Instance.new("TextButton")
SubMenuButton.Name = "SubMenuButton"
SubMenuButton.Size = UDim2.new(0, 30, 0, 30)
SubMenuButton.Position = UDim2.new(1, -90, 0, 0)
SubMenuButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
SubMenuButton.BorderSizePixel = 0
SubMenuButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SubMenuButton.TextSize = 16
SubMenuButton.Font = Enum.Font.SourceSansBold
SubMenuButton.Text = "≡"
SubMenuButton.Parent = TitleBar

-- Add UICorner for submenu button
local SubMenuCorner = Instance.new("UICorner")
SubMenuCorner.CornerRadius = UDim.new(0, 8)
SubMenuCorner.Parent = SubMenuButton

-- Close Button
local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(1, -30, 0, 0)
CloseButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
CloseButton.BorderSizePixel = 0
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 16
CloseButton.Font = Enum.Font.SourceSansBold
CloseButton.Text = "X"
CloseButton.Parent = TitleBar

-- Add UICorner for close button
local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 8)
CloseCorner.Parent = CloseButton

-- Minimize Button
local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Name = "MinimizeButton"
MinimizeButton.Size = UDim2.new(0, 30, 0, 30)
MinimizeButton.Position = UDim2.new(1, -60, 0, 0)
MinimizeButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
MinimizeButton.BorderSizePixel = 0
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.TextSize = 16
MinimizeButton.Font = Enum.Font.SourceSansBold
MinimizeButton.Text = "-"
MinimizeButton.Parent = TitleBar

-- Add UICorner for minimize button
local MinimizeCorner = Instance.new("UICorner")
MinimizeCorner.CornerRadius = UDim.new(0, 8)
MinimizeCorner.Parent = MinimizeButton

-- Content Frame
local ContentFrame = Instance.new("Frame")
ContentFrame.Name = "ContentFrame"
ContentFrame.Size = UDim2.new(1, 0, 1, -30)
ContentFrame.Position = UDim2.new(0, 0, 0, 30)
ContentFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
ContentFrame.BorderSizePixel = 0
ContentFrame.Parent = MainFrame

-- Authentication Frame
local AuthFrame = Instance.new("Frame")
AuthFrame.Name = "AuthFrame"
AuthFrame.Size = UDim2.new(1, 0, 1, 0)
AuthFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
AuthFrame.BorderSizePixel = 0
AuthFrame.Visible = true
AuthFrame.Parent = ContentFrame

local AuthTitle = Instance.new("TextLabel")
AuthTitle.Name = "AuthTitle"
AuthTitle.Size = UDim2.new(1, 0, 0, 40)
AuthTitle.Position = UDim2.new(0, 0, 0.1, 0)
AuthTitle.BackgroundTransparency = 1
AuthTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
AuthTitle.TextSize = 20
AuthTitle.Font = Enum.Font.SourceSansBold
AuthTitle.Text = "Enter Key to Continue"
AuthTitle.Parent = AuthFrame

local KeyInput = Instance.new("TextBox")
KeyInput.Name = "KeyInput"
KeyInput.Size = UDim2.new(0.8, 0, 0, 40)
KeyInput.Position = UDim2.new(0.1, 0, 0.3, 0)
KeyInput.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
KeyInput.BorderSizePixel = 0
KeyInput.TextColor3 = Color3.fromRGB(255, 255, 255)
KeyInput.TextSize = 16
KeyInput.Font = Enum.Font.SourceSans
KeyInput.PlaceholderText = "Enter Key Here..."
KeyInput.Text = ""
KeyInput.ClearTextOnFocus = false
KeyInput.Parent = AuthFrame

-- Add UICorner for key input
local KeyInputCorner = Instance.new("UICorner")
KeyInputCorner.CornerRadius = UDim.new(0, 8)
KeyInputCorner.Parent = KeyInput

local SubmitButton = Instance.new("TextButton")
SubmitButton.Name = "SubmitButton"
SubmitButton.Size = UDim2.new(0.5, 0, 0, 40)
SubmitButton.Position = UDim2.new(0.25, 0, 0.5, 0)
SubmitButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
SubmitButton.BorderSizePixel = 0
SubmitButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SubmitButton.TextSize = 16
SubmitButton.Font = Enum.Font.SourceSansBold
SubmitButton.Text = "Submit"
SubmitButton.Parent = AuthFrame

-- Add UICorner for submit button
local SubmitCorner = Instance.new("UICorner")
SubmitCorner.CornerRadius = UDim.new(0, 8)
SubmitCorner.Parent = SubmitButton

-- Changed from key display to a note
local KeyNote = Instance.new("TextLabel")
KeyNote.Name = "KeyNote"
KeyNote.Size = UDim2.new(1, 0, 0, 30)
KeyNote.Position = UDim2.new(0, 0, 0.7, 0)
KeyNote.BackgroundTransparency = 1
KeyNote.TextColor3 = Color3.fromRGB(200, 200, 200)
KeyNote.TextSize = 14
KeyNote.Font = Enum.Font.SourceSans
KeyNote.Text = "Liên hệ admin để nhận key"
KeyNote.Parent = AuthFrame

-- Main Features Frame (Hidden until authenticated)
local FeaturesFrame = Instance.new("Frame")
FeaturesFrame.Name = "FeaturesFrame"
FeaturesFrame.Size = UDim2.new(1, 0, 1, 0)
FeaturesFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
FeaturesFrame.BorderSizePixel = 0
FeaturesFrame.Visible = false
FeaturesFrame.Parent = ContentFrame

-- Create ScrollingFrame for content with increased canvas size
local ScrollFrame = Instance.new("ScrollingFrame")
ScrollFrame.Name = "ScrollFrame"
ScrollFrame.Size = UDim2.new(1, -10, 1, -10)
ScrollFrame.Position = UDim2.new(0, 5, 0, 5)
ScrollFrame.BackgroundTransparency = 1
ScrollFrame.BorderSizePixel = 0
ScrollFrame.ScrollBarThickness = 6
ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 1100) -- Increased canvas size for more scrolling space
ScrollFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y -- Automatically adjust canvas size based on content
ScrollFrame.ScrollingDirection = Enum.ScrollingDirection.Y -- Only allow vertical scrolling
ScrollFrame.ScrollingEnabled = true -- Ensure scrolling is enabled
ScrollFrame.ElasticBehavior = Enum.ElasticBehavior.Always -- Smooth elastic scrolling
ScrollFrame.Parent = FeaturesFrame

-- Create UIListLayout for organized content
local ListLayout = Instance.new("UIListLayout")
ListLayout.Padding = UDim.new(0, 10)
ListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
ListLayout.Parent = ScrollFrame

-- Section: Position Saving
local PositionSection = Instance.new("Frame")
PositionSection.Name = "PositionSection"
PositionSection.Size = UDim2.new(0.95, 0, 0, 100)
PositionSection.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
PositionSection.BorderSizePixel = 0
PositionSection.Parent = ScrollFrame

-- Add UICorner for position section
local PositionSectionCorner = Instance.new("UICorner")
PositionSectionCorner.CornerRadius = UDim.new(0, 8)
PositionSectionCorner.Parent = PositionSection

local PositionTitle = Instance.new("TextLabel")
PositionTitle.Name = "PositionTitle"
PositionTitle.Size = UDim2.new(1, 0, 0, 30)
PositionTitle.BackgroundTransparency = 1
PositionTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
PositionTitle.TextSize = 16
PositionTitle.Font = Enum.Font.SourceSansBold
PositionTitle.Text = "Position Controls"
PositionTitle.Parent = PositionSection

local SavePositionButton = Instance.new("TextButton")
SavePositionButton.Name = "SavePositionButton"
SavePositionButton.Size = UDim2.new(0.45, 0, 0, 35)
SavePositionButton.Position = UDim2.new(0.05, 0, 0, 40)
SavePositionButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
SavePositionButton.BorderSizePixel = 0
SavePositionButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SavePositionButton.TextSize = 14
SavePositionButton.Font = Enum.Font.SourceSansBold
SavePositionButton.Text = "Save Position"
SavePositionButton.Parent = PositionSection

-- Add UICorner for save position button
local SavePositionCorner = Instance.new("UICorner")
SavePositionCorner.CornerRadius = UDim.new(0, 6)
SavePositionCorner.Parent = SavePositionButton

local TeleportToSavedButton = Instance.new("TextButton")
TeleportToSavedButton.Name = "TeleportToSavedButton"
TeleportToSavedButton.Size = UDim2.new(0.45, 0, 0, 35)
TeleportToSavedButton.Position = UDim2.new(0.5, 0, 0, 40)
TeleportToSavedButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
TeleportToSavedButton.BorderSizePixel = 0
TeleportToSavedButton.TextColor3 = Color3.fromRGB(255, 255, 255)
TeleportToSavedButton.TextSize = 14
TeleportToSavedButton.Font = Enum.Font.SourceSansBold
TeleportToSavedButton.Text = "Teleport to Saved"
TeleportToSavedButton.Parent = PositionSection

-- Add UICorner for teleport to saved button
local TeleportToSavedCorner = Instance.new("UICorner")
TeleportToSavedCorner.CornerRadius = UDim.new(0, 6)
TeleportToSavedCorner.Parent = TeleportToSavedButton

-- Section: Player Targeting
local TargetSection = Instance.new("Frame")
TargetSection.Name = "TargetSection"
TargetSection.Size = UDim2.new(0.95, 0, 0, 160) -- Increased height for new button
TargetSection.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
TargetSection.BorderSizePixel = 0
TargetSection.Parent = ScrollFrame

-- Add UICorner for target section
local TargetSectionCorner = Instance.new("UICorner")
TargetSectionCorner.CornerRadius = UDim.new(0, 8)
TargetSectionCorner.Parent = TargetSection

local TargetTitle = Instance.new("TextLabel")
TargetTitle.Name = "TargetTitle"
TargetTitle.Size = UDim2.new(1, 0, 0, 30)
TargetTitle.BackgroundTransparency = 1
TargetTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
TargetTitle.TextSize = 16
TargetTitle.Font = Enum.Font.SourceSansBold
TargetTitle.Text = "Target Selection"
TargetTitle.Parent = TargetSection

local TargetDropdown = Instance.new("TextButton")
TargetDropdown.Name = "TargetDropdown"
TargetDropdown.Size = UDim2.new(0.6, 0, 0, 30)
TargetDropdown.Position = UDim2.new(0.05, 0, 0, 35)
TargetDropdown.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
TargetDropdown.BorderSizePixel = 0
TargetDropdown.TextColor3 = Color3.fromRGB(255, 255, 255)
TargetDropdown.TextSize = 14
TargetDropdown.Font = Enum.Font.SourceSans
TargetDropdown.Text = "Select Target"
TargetDropdown.Parent = TargetSection

-- Add UICorner for target dropdown
local TargetDropdownCorner = Instance.new("UICorner")
TargetDropdownCorner.CornerRadius = UDim.new(0, 6)
TargetDropdownCorner.Parent = TargetDropdown

local ReloadButton = Instance.new("TextButton")
ReloadButton.Name = "ReloadButton"
ReloadButton.Size = UDim2.new(0.25, 0, 0, 30)
ReloadButton.Position = UDim2.new(0.7, 0, 0, 35)
ReloadButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
ReloadButton.BorderSizePixel = 0
ReloadButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ReloadButton.TextSize = 14
ReloadButton.Font = Enum.Font.SourceSans
ReloadButton.Text = "Reload"
ReloadButton.Parent = TargetSection

-- Add UICorner for reload button
local ReloadCorner = Instance.new("UICorner")
ReloadCorner.CornerRadius = UDim.new(0, 6)
ReloadCorner.Parent = ReloadButton

-- Add Select Nearest button to Target Selection section
local SelectNearestTargetButton = Instance.new("TextButton")
SelectNearestTargetButton.Name = "SelectNearestTargetButton"
SelectNearestTargetButton.Size = UDim2.new(0.9, 0, 0, 30)
SelectNearestTargetButton.Position = UDim2.new(0.05, 0, 0, 75)
SelectNearestTargetButton.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
SelectNearestTargetButton.BorderSizePixel = 0
SelectNearestTargetButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SelectNearestTargetButton.TextSize = 14
SelectNearestTargetButton.Font = Enum.Font.SourceSansBold
SelectNearestTargetButton.Text = "Select Nearest Player"
SelectNearestTargetButton.Parent = TargetSection

-- Add UICorner for select nearest target button
local SelectNearestTargetCorner = Instance.new("UICorner")
SelectNearestTargetCorner.CornerRadius = UDim.new(0, 6)
SelectNearestTargetCorner.Parent = SelectNearestTargetButton

local FollowButton = Instance.new("TextButton")
FollowButton.Name = "FollowButton"
FollowButton.Size = UDim2.new(0.45, 0, 0, 35)
FollowButton.Position = UDim2.new(0.05, 0, 0, 115)
FollowButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
FollowButton.BorderSizePixel = 0
FollowButton.TextColor3 = Color3.fromRGB(255, 255, 255)
FollowButton.TextSize = 14
FollowButton.Font = Enum.Font.SourceSansBold
FollowButton.Text = "Follow: OFF"
FollowButton.Parent = TargetSection

-- Add UICorner for follow button
local FollowCorner = Instance.new("UICorner")
FollowCorner.CornerRadius = UDim.new(0, 6)
FollowCorner.Parent = FollowButton

local NextButton = Instance.new("TextButton")
NextButton.Name = "NextButton"
NextButton.Size = UDim2.new(0.45, 0, 0, 35)
NextButton.Position = UDim2.new(0.5, 0, 0, 115)
NextButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
NextButton.BorderSizePixel = 0
NextButton.TextColor3 = Color3.fromRGB(255, 255, 255)
NextButton.TextSize = 14
NextButton.Font = Enum.Font.SourceSansBold
NextButton.Text = "Auto Next: OFF"
NextButton.Parent = TargetSection

-- Add UICorner for next button
local NextCorner = Instance.new("UICorner")
NextCorner.CornerRadius = UDim.new(0, 6)
NextCorner.Parent = NextButton

-- Dropdown Frame for player selection
local DropdownFrame = Instance.new("Frame")
DropdownFrame.Name = "DropdownFrame"
DropdownFrame.Size = UDim2.new(0.6, 0, 0, 200) -- Increased height for more players
DropdownFrame.Position = UDim2.new(0.05, 0, 0, 65)
DropdownFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
DropdownFrame.BorderSizePixel = 0
DropdownFrame.Visible = false
DropdownFrame.ZIndex = 10
DropdownFrame.Parent = TargetSection

-- Add UICorner for dropdown frame
local DropdownFrameCorner = Instance.new("UICorner")
DropdownFrameCorner.CornerRadius = UDim.new(0, 6)
DropdownFrameCorner.Parent = DropdownFrame

-- ScrollingFrame for player list with improved scrolling
local PlayerScrollFrame = Instance.new("ScrollingFrame")
PlayerScrollFrame.Name = "PlayerScrollFrame"
PlayerScrollFrame.Size = UDim2.new(1, -10, 1, -10)
PlayerScrollFrame.Position = UDim2.new(0, 5, 0, 5)
PlayerScrollFrame.BackgroundTransparency = 1
PlayerScrollFrame.BorderSizePixel = 0
PlayerScrollFrame.ScrollBarThickness = 4
PlayerScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0) -- Will adjust based on content
PlayerScrollFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y -- Automatically adjust canvas size
PlayerScrollFrame.ScrollingDirection = Enum.ScrollingDirection.Y -- Only allow vertical scrolling
PlayerScrollFrame.ScrollingEnabled = true -- Ensure scrolling is enabled
PlayerScrollFrame.ElasticBehavior = Enum.ElasticBehavior.Always -- Smooth elastic scrolling
PlayerScrollFrame.ZIndex = 11
PlayerScrollFrame.Parent = DropdownFrame

-- UIListLayout for player list
local PlayerListLayout = Instance.new("UIListLayout")
PlayerListLayout.Padding = UDim.new(0, 5)
PlayerListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
PlayerListLayout.Parent = PlayerScrollFrame

-- Section: Distance Controls
local DistanceSection = Instance.new("Frame")
DistanceSection.Name = "DistanceSection"
DistanceSection.Size = UDim2.new(0.95, 0, 0, 150)
DistanceSection.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
DistanceSection.BorderSizePixel = 0
DistanceSection.Parent = ScrollFrame

-- Add UICorner for distance section
local DistanceSectionCorner = Instance.new("UICorner")
DistanceSectionCorner.CornerRadius = UDim.new(0, 8)
DistanceSectionCorner.Parent = DistanceSection

local DistanceTitle = Instance.new("TextLabel")
DistanceTitle.Name = "DistanceTitle"
DistanceTitle.Size = UDim2.new(1, 0, 0, 30)
DistanceTitle.BackgroundTransparency = 1
DistanceTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
DistanceTitle.TextSize = 16
DistanceTitle.Font = Enum.Font.SourceSansBold
DistanceTitle.Text = "Distance Controls"
DistanceTitle.Parent = DistanceSection

-- Horizontal Distance Controls
local HorizontalLabel = Instance.new("TextLabel")
HorizontalLabel.Name = "HorizontalLabel"
HorizontalLabel.Size = UDim2.new(0.4, 0, 0, 25)
HorizontalLabel.Position = UDim2.new(0.05, 0, 0, 35)
HorizontalLabel.BackgroundTransparency = 1
HorizontalLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
HorizontalLabel.TextSize = 14
HorizontalLabel.Font = Enum.Font.SourceSans
HorizontalLabel.Text = "Behind:"
HorizontalLabel.TextXAlignment = Enum.TextXAlignment.Left
HorizontalLabel.Parent = DistanceSection

local HorizontalInput = Instance.new("TextBox")
HorizontalInput.Name = "HorizontalInput"
HorizontalInput.Size = UDim2.new(0.2, 0, 0, 25)
HorizontalInput.Position = UDim2.new(0.45, 0, 0, 35)
HorizontalInput.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
HorizontalInput.BorderSizePixel = 0
HorizontalInput.TextColor3 = Color3.fromRGB(255, 255, 255)
HorizontalInput.TextSize = 14
HorizontalInput.Font = Enum.Font.SourceSans
HorizontalInput.Text = "5"
HorizontalInput.Parent = DistanceSection

-- Add UICorner for horizontal input
local HorizontalInputCorner = Instance.new("UICorner")
HorizontalInputCorner.CornerRadius = UDim.new(0, 6)
HorizontalInputCorner.Parent = HorizontalInput

local HorizontalPlus = Instance.new("TextButton")
HorizontalPlus.Name = "HorizontalPlus"
HorizontalPlus.Size = UDim2.new(0.1, 0, 0, 25)
HorizontalPlus.Position = UDim2.new(0.7, 0, 0, 35)
HorizontalPlus.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
HorizontalPlus.BorderSizePixel = 0
HorizontalPlus.TextColor3 = Color3.fromRGB(255, 255, 255)
HorizontalPlus.TextSize = 14
HorizontalPlus.Font = Enum.Font.SourceSansBold
HorizontalPlus.Text = "+"
HorizontalPlus.Parent = DistanceSection

-- Add UICorner for horizontal plus
local HorizontalPlusCorner = Instance.new("UICorner")
HorizontalPlusCorner.CornerRadius = UDim.new(0, 6)
HorizontalPlusCorner.Parent = HorizontalPlus

local HorizontalMinus = Instance.new("TextButton")
HorizontalMinus.Name = "HorizontalMinus"
HorizontalMinus.Size = UDim2.new(0.1, 0, 0, 25)
HorizontalMinus.Position = UDim2.new(0.85, 0, 0, 35)
HorizontalMinus.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
HorizontalMinus.BorderSizePixel = 0
HorizontalMinus.TextColor3 = Color3.fromRGB(255, 255, 255)
HorizontalMinus.TextSize = 14
HorizontalMinus.Font = Enum.Font.SourceSansBold
HorizontalMinus.Text = "-"
HorizontalMinus.Parent = DistanceSection

-- Add UICorner for horizontal minus
local HorizontalMinusCorner = Instance.new("UICorner")
HorizontalMinusCorner.CornerRadius = UDim.new(0, 6)
HorizontalMinusCorner.Parent = HorizontalMinus

-- Vertical Distance Controls
local VerticalLabel = Instance.new("TextLabel")
VerticalLabel.Name = "VerticalLabel"
VerticalLabel.Size = UDim2.new(0.4, 0, 0, 25)
VerticalLabel.Position = UDim2.new(0.05, 0, 0, 70)
VerticalLabel.BackgroundTransparency = 1
VerticalLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
VerticalLabel.TextSize = 14
VerticalLabel.Font = Enum.Font.SourceSans
VerticalLabel.Text = "Above:"
VerticalLabel.TextXAlignment = Enum.TextXAlignment.Left
VerticalLabel.Parent = DistanceSection

local VerticalInput = Instance.new("TextBox")
VerticalInput.Name = "VerticalInput"
VerticalInput.Size = UDim2.new(0.2, 0, 0, 25)
VerticalInput.Position = UDim2.new(0.45, 0, 0, 70)
VerticalInput.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
VerticalInput.BorderSizePixel = 0
VerticalInput.TextColor3 = Color3.fromRGB(255, 255, 255)
VerticalInput.TextSize = 14
VerticalInput.Font = Enum.Font.SourceSans
VerticalInput.Text = "0"
VerticalInput.Parent = DistanceSection

-- Add UICorner for vertical input
local VerticalInputCorner = Instance.new("UICorner")
VerticalInputCorner.CornerRadius = UDim.new(0, 6)
VerticalInputCorner.Parent = VerticalInput

local VerticalPlus = Instance.new("TextButton")
VerticalPlus.Name = "VerticalPlus"
VerticalPlus.Size = UDim2.new(0.1, 0, 0, 25)
VerticalPlus.Position = UDim2.new(0.7, 0, 0, 70)
VerticalPlus.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
VerticalPlus.BorderSizePixel = 0
VerticalPlus.TextColor3 = Color3.fromRGB(255, 255, 255)
VerticalPlus.TextSize = 14
VerticalPlus.Font = Enum.Font.SourceSansBold
VerticalPlus.Text = "+"
VerticalPlus.Parent = DistanceSection

-- Add UICorner for vertical plus
local VerticalPlusCorner = Instance.new("UICorner")
VerticalPlusCorner.CornerRadius = UDim.new(0, 6)
VerticalPlusCorner.Parent = VerticalPlus

local VerticalMinus = Instance.new("TextButton")
VerticalMinus.Name = "VerticalMinus"
VerticalMinus.Size = UDim2.new(0.1, 0, 0, 25)
VerticalMinus.Position = UDim2.new(0.85, 0, 0, 70)
VerticalMinus.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
VerticalMinus.BorderSizePixel = 0
VerticalMinus.TextColor3 = Color3.fromRGB(255, 255, 255)
VerticalMinus.TextSize = 14
VerticalMinus.Font = Enum.Font.SourceSansBold
VerticalMinus.Text = "-"
VerticalMinus.Parent = DistanceSection

-- Add UICorner for vertical minus
local VerticalMinusCorner = Instance.new("UICorner")
VerticalMinusCorner.CornerRadius = UDim.new(0, 6)
VerticalMinusCorner.Parent = VerticalMinus

-- Detection Radius Controls
local RadiusLabel = Instance.new("TextLabel")
RadiusLabel.Name = "RadiusLabel"
RadiusLabel.Size = UDim2.new(0.4, 0, 0, 25)
RadiusLabel.Position = UDim2.new(0.05, 0, 0, 105)
RadiusLabel.BackgroundTransparency = 1
RadiusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
RadiusLabel.TextSize = 14
RadiusLabel.Font = Enum.Font.SourceSans
RadiusLabel.Text = "Detection Radius:"
RadiusLabel.TextXAlignment = Enum.TextXAlignment.Left
RadiusLabel.Parent = DistanceSection

local RadiusInput = Instance.new("TextBox")
RadiusInput.Name = "RadiusInput"
RadiusInput.Size = UDim2.new(0.2, 0, 0, 25)
RadiusInput.Position = UDim2.new(0.45, 0, 0, 105)
RadiusInput.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
RadiusInput.BorderSizePixel = 0
RadiusInput.TextColor3 = Color3.fromRGB(255, 255, 255)
RadiusInput.TextSize = 14
RadiusInput.Font = Enum.Font.SourceSans
RadiusInput.Text = "20"
RadiusInput.Parent = DistanceSection

-- Add UICorner for radius input
local RadiusInputCorner = Instance.new("UICorner")
RadiusInputCorner.CornerRadius = UDim.new(0, 6)
RadiusInputCorner.Parent = RadiusInput

local RadiusPlus = Instance.new("TextButton")
RadiusPlus.Name = "RadiusPlus"
RadiusPlus.Size = UDim2.new(0.1, 0, 0, 25)
RadiusPlus.Position = UDim2.new(0.7, 0, 0, 105)
RadiusPlus.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
RadiusPlus.BorderSizePixel = 0
RadiusPlus.TextColor3 = Color3.fromRGB(255, 255, 255)
RadiusPlus.TextSize = 14
RadiusPlus.Font = Enum.Font.SourceSansBold
RadiusPlus.Text = "+"
RadiusPlus.Parent = DistanceSection

-- Add UICorner for radius plus
local RadiusPlusCorner = Instance.new("UICorner")
RadiusPlusCorner.CornerRadius = UDim.new(0, 6)
RadiusPlusCorner.Parent = RadiusPlus

local RadiusMinus = Instance.new("TextButton")
RadiusMinus.Name = "RadiusMinus"
RadiusMinus.Size = UDim2.new(0.1, 0, 0, 25)
RadiusMinus.Position = UDim2.new(0.85, 0, 0, 105)
RadiusMinus.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
RadiusMinus.BorderSizePixel = 0
RadiusMinus.TextColor3 = Color3.fromRGB(255, 255, 255)
RadiusMinus.TextSize = 14
RadiusMinus.Font = Enum.Font.SourceSansBold
RadiusMinus.Text = "-"
RadiusMinus.Parent = DistanceSection

-- Add UICorner for radius minus
local RadiusMinusCorner = Instance.new("UICorner")
RadiusMinusCorner.CornerRadius = UDim.new(0, 6)
RadiusMinusCorner.Parent = RadiusMinus

-- Section: Feature Buttons
local FeaturesButtonSection = Instance.new("Frame")
FeaturesButtonSection.Name = "FeaturesButtonSection"
FeaturesButtonSection.Size = UDim2.new(0.95, 0, 0, 180)
FeaturesButtonSection.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
FeaturesButtonSection.BorderSizePixel = 0
FeaturesButtonSection.Parent = ScrollFrame

-- Add UICorner for features button section
local FeaturesButtonSectionCorner = Instance.new("UICorner")
FeaturesButtonSectionCorner.CornerRadius = UDim.new(0, 8)
FeaturesButtonSectionCorner.Parent = FeaturesButtonSection

local FeaturesTitle = Instance.new("TextLabel")
FeaturesTitle.Name = "FeaturesTitle"
FeaturesTitle.Size = UDim2.new(1, 0, 0, 30)
FeaturesTitle.BackgroundTransparency = 1
FeaturesTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
FeaturesTitle.TextSize = 16
FeaturesTitle.Font = Enum.Font.SourceSansBold
FeaturesTitle.Text = "Features"
FeaturesTitle.Parent = FeaturesButtonSection

-- Noclip Button
local NoclipButton = Instance.new("TextButton")
NoclipButton.Name = "NoclipButton"
NoclipButton.Size = UDim2.new(0.45, 0, 0, 35)
NoclipButton.Position = UDim2.new(0.05, 0, 0, 35)
NoclipButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
NoclipButton.BorderSizePixel = 0
NoclipButton.TextColor3 = Color3.fromRGB(255, 255, 255)
NoclipButton.TextSize = 14
NoclipButton.Font = Enum.Font.SourceSansBold
NoclipButton.Text = "Noclip: OFF"
NoclipButton.Parent = FeaturesButtonSection

-- Add UICorner for noclip button
local NoclipCorner = Instance.new("UICorner")
NoclipCorner.CornerRadius = UDim.new(0, 6)
NoclipCorner.Parent = NoclipButton

-- Platform Button
local PlatformButton = Instance.new("TextButton")
PlatformButton.Name = "PlatformButton"
PlatformButton.Size = UDim2.new(0.45, 0, 0, 35)
PlatformButton.Position = UDim2.new(0.5, 0, 0, 35)
PlatformButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
PlatformButton.BorderSizePixel = 0
PlatformButton.TextColor3 = Color3.fromRGB(255, 255, 255)
PlatformButton.TextSize = 14
PlatformButton.Font = Enum.Font.SourceSansBold
PlatformButton.Text = "Platform: OFF"
PlatformButton.Parent = FeaturesButtonSection

-- Add UICorner for platform button
local PlatformCorner = Instance.new("UICorner")
PlatformCorner.CornerRadius = UDim.new(0, 6)
PlatformCorner.Parent = PlatformButton

-- Run Button
local RunButton = Instance.new("TextButton")
RunButton.Name = "RunButton"
RunButton.Size = UDim2.new(0.45, 0, 0, 35)
RunButton.Position = UDim2.new(0.05, 0, 0, 80)
RunButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
RunButton.BorderSizePixel = 0
RunButton.TextColor3 = Color3.fromRGB(255, 255, 255)
RunButton.TextSize = 14
RunButton.Font = Enum.Font.SourceSansBold
RunButton.Text = "Run Away: OFF"
RunButton.Parent = FeaturesButtonSection

-- Add UICorner for run button
local RunCorner = Instance.new("UICorner")
RunCorner.CornerRadius = UDim.new(0, 6)
RunCorner.Parent = RunButton

-- ESP Button (New)
local ESPButton = Instance.new("TextButton")
ESPButton.Name = "ESPButton"
ESPButton.Size = UDim2.new(0.45, 0, 0, 35)
ESPButton.Position = UDim2.new(0.5, 0, 0, 80)
ESPButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
ESPButton.BorderSizePixel = 0
ESPButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ESPButton.TextSize = 14
ESPButton.Font = Enum.Font.SourceSansBold
ESPButton.Text = "ESP: OFF"
ESPButton.Parent = FeaturesButtonSection

-- Add UICorner for ESP button
local ESPCorner = Instance.new("UICorner")
ESPCorner.CornerRadius = UDim.new(0, 6)
ESPCorner.Parent = ESPButton

-- Auto Next Checkbox
local AutoNextCheck = Instance.new("Frame")
AutoNextCheck.Name = "AutoNextCheck"
AutoNextCheck.Size = UDim2.new(0.05, 0, 0, 20)
AutoNextCheck.Position = UDim2.new(0.05, 0, 0, 132.5)
AutoNextCheck.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
AutoNextCheck.BorderSizePixel = 0
AutoNextCheck.Parent = FeaturesButtonSection

-- Add UICorner for auto next check
local AutoNextCheckCorner = Instance.new("UICorner")
AutoNextCheckCorner.CornerRadius = UDim.new(0, 4)
AutoNextCheckCorner.Parent = AutoNextCheck

local AutoNextLabel = Instance.new("TextLabel")
AutoNextLabel.Name = "AutoNextLabel"
AutoNextLabel.Size = UDim2.new(0.35, 0, 0, 35)
AutoNextLabel.Position = UDim2.new(0.15, 0, 0, 125)
AutoNextLabel.BackgroundTransparency = 1
AutoNextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
AutoNextLabel.TextSize = 14
AutoNextLabel.Font = Enum.Font.SourceSans
AutoNextLabel.Text = "Auto Next Target"
AutoNextLabel.TextXAlignment = Enum.TextXAlignment.Left
AutoNextLabel.Parent = FeaturesButtonSection

-- Auto Platform Checkbox
local AutoPlatformCheck = Instance.new("Frame")
AutoPlatformCheck.Name = "AutoPlatformCheck"
AutoPlatformCheck.Size = UDim2.new(0.05, 0, 0, 20)
AutoPlatformCheck.Position = UDim2.new(0.5, 0, 0, 132.5)
AutoPlatformCheck.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
AutoPlatformCheck.BorderSizePixel = 0
AutoPlatformCheck.Parent = FeaturesButtonSection

-- Add UICorner for auto platform check
local AutoPlatformCheckCorner = Instance.new("UICorner")
AutoPlatformCheckCorner.CornerRadius = UDim.new(0, 4)
AutoPlatformCheckCorner.Parent = AutoPlatformCheck

local AutoPlatformLabel = Instance.new("TextLabel")
AutoPlatformLabel.Name = "AutoPlatformLabel"
AutoPlatformLabel.Size = UDim2.new(0.35, 0, 0, 35)
AutoPlatformLabel.Position = UDim2.new(0.6, 0, 0, 125)
AutoPlatformLabel.BackgroundTransparency = 1
AutoPlatformLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
AutoPlatformLabel.TextSize = 14
AutoPlatformLabel.Font = Enum.Font.SourceSans
AutoPlatformLabel.Text = "Auto Platform"
AutoPlatformLabel.TextXAlignment = Enum.TextXAlignment.Left
AutoPlatformLabel.Parent = FeaturesButtonSection

-- Expiration Info
local ExpirationSection = Instance.new("Frame")
ExpirationSection.Name = "ExpirationSection"
ExpirationSection.Size = UDim2.new(0.95, 0, 0, 50)
ExpirationSection.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
ExpirationSection.BorderSizePixel = 0
ExpirationSection.Parent = ScrollFrame

-- Add UICorner for expiration section
local ExpirationSectionCorner = Instance.new("UICorner")
ExpirationSectionCorner.CornerRadius = UDim.new(0, 8)
ExpirationSectionCorner.Parent = ExpirationSection

local ExpirationLabel = Instance.new("TextLabel")
ExpirationLabel.Name = "ExpirationLabel"
ExpirationLabel.Size = UDim2.new(1, 0, 1, 0)
ExpirationLabel.BackgroundTransparency = 1
ExpirationLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
ExpirationLabel.TextSize = 14
ExpirationLabel.Font = Enum.Font.SourceSans
ExpirationLabel.Text = "Expires: Loading..."
ExpirationLabel.Parent = ExpirationSection

-- Section: Look At Player
local LookAtSection = Instance.new("Frame")
LookAtSection.Name = "LookAtSection"
LookAtSection.Size = UDim2.new(0.95, 0, 0, 180)
LookAtSection.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
LookAtSection.BorderSizePixel = 0
LookAtSection.Parent = ScrollFrame

-- Add UICorner for look at section
local LookAtSectionCorner = Instance.new("UICorner")
LookAtSectionCorner.CornerRadius = UDim.new(0, 8)
LookAtSectionCorner.Parent = LookAtSection

local LookAtTitle = Instance.new("TextLabel")
LookAtTitle.Name = "LookAtTitle"
LookAtTitle.Size = UDim2.new(1, 0, 0, 30)
LookAtTitle.BackgroundTransparency = 1
LookAtTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
LookAtTitle.TextSize = 16
LookAtTitle.Font = Enum.Font.SourceSansBold
LookAtTitle.Text = "Look At Player"
LookAtTitle.Parent = LookAtSection

-- Look At Toggle Button
local LookAtButton = Instance.new("TextButton")
LookAtButton.Name = "LookAtButton"
LookAtButton.Size = UDim2.new(0.45, 0, 0, 35)
LookAtButton.Position = UDim2.new(0.05, 0, 0, 35)
LookAtButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
LookAtButton.BorderSizePixel = 0
LookAtButton.TextColor3 = Color3.fromRGB(255, 255, 255)
LookAtButton.TextSize = 14
LookAtButton.Font = Enum.Font.SourceSansBold
LookAtButton.Text = "Look At: OFF"
LookAtButton.Parent = LookAtSection

-- Add UICorner for look at button
local LookAtCorner = Instance.new("UICorner")
LookAtCorner.CornerRadius = UDim.new(0, 6)
LookAtCorner.Parent = LookAtButton

-- Body Part Button
local BodyPartButton = Instance.new("TextButton")
BodyPartButton.Name = "BodyPartButton"
BodyPartButton.Size = UDim2.new(0.45, 0, 0, 35)
BodyPartButton.Position = UDim2.new(0.5, 0, 0, 35)
BodyPartButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
BodyPartButton.BorderSizePixel = 0
BodyPartButton.TextColor3 = Color3.fromRGB(255, 255, 255)
BodyPartButton.TextSize = 14
BodyPartButton.Font = Enum.Font.SourceSansBold
BodyPartButton.Text = "Part: Head"
BodyPartButton.Parent = LookAtSection

-- Add UICorner for body part button
local BodyPartCorner = Instance.new("UICorner")
BodyPartCorner.CornerRadius = UDim.new(0, 6)
BodyPartCorner.Parent = BodyPartButton

-- Nearest Player Button
local NearestPlayerButton = Instance.new("TextButton")
NearestPlayerButton.Name = "NearestPlayerButton"
NearestPlayerButton.Size = UDim2.new(0.45, 0, 0, 35)
NearestPlayerButton.Position = UDim2.new(0.05, 0, 0, 80)
NearestPlayerButton.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
NearestPlayerButton.BorderSizePixel = 0
NearestPlayerButton.TextColor3 = Color3.fromRGB(255, 255, 255)
NearestPlayerButton.TextSize = 14
NearestPlayerButton.Font = Enum.Font.SourceSansBold
NearestPlayerButton.Text = "Select Nearest"
NearestPlayerButton.Parent = LookAtSection

-- Add UICorner for nearest player button
local NearestPlayerCorner = Instance.new("UICorner")
NearestPlayerCorner.CornerRadius = UDim.new(0, 6)
NearestPlayerCorner.Parent = NearestPlayerButton

-- Teleport Behind Button
local TeleportBehindButton = Instance.new("TextButton")
TeleportBehindButton.Name = "TeleportBehindButton"
TeleportBehindButton.Size = UDim2.new(0.45, 0, 0, 35)
TeleportBehindButton.Position = UDim2.new(0.5, 0, 0, 80)
TeleportBehindButton.BackgroundColor3 = Color3.fromRGB(0, 0, 255)
TeleportBehindButton.BorderSizePixel = 0
TeleportBehindButton.TextColor3 = Color3.fromRGB(255, 255, 255)
TeleportBehindButton.TextSize = 14
TeleportBehindButton.Font = Enum.Font.SourceSansBold
TeleportBehindButton.Text = "Teleport Behind"
TeleportBehindButton.Parent = LookAtSection

-- Add UICorner for teleport behind button
local TeleportBehindCorner = Instance.new("UICorner")
TeleportBehindCorner.CornerRadius = UDim.new(0, 6)
TeleportBehindCorner.Parent = TeleportBehindButton

-- Current Target Label
local CurrentTargetLabel = Instance.new("TextLabel")
CurrentTargetLabel.Name = "CurrentTargetLabel"
CurrentTargetLabel.Size = UDim2.new(0.9, 0, 0, 25)
CurrentTargetLabel.Position = UDim2.new(0.05, 0, 0, 125)
CurrentTargetLabel.BackgroundTransparency = 1
CurrentTargetLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
CurrentTargetLabel.TextSize = 14
CurrentTargetLabel.Font = Enum.Font.SourceSans
CurrentTargetLabel.Text = "Current Target: None"
CurrentTargetLabel.TextXAlignment = Enum.TextXAlignment.Left
CurrentTargetLabel.Parent = LookAtSection

-- Section: ESP Settings (New)
local ESPSettingsSection = Instance.new("Frame")
ESPSettingsSection.Name = "ESPSettingsSection"
ESPSettingsSection.Size = UDim2.new(0.95, 0, 0, 250)
ESPSettingsSection.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
ESPSettingsSection.BorderSizePixel = 0
ESPSettingsSection.Parent = ScrollFrame

-- Add UICorner for ESP settings section
local ESPSettingsSectionCorner = Instance.new("UICorner")
ESPSettingsSectionCorner.CornerRadius = UDim.new(0, 8)
ESPSettingsSectionCorner.Parent = ESPSettingsSection

local ESPSettingsTitle = Instance.new("TextLabel")
ESPSettingsTitle.Name = "ESPSettingsTitle"
ESPSettingsTitle.Size = UDim2.new(1, 0, 0, 30)
ESPSettingsTitle.BackgroundTransparency = 1
ESPSettingsTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
ESPSettingsTitle.TextSize = 16
ESPSettingsTitle.Font = Enum.Font.SourceSansBold
ESPSettingsTitle.Text = "ESP Settings"
ESPSettingsTitle.Parent = ESPSettingsSection

-- Font Size Controls
local FontSizeLabel = Instance.new("TextLabel")
FontSizeLabel.Name = "FontSizeLabel"
FontSizeLabel.Size = UDim2.new(0.4, 0, 0, 25)
FontSizeLabel.Position = UDim2.new(0.05, 0, 0, 35)
FontSizeLabel.BackgroundTransparency = 1
FontSizeLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
FontSizeLabel.TextSize = 14
FontSizeLabel.Font = Enum.Font.SourceSans
FontSizeLabel.Text = "Font Size:"
FontSizeLabel.TextXAlignment = Enum.TextXAlignment.Left
FontSizeLabel.Parent = ESPSettingsSection

local FontSizeInput = Instance.new("TextBox")
FontSizeInput.Name = "FontSizeInput"
FontSizeInput.Size = UDim2.new(0.2, 0, 0, 25)
FontSizeInput.Position = UDim2.new(0.45, 0, 0, 35)
FontSizeInput.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
FontSizeInput.BorderSizePixel = 0
FontSizeInput.TextColor3 = Color3.fromRGB(255, 255, 255)
FontSizeInput.TextSize = 14
FontSizeInput.Font = Enum.Font.SourceSans
FontSizeInput.Text = "18"
FontSizeInput.Parent = ESPSettingsSection

-- Add UICorner for font size input
local FontSizeInputCorner = Instance.new("UICorner")
FontSizeInputCorner.CornerRadius = UDim.new(0, 6)
FontSizeInputCorner.Parent = FontSizeInput

local FontSizePlus = Instance.new("TextButton")
FontSizePlus.Name = "FontSizePlus"
FontSizePlus.Size = UDim2.new(0.1, 0, 0, 25)
FontSizePlus.Position = UDim2.new(0.7, 0, 0, 35)
FontSizePlus.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
FontSizePlus.BorderSizePixel = 0
FontSizePlus.TextColor3 = Color3.fromRGB(255, 255, 255)
FontSizePlus.TextSize = 14
FontSizePlus.Font = Enum.Font.SourceSansBold
FontSizePlus.Text = "+"
FontSizePlus.Parent = ESPSettingsSection

-- Add UICorner for font size plus
local FontSizePlusCorner = Instance.new("UICorner")
FontSizePlusCorner.CornerRadius = UDim.new(0, 6)
FontSizePlusCorner.Parent = FontSizePlus

local FontSizeMinus = Instance.new("TextButton")
FontSizeMinus.Name = "FontSizeMinus"
FontSizeMinus.Size = UDim2.new(0.1, 0, 0, 25)
FontSizeMinus.Position = UDim2.new(0.85, 0, 0, 35)
FontSizeMinus.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
FontSizeMinus.BorderSizePixel = 0
FontSizeMinus.TextColor3 = Color3.fromRGB(255, 255, 255)
FontSizeMinus.TextSize = 14
FontSizeMinus.Font = Enum.Font.SourceSansBold
FontSizeMinus.Text = "-"
FontSizeMinus.Parent = ESPSettingsSection

-- Add UICorner for font size minus
local FontSizeMinusCorner = Instance.new("UICorner")
FontSizeMinusCorner.CornerRadius = UDim.new(0, 6)
FontSizeMinusCorner.Parent = FontSizeMinus

-- Text Color Controls
local TextColorLabel = Instance.new("TextLabel")
TextColorLabel.Name = "TextColorLabel"
TextColorLabel.Size = UDim2.new(0.4, 0, 0, 25)
TextColorLabel.Position = UDim2.new(0.05, 0, 0, 70)
TextColorLabel.BackgroundTransparency = 1
TextColorLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TextColorLabel.TextSize = 14
TextColorLabel.Font = Enum.Font.SourceSans
TextColorLabel.Text = "Text Color (R,G,B or #HEX):"
TextColorLabel.TextXAlignment = Enum.TextXAlignment.Left
TextColorLabel.Parent = ESPSettingsSection

local TextColorInput = Instance.new("TextBox")
TextColorInput.Name = "TextColorInput"
TextColorInput.Size = UDim2.new(0.45, 0, 0, 25)
TextColorInput.Position = UDim2.new(0.45, 0, 0, 70)
TextColorInput.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
TextColorInput.BorderSizePixel = 0
TextColorInput.TextColor3 = Color3.fromRGB(255, 255, 255)
TextColorInput.TextSize = 14
TextColorInput.Font = Enum.Font.SourceSans
TextColorInput.Text = "255,255,255"
TextColorInput.Parent = ESPSettingsSection

-- Add UICorner for text color input
local TextColorInputCorner = Instance.new("UICorner")
TextColorInputCorner.CornerRadius = UDim.new(0, 6)
TextColorInputCorner.Parent = TextColorInput

-- Color Preview
local ColorPreview = Instance.new("Frame")
ColorPreview.Name = "ColorPreview"
ColorPreview.Size = UDim2.new(0.1, 0, 0, 25)
ColorPreview.Position = UDim2.new(0.85, 0, 0, 70)
ColorPreview.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ColorPreview.BorderSizePixel = 0
ColorPreview.Parent = ESPSettingsSection

-- Add UICorner for color preview
local ColorPreviewCorner = Instance.new("UICorner")
ColorPreviewCorner.CornerRadius = UDim.new(0, 6)
ColorPreviewCorner.Parent = ColorPreview

-- ESP Checkboxes
-- Show Through Walls Checkbox
local WallsCheck = Instance.new("Frame")
WallsCheck.Name = "WallsCheck"
WallsCheck.Size = UDim2.new(0.05, 0, 0, 20)
WallsCheck.Position = UDim2.new(0.05, 0, 0, 110)
WallsCheck.BackgroundColor3 = Color3.fromRGB(0, 255, 0) -- Green for enabled by default
WallsCheck.BorderSizePixel = 0
WallsCheck.Parent = ESPSettingsSection

-- Add UICorner for walls check
local WallsCheckCorner = Instance.new("UICorner")
WallsCheckCorner.CornerRadius = UDim.new(0, 4)
WallsCheckCorner.Parent = WallsCheck

local WallsLabel = Instance.new("TextLabel")
WallsLabel.Name = "WallsLabel"
WallsLabel.Size = UDim2.new(0.35, 0, 0, 20)
WallsLabel.Position = UDim2.new(0.15, 0, 0, 110)
WallsLabel.BackgroundTransparency = 1
WallsLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
WallsLabel.TextSize = 14
WallsLabel.Font = Enum.Font.SourceSans
WallsLabel.Text = "Show Through Walls"
WallsLabel.TextXAlignment = Enum.TextXAlignment.Left
WallsLabel.Parent = ESPSettingsSection

-- Show Name Checkbox
local NameCheck = Instance.new("Frame")
NameCheck.Name = "NameCheck"
NameCheck.Size = UDim2.new(0.05, 0, 0, 20)
NameCheck.Position = UDim2.new(0.05, 0, 0, 140)
NameCheck.BackgroundColor3 = Color3.fromRGB(0, 255, 0) -- Green for enabled by default
NameCheck.BorderSizePixel = 0
NameCheck.Parent = ESPSettingsSection

-- Add UICorner for name check
local NameCheckCorner = Instance.new("UICorner")
NameCheckCorner.CornerRadius = UDim.new(0, 4)
NameCheckCorner.Parent = NameCheck

local NameLabel = Instance.new("TextLabel")
NameLabel.Name = "NameLabel"
NameLabel.Size = UDim2.new(0.35, 0, 0, 20)
NameLabel.Position = UDim2.new(0.15, 0, 0, 140)
NameLabel.BackgroundTransparency = 1
NameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
NameLabel.TextSize = 14
NameLabel.Font = Enum.Font.SourceSans
NameLabel.Text = "Show Name"
NameLabel.TextXAlignment = Enum.TextXAlignment.Left
NameLabel.Parent = ESPSettingsSection

-- Show Distance Checkbox
local DistanceCheck = Instance.new("Frame")
DistanceCheck.Name = "DistanceCheck"
DistanceCheck.Size = UDim2.new(0.05, 0, 0, 20)
DistanceCheck.Position = UDim2.new(0.5, 0, 0, 110)
DistanceCheck.BackgroundColor3 = Color3.fromRGB(60, 60, 60) -- Gray for disabled by default
DistanceCheck.BorderSizePixel = 0
DistanceCheck.Parent = ESPSettingsSection

-- Add UICorner for distance check
local DistanceCheckCorner = Instance.new("UICorner")
DistanceCheckCorner.CornerRadius = UDim.new(0, 4)
DistanceCheckCorner.Parent = DistanceCheck

local DistanceLabel = Instance.new("TextLabel")
DistanceLabel.Name = "DistanceLabel"
DistanceLabel.Size = UDim2.new(0.35, 0, 0, 20)
DistanceLabel.Position = UDim2.new(0.6, 0, 0, 110)
DistanceLabel.BackgroundTransparency = 1
DistanceLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
DistanceLabel.TextSize = 14
DistanceLabel.Font = Enum.Font.SourceSans
DistanceLabel.Text = "Show Distance"
DistanceLabel.TextXAlignment = Enum.TextXAlignment.Left
DistanceLabel.Parent = ESPSettingsSection

-- Show Health Checkbox
local HealthCheck = Instance.new("Frame")
HealthCheck.Name = "HealthCheck"
HealthCheck.Size = UDim2.new(0.05, 0, 0, 20)
HealthCheck.Position = UDim2.new(0.5, 0, 0, 140)
HealthCheck.BackgroundColor3 = Color3.fromRGB(60, 60, 60) -- Gray for disabled by default
HealthCheck.BorderSizePixel = 0
HealthCheck.Parent = ESPSettingsSection

-- Add UICorner for health check
local HealthCheckCorner = Instance.new("UICorner")
HealthCheckCorner.CornerRadius = UDim.new(0, 4)
HealthCheckCorner.Parent = HealthCheck

local HealthLabel = Instance.new("TextLabel")
HealthLabel.Name = "HealthLabel"
HealthLabel.Size = UDim2.new(0.35, 0, 0, 20)
HealthLabel.Position = UDim2.new(0.6, 0, 0, 140)
HealthLabel.BackgroundTransparency = 1
HealthLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
HealthLabel.TextSize = 14
HealthLabel.Font = Enum.Font.SourceSans
HealthLabel.Text = "Show Health"
HealthLabel.TextXAlignment = Enum.TextXAlignment.Left
HealthLabel.Parent = ESPSettingsSection

-- Apply ESP Settings Button
local ApplyESPButton = Instance.new("TextButton")
ApplyESPButton.Name = "ApplyESPButton"
ApplyESPButton.Size = UDim2.new(0.9, 0, 0, 35)
ApplyESPButton.Position = UDim2.new(0.05, 0, 0, 180)
ApplyESPButton.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
ApplyESPButton.BorderSizePixel = 0
ApplyESPButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ApplyESPButton.TextSize = 14
ApplyESPButton.Font = Enum.Font.SourceSansBold
ApplyESPButton.Text = "Apply ESP Settings"
ApplyESPButton.Parent = ESPSettingsSection

-- Add UICorner for apply ESP button
local ApplyESPCorner = Instance.new("UICorner")
ApplyESPCorner.CornerRadius = UDim.new(0, 6)
ApplyESPCorner.Parent = ApplyESPButton

-- Section: Icon Settings
local IconSettingsSection = Instance.new("Frame")
IconSettingsSection.Name = "IconSettingsSection"
IconSettingsSection.Size = UDim2.new(0.95, 0, 0, 280)
IconSettingsSection.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
IconSettingsSection.BorderSizePixel = 0
IconSettingsSection.Parent = ScrollFrame

-- Add UICorner for icon settings section
local IconSettingsSectionCorner = Instance.new("UICorner")
IconSettingsSectionCorner.CornerRadius = UDim.new(0, 8)
IconSettingsSectionCorner.Parent = IconSettingsSection

local IconSettingsTitle = Instance.new("TextLabel")
IconSettingsTitle.Name = "IconSettingsTitle"
IconSettingsTitle.Size = UDim2.new(1, 0, 0, 30)
IconSettingsTitle.BackgroundTransparency = 1
IconSettingsTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
IconSettingsTitle.TextSize = 16
IconSettingsTitle.Font = Enum.Font.SourceSansBold
IconSettingsTitle.Text = "Icon Settings"
IconSettingsTitle.Parent = IconSettingsSection

-- Icon Size Controls
local IconSizeLabel = Instance.new("TextLabel")
IconSizeLabel.Name = "IconSizeLabel"
IconSizeLabel.Size = UDim2.new(0.4, 0, 0, 25)
IconSizeLabel.Position = UDim2.new(0.05, 0, 0, 35)
IconSizeLabel.BackgroundTransparency = 1
IconSizeLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
IconSizeLabel.TextSize = 14
IconSizeLabel.Font = Enum.Font.SourceSans
IconSizeLabel.Text = "Icon Size:"
IconSizeLabel.TextXAlignment = Enum.TextXAlignment.Left
IconSizeLabel.Parent = IconSettingsSection

local IconSizeInput = Instance.new("TextBox")
IconSizeInput.Name = "IconSizeInput"
IconSizeInput.Size = UDim2.new(0.2, 0, 0, 25)
IconSizeInput.Position = UDim2.new(0.45, 0, 0, 35)
IconSizeInput.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
IconSizeInput.BorderSizePixel = 0
IconSizeInput.TextColor3 = Color3.fromRGB(255, 255, 255)
IconSizeInput.TextSize = 14
IconSizeInput.Font = Enum.Font.SourceSans
IconSizeInput.Text = "50"
IconSizeInput.Parent = IconSettingsSection

-- Add UICorner for icon size input
local IconSizeInputCorner = Instance.new("UICorner")
IconSizeInputCorner.CornerRadius = UDim.new(0, 6)
IconSizeInputCorner.Parent = IconSizeInput

local IconSizePlus = Instance.new("TextButton")
IconSizePlus.Name = "IconSizePlus"
IconSizePlus.Size = UDim2.new(0.1, 0, 0, 25)
IconSizePlus.Position = UDim2.new(0.7, 0, 0, 35)
IconSizePlus.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
IconSizePlus.BorderSizePixel = 0
IconSizePlus.TextColor3 = Color3.fromRGB(255, 255, 255)
IconSizePlus.TextSize = 14
IconSizePlus.Font = Enum.Font.SourceSansBold
IconSizePlus.Text = "+"
IconSizePlus.Parent = IconSettingsSection

-- Add UICorner for icon size plus
local IconSizePlusCorner = Instance.new("UICorner")
IconSizePlusCorner.CornerRadius = UDim.new(0, 6)
IconSizePlusCorner.Parent = IconSizePlus

local IconSizeMinus = Instance.new("TextButton")
IconSizeMinus.Name = "IconSizeMinus"
IconSizeMinus.Size = UDim2.new(0.1, 0, 0, 25)
IconSizeMinus.Position = UDim2.new(0.85, 0, 0, 35)
IconSizeMinus.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
IconSizeMinus.BorderSizePixel = 0
IconSizeMinus.TextColor3 = Color3.fromRGB(255, 255, 255)
IconSizeMinus.TextSize = 14
IconSizeMinus.Font = Enum.Font.SourceSansBold
IconSizeMinus.Text = "-"
IconSizeMinus.Parent = IconSettingsSection

-- Add UICorner for icon size minus
local IconSizeMinusCorner = Instance.new("UICorner")
IconSizeMinusCorner.CornerRadius = UDim.new(0, 6)
IconSizeMinusCorner.Parent = IconSizeMinus

-- Icon URL Input
local IconURLLabel = Instance.new("TextLabel")
IconURLLabel.Name = "IconURLLabel"
IconURLLabel.Size = UDim2.new(0.9, 0, 0, 25)
IconURLLabel.Position = UDim2.new(0.05, 0, 0, 70)
IconURLLabel.BackgroundTransparency = 1
IconURLLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
IconURLLabel.TextSize = 14
IconURLLabel.Font = Enum.Font.SourceSans
IconURLLabel.Text = "Icon URL (rbxassetid or direct URL):"
IconURLLabel.TextXAlignment = Enum.TextXAlignment.Left
IconURLLabel.Parent = IconSettingsSection

local IconURLInput = Instance.new("TextBox")
IconURLInput.Name = "IconURLInput"
IconURLInput.Size = UDim2.new(0.9, 0, 0, 25)
IconURLInput.Position = UDim2.new(0.05, 0, 0, 100)
IconURLInput.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
IconURLInput.BorderSizePixel = 0
IconURLInput.TextColor3 = Color3.fromRGB(255, 255, 255)
IconURLInput.TextSize = 14
IconURLInput.Font = Enum.Font.SourceSans
IconURLInput.Text = "rbxassetid://6034684949"
IconURLInput.Parent = IconSettingsSection

-- Add UICorner for icon URL input
local IconURLInputCorner = Instance.new("UICorner")
IconURLInputCorner.CornerRadius = UDim.new(0, 6)
IconURLInputCorner.Parent = IconURLInput

-- Draggable Icon Checkbox
local DraggableCheck = Instance.new("Frame")
DraggableCheck.Name = "DraggableCheck"
DraggableCheck.Size = UDim2.new(0.05, 0, 0, 20)
DraggableCheck.Position = UDim2.new(0.05, 0, 0, 140)
DraggableCheck.BackgroundColor3 = Color3.fromRGB(60, 60, 60) -- Gray for disabled by default
DraggableCheck.BorderSizePixel = 0
DraggableCheck.Parent = IconSettingsSection

-- Add UICorner for draggable check
local DraggableCheckCorner = Instance.new("UICorner")
DraggableCheckCorner.CornerRadius = UDim.new(0, 4)
DraggableCheckCorner.Parent = DraggableCheck

local DraggableLabel = Instance.new("TextLabel")
DraggableLabel.Name = "DraggableLabel"
DraggableLabel.Size = UDim2.new(0.35, 0, 0, 20)
DraggableLabel.Position = UDim2.new(0.15, 0, 0, 140)
DraggableLabel.BackgroundTransparency = 1
DraggableLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
DraggableLabel.TextSize = 14
DraggableLabel.Font = Enum.Font.SourceSans
DraggableLabel.Text = "Draggable Icon"
DraggableLabel.TextXAlignment = Enum.TextXAlignment.Left
DraggableLabel.Parent = IconSettingsSection

-- VIP Password Input
local VIPPasswordLabel = Instance.new("TextLabel")
VIPPasswordLabel.Name = "VIPPasswordLabel"
VIPPasswordLabel.Size = UDim2.new(0.9, 0, 0, 25)
VIPPasswordLabel.Position = UDim2.new(0.05, 0, 0, 170)
VIPPasswordLabel.BackgroundTransparency = 1
VIPPasswordLabel.TextColor3 = Color3.fromRGB(255, 215, 0) -- Gold color
VIPPasswordLabel.TextSize = 14
VIPPasswordLabel.Font = Enum.Font.SourceSansBold
VIPPasswordLabel.Text = "VIP Password (for special icons):"
VIPPasswordLabel.TextXAlignment = Enum.TextXAlignment.Left
VIPPasswordLabel.Parent = IconSettingsSection

local VIPPasswordInput = Instance.new("TextBox")
VIPPasswordInput.Name = "VIPPasswordInput"
VIPPasswordInput.Size = UDim2.new(0.9, 0, 0, 25)
VIPPasswordInput.Position = UDim2.new(0.05, 0, 0, 200)
VIPPasswordInput.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
VIPPasswordInput.BorderSizePixel = 0
VIPPasswordInput.TextColor3 = Color3.fromRGB(255, 255, 255)
VIPPasswordInput.TextSize = 14
VIPPasswordInput.Font = Enum.Font.SourceSans
VIPPasswordInput.Text = ""
VIPPasswordInput.PlaceholderText = "Enter VIP password..."
VIPPasswordInput.Parent = IconSettingsSection

-- Add UICorner for VIP password input
local VIPPasswordInputCorner = Instance.new("UICorner")
VIPPasswordInputCorner.CornerRadius = UDim.new(0, 6)
VIPPasswordInputCorner.Parent = VIPPasswordInput

-- Apply Icon Settings Button
local ApplyIconButton = Instance.new("TextButton")
ApplyIconButton.Name = "ApplyIconButton"
ApplyIconButton.Size = UDim2.new(0.9, 0, 0, 35)
ApplyIconButton.Position = UDim2.new(0.05, 0, 0, 235)
ApplyIconButton.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
ApplyIconButton.BorderSizePixel = 0
ApplyIconButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ApplyIconButton.TextSize = 14
ApplyIconButton.Font = Enum.Font.SourceSansBold
ApplyIconButton.Text = "Apply Icon Settings"
ApplyIconButton.Parent = IconSettingsSection

-- Add UICorner for apply icon button
local ApplyIconCorner = Instance.new("UICorner")
ApplyIconCorner.CornerRadius = UDim.new(0, 6)
ApplyIconCorner.Parent = ApplyIconButton

-- Section: Anti-Detection (New)
local AntiDetectionSection = Instance.new("Frame")
AntiDetectionSection.Name = "AntiDetectionSection"
AntiDetectionSection.Size = UDim2.new(0.95, 0, 0, 180)
AntiDetectionSection.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
AntiDetectionSection.BorderSizePixel = 0
AntiDetectionSection.Parent = ScrollFrame

-- Add UICorner for anti-detection section
local AntiDetectionSectionCorner = Instance.new("UICorner")
AntiDetectionSectionCorner.CornerRadius = UDim.new(0, 8)
AntiDetectionSectionCorner.Parent = AntiDetectionSection

local AntiDetectionTitle = Instance.new("TextLabel")
AntiDetectionTitle.Name = "AntiDetectionTitle"
AntiDetectionTitle.Size = UDim2.new(1, 0, 0, 30)
AntiDetectionTitle.BackgroundTransparency = 1
AntiDetectionTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
AntiDetectionTitle.TextSize = 16
AntiDetectionTitle.Font = Enum.Font.SourceSansBold
AntiDetectionTitle.Text = "Anti-Detection"
AntiDetectionTitle.Parent = AntiDetectionSection

-- Anti-Kick Checkbox
local AntiKickCheck = Instance.new("Frame")
AntiKickCheck.Name = "AntiKickCheck"
AntiKickCheck.Size = UDim2.new(0.05, 0, 0, 20)
AntiKickCheck.Position = UDim2.new(0.05, 0, 0, 40)
AntiKickCheck.BackgroundColor3 = Color3.fromRGB(60, 60, 60) -- Gray for disabled by default
AntiKickCheck.BorderSizePixel = 0
AntiKickCheck.Parent = AntiDetectionSection

-- Add UICorner for anti-kick check
local AntiKickCheckCorner = Instance.new("UICorner")
AntiKickCheckCorner.CornerRadius = UDim.new(0, 4)
AntiKickCheckCorner.Parent = AntiKickCheck

local AntiKickLabel = Instance.new("TextLabel")
AntiKickLabel.Name = "AntiKickLabel"
AntiKickLabel.Size = UDim2.new(0.35, 0, 0, 20)
AntiKickLabel.Position = UDim2.new(0.15, 0, 0, 40)
AntiKickLabel.BackgroundTransparency = 1
AntiKickLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
AntiKickLabel.TextSize = 14
AntiKickLabel.Font = Enum.Font.SourceSans
AntiKickLabel.Text = "Anti-Kick"
AntiKickLabel.TextXAlignment = Enum.TextXAlignment.Left
AntiKickLabel.Parent = AntiDetectionSection

-- Anti-Teleport Checkbox
local AntiTeleportCheck = Instance.new("Frame")
AntiTeleportCheck.Name = "AntiTeleportCheck"
AntiTeleportCheck.Size = UDim2.new(0.05, 0, 0, 20)
AntiTeleportCheck.Position = UDim2.new(0.05, 0, 0, 70)
AntiTeleportCheck.BackgroundColor3 = Color3.fromRGB(60, 60, 60) -- Gray for disabled by default
AntiTeleportCheck.BorderSizePixel = 0
AntiTeleportCheck.Parent = AntiDetectionSection

-- Add UICorner for anti-teleport check
local AntiTeleportCheckCorner = Instance.new("UICorner")
AntiTeleportCheckCorner.CornerRadius = UDim.new(0, 4)
AntiTeleportCheckCorner.Parent = AntiTeleportCheck

local AntiTeleportLabel = Instance.new("TextLabel")
AntiTeleportLabel.Name = "AntiTeleportLabel"
AntiTeleportLabel.Size = UDim2.new(0.35, 0, 0, 20)
AntiTeleportLabel.Position = UDim2.new(0.15, 0, 0, 70)
AntiTeleportLabel.BackgroundTransparency = 1
AntiTeleportLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
AntiTeleportLabel.TextSize = 14
AntiTeleportLabel.Font = Enum.Font.SourceSans
AntiTeleportLabel.Text = "Anti-Teleport"
AntiTeleportLabel.TextXAlignment = Enum.TextXAlignment.Left
AntiTeleportLabel.Parent = AntiDetectionSection

-- Anti-Speed Checkbox
local AntiSpeedCheck = Instance.new("Frame")
AntiSpeedCheck.Name = "AntiSpeedCheck"
AntiSpeedCheck.Size = UDim2.new(0.05, 0, 0, 20)
AntiSpeedCheck.Position = UDim2.new(0.05, 0, 0, 100)
AntiSpeedCheck.BackgroundColor3 = Color3.fromRGB(60, 60, 60) -- Gray for disabled by default
AntiSpeedCheck.BorderSizePixel = 0
AntiSpeedCheck.Parent = AntiDetectionSection

-- Add UICorner for anti-speed check
local AntiSpeedCheckCorner = Instance.new("UICorner")
AntiSpeedCheckCorner.CornerRadius = UDim.new(0, 4)
AntiSpeedCheckCorner.Parent = AntiSpeedCheck

local AntiSpeedLabel = Instance.new("TextLabel")
AntiSpeedLabel.Name = "AntiSpeedLabel"
AntiSpeedLabel.Size = UDim2.new(0.35, 0, 0, 20)
AntiSpeedLabel.Position = UDim2.new(0.15, 0, 0, 100)
AntiSpeedLabel.BackgroundTransparency = 1
AntiSpeedLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
AntiSpeedLabel.TextSize = 14
AntiSpeedLabel.Font = Enum.Font.SourceSans
AntiSpeedLabel.Text = "Anti-Speed Detection"
AntiSpeedLabel.TextXAlignment = Enum.TextXAlignment.Left
AntiSpeedLabel.Parent = AntiDetectionSection

-- Apply Anti-Detection Button
local ApplyAntiDetectionButton = Instance.new("TextButton")
ApplyAntiDetectionButton.Name = "ApplyAntiDetectionButton"
ApplyAntiDetectionButton.Size = UDim2.new(0.9, 0, 0, 35)
ApplyAntiDetectionButton.Position = UDim2.new(0.05, 0, 0, 130)
ApplyAntiDetectionButton.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
ApplyAntiDetectionButton.BorderSizePixel = 0
ApplyAntiDetectionButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ApplyAntiDetectionButton.TextSize = 14
ApplyAntiDetectionButton.Font = Enum.Font.SourceSansBold
ApplyAntiDetectionButton.Text = "Apply Anti-Detection Settings"
ApplyAntiDetectionButton.Parent = AntiDetectionSection

-- Add UICorner for apply anti-detection button
local ApplyAntiDetectionCorner = Instance.new("UICorner")
ApplyAntiDetectionCorner.CornerRadius = UDim.new(0, 6)
ApplyAntiDetectionCorner.Parent = ApplyAntiDetectionButton

-- Delete Button
local DeleteButton = Instance.new("TextButton")
DeleteButton.Name = "DeleteButton"
DeleteButton.Size = UDim2.new(0.95, 0, 0, 40)
DeleteButton.Position = UDim2.new(0.025, 0, 0, 1050) -- Position at the bottom of the scroll frame
DeleteButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
DeleteButton.BorderSizePixel = 0
DeleteButton.TextColor3 = Color3.fromRGB(255, 255, 255)
DeleteButton.TextSize = 16
DeleteButton.Font = Enum.Font.SourceSansBold
DeleteButton.Text = "Delete GUI"
DeleteButton.Parent = ScrollFrame

-- Add UICorner for delete button
local DeleteCorner = Instance.new("UICorner")
DeleteCorner.CornerRadius = UDim.new(0, 8)
DeleteCorner.Parent = DeleteButton

-- Minimized Icon (shown when GUI is minimized)
local MinimizedIcon = Instance.new("ImageButton")
MinimizedIcon.Name = "MinimizedIcon"
MinimizedIcon.Size = UDim2.new(0, 50, 0, 50)
MinimizedIcon.Position = UDim2.new(0, 10, 0, 10)
MinimizedIcon.BackgroundTransparency = 0.5
MinimizedIcon.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MinimizedIcon.Image = "rbxassetid://6034684949"
MinimizedIcon.Visible = false
MinimizedIcon.Parent = ScreenGui

-- Add UICorner for minimized icon
local MinimizedIconCorner = Instance.new("UICorner")
MinimizedIconCorner.CornerRadius = UDim.new(0, 8)
MinimizedIconCorner.Parent = MinimizedIcon

-- Add UIStroke for minimized icon
local MinimizedIconStroke = Instance.new("UIStroke")
MinimizedIconStroke.Thickness = 2
MinimizedIconStroke.Color = Color3.fromRGB(255, 0, 0)
MinimizedIconStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
MinimizedIconStroke.Parent = MinimizedIcon

-- SubMenu Frame (Hidden by default)
local SubMenuFrame = Instance.new("Frame")
SubMenuFrame.Name = "SubMenuFrame"
SubMenuFrame.Size = UDim2.new(0, 250, 0, 300)
SubMenuFrame.Position = UDim2.new(0.5, 175, 0.5, -150)
SubMenuFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
SubMenuFrame.BorderSizePixel = 0
SubMenuFrame.Visible = false
SubMenuFrame.Active = true
SubMenuFrame.Draggable = true -- Enable built-in dragging
SubMenuFrame.Parent = ScreenGui

-- Add UICorner for submenu frame
local SubMenuCorner = Instance.new("UICorner")
SubMenuCorner.CornerRadius = UDim.new(0, 8)
SubMenuCorner.Parent = SubMenuFrame

-- Add UIStroke for submenu frame
local SubMenuStroke = Instance.new("UIStroke")
SubMenuStroke.Thickness = 2
SubMenuStroke.Color = Color3.fromRGB(255, 0, 0)
SubMenuStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
SubMenuStroke.Parent = SubMenuFrame

-- SubMenu Title Bar
local SubMenuTitleBar = Instance.new("Frame")
SubMenuTitleBar.Name = "SubMenuTitleBar"
SubMenuTitleBar.Size = UDim2.new(1, 0, 0, 30)
SubMenuTitleBar.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
SubMenuTitleBar.BorderSizePixel = 0
SubMenuTitleBar.Parent = SubMenuFrame

-- Add UICorner for submenu title bar
local SubMenuTitleCorner = Instance.new("UICorner")
SubMenuTitleCorner.CornerRadius = UDim.new(0, 8)
SubMenuTitleCorner.Parent = SubMenuTitleBar

-- SubMenu Title
local SubMenuTitle = Instance.new("TextLabel")
SubMenuTitle.Name = "SubMenuTitle"
SubMenuTitle.Size = UDim2.new(1, -40, 1, 0)
SubMenuTitle.Position = UDim2.new(0, 10, 0, 0)
SubMenuTitle.BackgroundTransparency = 1
SubMenuTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
SubMenuTitle.TextSize = 16
SubMenuTitle.Font = Enum.Font.SourceSansBold
SubMenuTitle.Text = "Safety Settings"
SubMenuTitle.TextXAlignment = Enum.TextXAlignment.Left
SubMenuTitle.Parent = SubMenuTitleBar

-- SubMenu Close Button
local SubMenuCloseButton = Instance.new("TextButton")
SubMenuCloseButton.Name = "SubMenuCloseButton"
SubMenuCloseButton.Size = UDim2.new(0, 30, 0, 30)
SubMenuCloseButton.Position = UDim2.new(1, -30, 0, 0)
SubMenuCloseButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
SubMenuCloseButton.BorderSizePixel = 0
SubMenuCloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SubMenuCloseButton.TextSize = 16
SubMenuCloseButton.Font = Enum.Font.SourceSansBold
SubMenuCloseButton.Text = "X"
SubMenuCloseButton.Parent = SubMenuTitleBar

-- Add UICorner for submenu close button
local SubMenuCloseCorner = Instance.new("UICorner")
SubMenuCloseCorner.CornerRadius = UDim.new(0, 8)
SubMenuCloseCorner.Parent = SubMenuCloseButton

-- SubMenu Content
local SubMenuContent = Instance.new("Frame")
SubMenuContent.Name = "SubMenuContent"
SubMenuContent.Size = UDim2.new(1, 0, 1, -30)
SubMenuContent.Position = UDim2.new(0, 0, 0, 30)
SubMenuContent.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
SubMenuContent.BorderSizePixel = 0
SubMenuContent.Parent = SubMenuFrame

-- Auto Check Position Toggle
local AutoCheckLabel = Instance.new("TextLabel")
AutoCheckLabel.Name = "AutoCheckLabel"
AutoCheckLabel.Size = UDim2.new(0.7, 0, 0, 30)
AutoCheckLabel.Position = UDim2.new(0.05, 0, 0, 10)
AutoCheckLabel.BackgroundTransparency = 1
AutoCheckLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
AutoCheckLabel.TextSize = 14
AutoCheckLabel.Font = Enum.Font.SourceSansBold
AutoCheckLabel.Text = "Auto Check Position:"
AutoCheckLabel.TextXAlignment = Enum.TextXAlignment.Left
AutoCheckLabel.Parent = SubMenuContent

local AutoCheckButton = Instance.new("TextButton")
AutoCheckButton.Name = "AutoCheckButton"
AutoCheckButton.Size = UDim2.new(0.2, 0, 0, 30)
AutoCheckButton.Position = UDim2.new(0.75, 0, 0, 10)
AutoCheckButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
AutoCheckButton.BorderSizePixel = 0
AutoCheckButton.TextColor3 = Color3.fromRGB(255, 255, 255)
AutoCheckButton.TextSize = 14
AutoCheckButton.Font = Enum.Font.SourceSansBold
AutoCheckButton.Text = "OFF"
AutoCheckButton.Parent = SubMenuContent

-- Add UICorner for auto check button
local AutoCheckCorner = Instance.new("UICorner")
AutoCheckCorner.CornerRadius = UDim.new(0, 6)
AutoCheckCorner.Parent = AutoCheckButton

-- Safe Position Vertical Min
local VerticalMinLabel = Instance.new("TextLabel")
VerticalMinLabel.Name = "VerticalMinLabel"
VerticalMinLabel.Size = UDim2.new(0.5, 0, 0, 30)
VerticalMinLabel.Position = UDim2.new(0.05, 0, 0, 50)
VerticalMinLabel.BackgroundTransparency = 1
VerticalMinLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
VerticalMinLabel.TextSize = 14
VerticalMinLabel.Font = Enum.Font.SourceSans
VerticalMinLabel.Text = "Vertical Min (Y):"
VerticalMinLabel.TextXAlignment = Enum.TextXAlignment.Left
VerticalMinLabel.Parent = SubMenuContent

local VerticalMinInput = Instance.new("TextBox")
VerticalMinInput.Name = "VerticalMinInput"
VerticalMinInput.Size = UDim2.new(0.3, 0, 0, 30)
VerticalMinInput.Position = UDim2.new(0.65, 0, 0, 50)
VerticalMinInput.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
VerticalMinInput.BorderSizePixel = 0
VerticalMinInput.TextColor3 = Color3.fromRGB(255, 255, 255)
VerticalMinInput.TextSize = 14
VerticalMinInput.Font = Enum.Font.SourceSans
VerticalMinInput.Text = "-1000"
VerticalMinInput.Parent = SubMenuContent

-- Add UICorner for vertical min input
local VerticalMinCorner = Instance.new("UICorner")
VerticalMinCorner.CornerRadius = UDim.new(0, 6)
VerticalMinCorner.Parent = VerticalMinInput

-- Safe Position Vertical Max
local VerticalMaxLabel = Instance.new("TextLabel")
VerticalMaxLabel.Name = "VerticalMaxLabel"
VerticalMaxLabel.Size = UDim2.new(0.5, 0, 0, 30)
VerticalMaxLabel.Position = UDim2.new(0.05, 0, 0, 90)
VerticalMaxLabel.BackgroundTransparency = 1
VerticalMaxLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
VerticalMaxLabel.TextSize = 14
VerticalMaxLabel.Font = Enum.Font.SourceSans
VerticalMaxLabel.Text = "Vertical Max (Y):"
VerticalMaxLabel.TextXAlignment = Enum.TextXAlignment.Left
VerticalMaxLabel.Parent = SubMenuContent

local VerticalMaxInput = Instance.new("TextBox")
VerticalMaxInput.Name = "VerticalMaxInput"
VerticalMaxInput.Size = UDim2.new(0.3, 0, 0, 30)
VerticalMaxInput.Position = UDim2.new(0.65, 0, 0, 90)
VerticalMaxInput.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
VerticalMaxInput.BorderSizePixel = 0
VerticalMaxInput.TextColor3 = Color3.fromRGB(255, 255, 255)
VerticalMaxInput.TextSize = 14
VerticalMaxInput.Font = Enum.Font.SourceSans
VerticalMaxInput.Text = "1000"
VerticalMaxInput.Parent = SubMenuContent

-- Add UICorner for vertical max input
local VerticalMaxCorner = Instance.new("UICorner")
VerticalMaxCorner.CornerRadius = UDim.new(0, 6)
VerticalMaxCorner.Parent = VerticalMaxInput

-- Safe Position Horizontal Min
local HorizontalMinLabel = Instance.new("TextLabel")
HorizontalMinLabel.Name = "HorizontalMinLabel"
HorizontalMinLabel.Size = UDim2.new(0.5, 0, 0, 30)
HorizontalMinLabel.Position = UDim2.new(0.05, 0, 0, 130)
HorizontalMinLabel.BackgroundTransparency = 1
HorizontalMinLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
HorizontalMinLabel.TextSize = 14
HorizontalMinLabel.Font = Enum.Font.SourceSans
HorizontalMinLabel.Text = "Horizontal Min (X/Z):"
HorizontalMinLabel.TextXAlignment = Enum.TextXAlignment.Left
HorizontalMinLabel.Parent = SubMenuContent

local HorizontalMinInput = Instance.new("TextBox")
HorizontalMinInput.Name = "HorizontalMinInput"
HorizontalMinInput.Size = UDim2.new(0.3, 0, 0, 30)
HorizontalMinInput.Position = UDim2.new(0.65, 0, 0, 130)
HorizontalMinInput.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
HorizontalMinInput.BorderSizePixel = 0
HorizontalMinInput.TextColor3 = Color3.fromRGB(255, 255, 255)
HorizontalMinInput.TextSize = 14
HorizontalMinInput.Font = Enum.Font.SourceSans
HorizontalMinInput.Text = "-1000"
HorizontalMinInput.Parent = SubMenuContent

-- Add UICorner for horizontal min input
local HorizontalMinCorner = Instance.new("UICorner")
HorizontalMinCorner.CornerRadius = UDim.new(0, 6)
HorizontalMinCorner.Parent = HorizontalMinInput

-- Safe Position Horizontal Max
local HorizontalMaxLabel = Instance.new("TextLabel")
HorizontalMaxLabel.Name = "HorizontalMaxLabel"
HorizontalMaxLabel.Size = UDim2.new(0.5, 0, 0, 30)
HorizontalMaxLabel.Position = UDim2.new(0.05, 0, 0, 170)
HorizontalMaxLabel.BackgroundTransparency = 1
HorizontalMaxLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
HorizontalMaxLabel.TextSize = 14
HorizontalMaxLabel.Font = Enum.Font.SourceSans
HorizontalMaxLabel.Text = "Horizontal Max (X/Z):"
HorizontalMaxLabel.TextXAlignment = Enum.TextXAlignment.Left
HorizontalMaxLabel.Parent = SubMenuContent

local HorizontalMaxInput = Instance.new("TextBox")
HorizontalMaxInput.Name = "HorizontalMaxInput"
HorizontalMaxInput.Size = UDim2.new(0.3, 0, 0, 30)
HorizontalMaxInput.Position = UDim2.new(0.65, 0, 0, 170)
HorizontalMaxInput.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
HorizontalMaxInput.BorderSizePixel = 0
HorizontalMaxInput.TextColor3 = Color3.fromRGB(255, 255, 255)
HorizontalMaxInput.TextSize = 14
HorizontalMaxInput.Font = Enum.Font.SourceSans
HorizontalMaxInput.Text = "1000"
HorizontalMaxInput.Parent = SubMenuContent

-- Add UICorner for horizontal max input
local HorizontalMaxCorner = Instance.new("UICorner")
HorizontalMaxCorner.CornerRadius = UDim.new(0, 6)
HorizontalMaxCorner.Parent = HorizontalMaxInput

-- Apply Settings Button
local ApplySettingsButton = Instance.new("TextButton")
ApplySettingsButton.Name = "ApplySettingsButton"
ApplySettingsButton.Size = UDim2.new(0.9, 0, 0, 40)
ApplySettingsButton.Position = UDim2.new(0.05, 0, 0, 220)
ApplySettingsButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
ApplySettingsButton.BorderSizePixel = 0
ApplySettingsButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ApplySettingsButton.TextSize = 16
ApplySettingsButton.Font = Enum.Font.SourceSansBold
ApplySettingsButton.Text = "Apply Settings"
ApplySettingsButton.Parent = SubMenuContent

-- Add UICorner for apply settings button
local ApplySettingsCorner = Instance.new("UICorner")
ApplySettingsCorner.CornerRadius = UDim.new(0, 6)
ApplySettingsCorner.Parent = ApplySettingsButton

-- Expired Frame (Hidden until expired)
local ExpiredFrame = Instance.new("Frame")
ExpiredFrame.Name = "ExpiredFrame"
ExpiredFrame.Size = UDim2.new(1, 0, 1, 0)
ExpiredFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
ExpiredFrame.BorderSizePixel = 0
ExpiredFrame.Visible = false
ExpiredFrame.Parent = ContentFrame

local ExpiredLabel = Instance.new("TextLabel")
ExpiredLabel.Name = "ExpiredLabel"
ExpiredLabel.Size = UDim2.new(1, 0, 0, 40)
ExpiredLabel.Position = UDim2.new(0, 0, 0.3, 0)
ExpiredLabel.BackgroundTransparency = 1
ExpiredLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
ExpiredLabel.TextSize = 20
ExpiredLabel.Font = Enum.Font.SourceSansBold
ExpiredLabel.Text = "Script Roblox này đã hết thời gian sử dụng"
ExpiredLabel.Parent = ExpiredFrame

local ExpiredDeleteButton = Instance.new("TextButton")
ExpiredDeleteButton.Name = "ExpiredDeleteButton"
ExpiredDeleteButton.Size = UDim2.new(0.6, 0, 0, 40)
ExpiredDeleteButton.Position = UDim2.new(0.2, 0, 0.5, 0)
ExpiredDeleteButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
ExpiredDeleteButton.BorderSizePixel = 0
ExpiredDeleteButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ExpiredDeleteButton.TextSize = 16
ExpiredDeleteButton.Font = Enum.Font.SourceSansBold
ExpiredDeleteButton.Text = "Xóa Script"
ExpiredDeleteButton.Parent = ExpiredFrame

-- Add UICorner for expired delete button
local ExpiredDeleteCorner = Instance.new("UICorner")
ExpiredDeleteCorner.CornerRadius = UDim.new(0, 8)
ExpiredDeleteCorner.Parent = ExpiredDeleteButton

-- Functions
-- Function to toggle checkbox
local function ToggleCheckbox(checkbox)
    if checkbox.BackgroundColor3 == Color3.fromRGB(60, 60, 60) then
        checkbox.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
    else
        checkbox.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    end
end

-- Function to check if a position is safe
local function IsSafePosition(position)
    return position.X >= SafePositionMin.X and position.X <= SafePositionMax.X and
           position.Y >= SafePositionMin.Y and position.Y <= SafePositionMax.Y and
           position.Z >= SafePositionMin.Z and position.Z <= SafePositionMax.Z
end

-- Function to check expiration
local function CheckExpiration()
    local currentTime = os.time()
    local expirationTime = os.time({
        year = EXPIRATION_DATE.Year,
        month = EXPIRATION_DATE.Month,
        day = EXPIRATION_DATE.Day,
        hour = EXPIRATION_DATE.Hour,
        min = EXPIRATION_DATE.Minute,
        sec = EXPIRATION_DATE.Second
    })

    local timeLeft = expirationTime - currentTime

    if timeLeft <= 0 then
        -- Script has expired
        AuthFrame.Visible = false
        FeaturesFrame.Visible = false
        ExpiredFrame.Visible = true
        return true
    else
        -- Calculate time left
        local days = math.floor(timeLeft / 86400)
        local hours = math.floor((timeLeft % 86400) / 3600)
        local minutes = math.floor((timeLeft % 3600) / 60)
        local seconds = timeLeft % 60
        
        ExpirationLabel.Text = string.format("Expires in: %d days, %02d:%02d:%02d", days, hours, minutes, seconds)
        return false
    end
end

-- Rainbow border effect
local function StartRainbowEffect()
    local colors = {
        Color3.fromRGB(255, 0, 0),    -- Red
        Color3.fromRGB(255, 165, 0),  -- Orange
        Color3.fromRGB(255, 255, 0),  -- Yellow
        Color3.fromRGB(0, 255, 0),    -- Green
        Color3.fromRGB(0, 0, 255),    -- Blue
        Color3.fromRGB(75, 0, 130),   -- Indigo
        Color3.fromRGB(238, 130, 238) -- Violet
    }

    local index = 1

    spawn(function()
        while ScreenGui.Parent do
            local targetColor = colors[index]
            local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Linear)
            
            local mainTween = TweenService:Create(MainStroke, tweenInfo, {Color = targetColor})
            local iconTween = TweenService:Create(MinimizedIconStroke, tweenInfo, {Color = targetColor})
            local subMenuTween = TweenService:Create(SubMenuStroke, tweenInfo, {Color = targetColor})
            
            mainTween:Play()
            iconTween:Play()
            subMenuTween:Play()
            
            index = (index % #colors) + 1
            wait(0.5)
        end
    end)
end

-- Function to populate player list
local function PopulatePlayerList()
    -- Clear existing buttons
    for _, child in pairs(PlayerScrollFrame:GetChildren()) do
        if child:IsA("TextButton") then
            child:Destroy()
        end
    end

    -- Clear player list
    PlayerList = {}

    -- Add all players except local player
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            table.insert(PlayerList, player)
            
            local playerButton = Instance.new("TextButton")
            playerButton.Name = player.Name .. "Button"
            playerButton.Size = UDim2.new(0.9, 0, 0, 30)
            playerButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
            playerButton.BorderSizePixel = 0
            playerButton.TextColor3 = Color3.fromRGB(255, 255, 255)
            playerButton.TextSize = 14
            playerButton.Font = Enum.Font.SourceSans
            playerButton.Text = player.Name
            playerButton.ZIndex = 12
            playerButton.Parent = PlayerScrollFrame
            
            -- Add UICorner for player button
            local playerButtonCorner = Instance.new("UICorner")
            playerButtonCorner.CornerRadius = UDim.new(0, 4)
            playerButtonCorner.Parent = playerButton
            
            playerButton.MouseButton1Click:Connect(function()
                TargetPlayer = player
                TargetDropdown.Text = player.Name
                DropdownFrame.Visible = false
                
                -- Also set as look target
                LookTarget = player
                CurrentTargetLabel.Text = "Current Target: " .. player.Name
            end)
        end
    end

    -- Update canvas size based on number of players
    local contentHeight = #PlayerList * 35
    PlayerScrollFrame.CanvasSize = UDim2.new(0, 0, 0, contentHeight)
end  -- This is the correct end for the function

-- Function to find nearest player
local function FindNearestPlayer()
    local nearestPlayer = nil
    local nearestDistance = math.huge

    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") and Character and HumanoidRootPart then
            local distance = (player.Character.HumanoidRootPart.Position - HumanoidRootPart.Position).Magnitude
            if distance < nearestDistance and distance <= DetectionRadius then
                nearestPlayer = player
                nearestDistance = distance
            end
        end
    end

    return nearestPlayer, nearestDistance
end

-- Toggle noclip function
local function ToggleNoclip()
    NoClipping = not NoClipping

    if NoClipping then
        NoclipButton.Text = "Noclip: ON"
        NoclipButton.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
        
        -- Enable noclip
        local noclipConnection = RunService.Stepped:Connect(function()
            if Character and NoClipping then
                for _, part in pairs(Character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = false
                    end
                end
            end
        end)
        
        -- Store the connection
        NoclipButton.NoclipConnection = noclipConnection
    else
        NoclipButton.Text = "Noclip: OFF"
        NoclipButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
        
        -- Disable noclip
        if NoclipButton.NoclipConnection then
            NoclipButton.NoclipConnection:Disconnect()
            NoclipButton.NoclipConnection = nil
        end
        
        -- Reset collision
        for _, part in pairs(Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = true
            end
        end
    end
end

-- Platform function
local function TogglePlatform()
    AutoPlatform = not AutoPlatform

    if AutoPlatform then
        PlatformButton.Text = "Platform: ON"
        PlatformButton.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
        AutoPlatformCheck.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
        
        -- Create platform
        local platform = Instance.new("Part")
        platform.Name = "ExecutorPlatform"
        platform.Size = Vector3.new(5, 1, 5)
        platform.Anchored = true
        platform.CanCollide = true
        platform.Transparency = 0.5
        platform.Material = Enum.Material.Neon
        platform.Color = Color3.fromRGB(0, 120, 255)
        platform.Parent = workspace
        
        -- Platform update loop
        local platformConnection = RunService.Heartbeat:Connect(function()
            if AutoPlatform and Character and Character:FindFirstChild("HumanoidRootPart") then
                platform.CFrame = CFrame.new(HumanoidRootPart.Position.X, HumanoidRootPart.Position.Y - 3.5, HumanoidRootPart.Position.Z)
            end
        end)
        
        -- Store references
        PlatformButton.Platform = platform
        PlatformButton.PlatformConnection = platformConnection
    else
        PlatformButton.Text = "Platform: OFF"
        PlatformButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
        AutoPlatformCheck.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        
        -- Remove platform
        if PlatformButton.Platform and PlatformButton.Platform:IsDescendantOf(workspace) then
            PlatformButton.Platform:Destroy()
            PlatformButton.Platform = nil
        end
        
        -- Disconnect update loop
        if PlatformButton.PlatformConnection then
            PlatformButton.PlatformConnection:Disconnect()
            PlatformButton.PlatformConnection = nil
        end
    end
end

-- Follow target function
local function ToggleFollowTarget()
    FollowingTarget = not FollowingTarget

    if FollowingTarget then
        if not TargetPlayer or not TargetPlayer.Character then
            FollowingTarget = false
            return
        end
        
        FollowButton.Text = "Follow: ON"
        FollowButton.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
        
        -- Get distance values
        DistanceBehind = tonumber(HorizontalInput.Text) or 5
        DistanceAbove = tonumber(VerticalInput.Text) or 0
        
        -- Follow loop
        local followConnection = RunService.Heartbeat:Connect(function()
            if FollowingTarget and TargetPlayer and TargetPlayer.Character and TargetPlayer.Character:FindFirstChild("HumanoidRootPart") and Character and Character:FindFirstChild("HumanoidRootPart") and Character:FindFirstChild("Humanoid") then
                local targetHRP = TargetPlayer.Character.HumanoidRootPart
                local targetHumanoid = TargetPlayer.Character:FindFirstChild("Humanoid")
                
                -- Check if target is dead and auto next is enabled
                if AutoNextTarget and targetHumanoid and targetHumanoid.Health <= 0 then
                    -- Find next target
                    local foundNext = false
                    for _, player in pairs(PlayerList) do
                        if player ~= TargetPlayer and player.Character and player.Character:FindFirstChild("Humanoid") and player.Character.Humanoid.Health > 0 then
                            TargetPlayer = player
                            TargetDropdown.Text = player.Name
                            LookTarget = player
                            CurrentTargetLabel.Text = "Current Target: " .. player.Name
                            foundNext = true
                            break
                        end
                    end
                    
                    if not foundNext then
                        FollowingTarget = false
                        FollowButton.Text = "Follow: OFF"
                        FollowButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
                        followConnection:Disconnect()
                    end
                else
                    -- Calculate position behind target
                    local targetLookVector = targetHRP.CFrame.LookVector
                    local behindPosition = targetHRP.Position - (targetLookVector * DistanceBehind)
                    behindPosition = behindPosition + Vector3.new(0, DistanceAbove, 0)
                    
                    -- Move to position behind target
                    Character.Humanoid:MoveTo(behindPosition)
                end
            end
        end)
        
        -- Store connection
        FollowButton.FollowConnection = followConnection
    else
        FollowButton.Text = "Follow: OFF"
        FollowButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
        
        -- Disconnect follow loop
        if FollowButton.FollowConnection then
            FollowButton.FollowConnection:Disconnect()
            FollowButton.FollowConnection = nil
        end
    end
end

-- Run away function
local function ToggleRunAway()
    RunningAway = not RunningAway

    if RunningAway then
        RunButton.Text = "Run Away: ON"
        RunButton.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
        
        -- Get detection radius
        DetectionRadius = tonumber(RadiusInput.Text) or 20
        
        -- Run away loop
        local runConnection = RunService.Heartbeat:Connect(function()
            if RunningAway and Character and Character:FindFirstChild("HumanoidRootPart") and Character:FindFirstChild("Humanoid") then
                -- Check for nearby players
                local nearestPlayer, distance = FindNearestPlayer()
                
                if nearestPlayer then
                    -- Calculate escape position (opposite direction from nearest player)
                    local direction = (HumanoidRootPart.Position - nearestPlayer.Character.HumanoidRootPart.Position).Unit
                    local escapePosition = HumanoidRootPart.Position + direction * 10
                    
                    -- Move away from nearest player
                    Character.Humanoid:MoveTo(escapePosition)
                end
            end
        end)
        
        -- Store connection
        RunButton.RunConnection = runConnection
    else
        RunButton.Text = "Run Away: OFF"
        RunButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
        
        -- Disconnect run away loop
        if RunButton.RunConnection then
            RunButton.RunConnection:Disconnect()
            RunButton.RunConnection = nil
        end
    end
end

-- Toggle auto next target
local function ToggleAutoNext()
    AutoNextTarget = not AutoNextTarget

    if AutoNextTarget then
        NextButton.Text = "Auto Next: ON"
        NextButton.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
        AutoNextCheck.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
    else
        NextButton.Text = "Auto Next: OFF"
        NextButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        AutoNextCheck.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    end
end

-- Save current position
local function SaveCurrentPosition()
    if Character and Character:FindFirstChild("HumanoidRootPart") then
        SavedPosition = HumanoidRootPart.CFrame
        
        -- Show confirmation message
        local confirmMsg = Instance.new("TextLabel")
        confirmMsg.Size = UDim2.new(0.9, 0, 0, 20)
        confirmMsg.Position = UDim2.new(0.05, 0, 0, 75)
        confirmMsg.BackgroundTransparency = 1
        confirmMsg.TextColor3 = Color3.fromRGB(0, 255, 0)
        confirmMsg.TextSize = 12
        confirmMsg.Font = Enum.Font.SourceSans
        confirmMsg.Text = "Position saved!"
        confirmMsg.Parent = PositionSection
        
        -- Remove after 2 seconds
        task.delay(2, function()
            confirmMsg:Destroy()
        end)
    end
end

-- Teleport to saved position
local function TeleportToSavedPosition()
    if SavedPosition and Character and Character:FindFirstChild("HumanoidRootPart") then
        HumanoidRootPart.CFrame = SavedPosition
    else
        -- Show error message
        local errorMsg = Instance.new("TextLabel")
        errorMsg.Size = UDim2.new(0.9, 0, 0, 20)
        errorMsg.Position = UDim2.new(0.05, 0, 0, 75)
        errorMsg.BackgroundTransparency = 1
        errorMsg.TextColor3 = Color3.fromRGB(255, 0, 0)
        errorMsg.TextSize = 12
        errorMsg.Font = Enum.Font.SourceSans
        errorMsg.Text = "No position saved!"
        errorMsg.Parent = PositionSection
        
        -- Remove after 2 seconds
        task.delay(2, function()
            errorMsg:Destroy()
        end)
    end
end

-- Toggle auto check position
local function ToggleAutoCheckPosition()
    AutoCheckPosition = not AutoCheckPosition

    if AutoCheckPosition then
        AutoCheckButton.Text = "ON"
        AutoCheckButton.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
        
        -- Get safe position boundaries
        local verticalMin = tonumber(VerticalMinInput.Text) or -1000
        local verticalMax = tonumber(VerticalMaxInput.Text) or 1000
        local horizontalMin = tonumber(HorizontalMinInput.Text) or -1000
        local horizontalMax = tonumber(HorizontalMaxInput.Text) or 1000
        
        SafePositionMin = Vector3.new(horizontalMin, verticalMin, horizontalMin)
        SafePositionMax = Vector3.new(horizontalMax, verticalMax, horizontalMax)
        
        -- Auto check loop
        local checkConnection = RunService.Heartbeat:Connect(function()
            if AutoCheckPosition and Character and Character:FindFirstChild("HumanoidRootPart") then
                local pos = HumanoidRootPart.Position
                
                -- Check if position is outside safe boundaries
                if pos.Y < SafePositionMin.Y or pos.Y > SafePositionMax.Y or
                   pos.X < SafePositionMin.X or pos.X > SafePositionMax.X or
                   pos.Z < SafePositionMin.Z or pos.Z > SafePositionMax.Z then
                    
                    -- If we have a saved position, teleport to it
                    if SavedPosition then
                        HumanoidRootPart.CFrame = SavedPosition
                    else
                        -- Otherwise, try to move back to a safe position
                        local safeY = math.clamp(pos.Y, SafePositionMin.Y, SafePositionMax.Y)
                        local safeX = math.clamp(pos.X, SafePositionMin.X, SafePositionMax.X)
                        local safeZ = math.clamp(pos.Z, SafePositionMin.Z, SafePositionMax.Z)
                        
                        HumanoidRootPart.CFrame = CFrame.new(safeX, safeY, safeZ, HumanoidRootPart.CFrame:GetComponents())
                    end
                end
            end
        end)
        
        -- Store connection
        AutoCheckButton.CheckConnection = checkConnection
    else
        AutoCheckButton.Text = "OFF"
        AutoCheckButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
        
        -- Disconnect auto check loop
        if AutoCheckButton.CheckConnection then
            AutoCheckButton.CheckConnection:Disconnect()
            AutoCheckButton.CheckConnection = nil
        end
    end
end

-- Apply safety settings
local function ApplySafetySettings()
    -- Get values from inputs
    local verticalMin = tonumber(VerticalMinInput.Text) or -1000
    local verticalMax = tonumber(VerticalMaxInput.Text) or 1000
    local horizontalMin = tonumber(HorizontalMinInput.Text) or -1000
    local horizontalMax = tonumber(HorizontalMaxInput.Text) or 1000

    -- Update safe position boundaries
    SafePositionMin = Vector3.new(horizontalMin, verticalMin, horizontalMin)
    SafePositionMax = Vector3.new(horizontalMax, verticalMax, horizontalMax)

    -- Show confirmation message
    local confirmMsg = Instance.new("TextLabel")
    confirmMsg.Size = UDim2.new(0.9, 0, 0, 20)
    confirmMsg.Position = UDim2.new(0.05, 0, 0, 270)
    confirmMsg.BackgroundTransparency = 1
    confirmMsg.TextColor3 = Color3.fromRGB(0, 255, 0)
    confirmMsg.TextSize = 12
    confirmMsg.Font = Enum.Font.SourceSans
    confirmMsg.Text = "Settings applied!"
    confirmMsg.Parent = SubMenuContent

    -- Remove after 2 seconds
    task.delay(2, function()
        confirmMsg:Destroy()
    end)

    -- If auto check is on, restart it with new settings
    if AutoCheckPosition then
        if AutoCheckButton.CheckConnection then
            AutoCheckButton.CheckConnection:Disconnect()
            AutoCheckButton.CheckConnection = nil
        end
        ToggleAutoCheckPosition()
        ToggleAutoCheckPosition()
    end
end

-- Toggle submenu
local function ToggleSubMenu()
    SubMenuVisible = not SubMenuVisible
    SubMenuFrame.Visible = SubMenuVisible
end

-- Toggle ESP
local function ToggleESP()
    ESPEnabled = not ESPEnabled
    
    if ESPEnabled then
        ESPButton.Text = "ESP: ON"
        ESPButton.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
        
        -- Clear existing ESP
        for _, espObject in pairs(ESPObjects) do
            if espObject.billboard then
                espObject.billboard:Destroy()
            end
        end
        ESPObjects = {}
        
        -- Create ESP for all players
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("Head") then
                local espBillboard = Instance.new("BillboardGui")
                espBillboard.Name = "ESP_" .. player.Name
                espBillboard.Size = UDim2.new(0, 200, 0, 50)
                espBillboard.StudsOffset = Vector3.new(0, 3, 0)
                espBillboard.AlwaysOnTop = ESPSettings.ShowThroughWalls
                espBillboard.MaxDistance = math.huge -- Visible from any distance
                espBillboard.Parent = player.Character.Head
                
                local espText = Instance.new("TextLabel")
                espText.Name = "ESPText"
                espText.Size = UDim2.new(1, 0, 1, 0)
                espText.BackgroundTransparency = 1
                espText.TextColor3 = ESPSettings.TextColor
                espText.TextSize = ESPSettings.FontSize
                espText.Font = Enum.Font.SourceSansBold
                espText.Text = player.Name
                espText.Parent = espBillboard
                
                -- Store ESP object
                ESPObjects[player.UserId] = {
                    billboard = espBillboard,
                    textLabel = espText
                }
            end
        end
        
        -- Update ESP text for distance and health
        local espUpdateConnection = RunService.Heartbeat:Connect(function()
            if ESPEnabled and (ESPSettings.ShowDistance or ESPSettings.ShowHealth) then
                for _, player in pairs(Players:GetPlayers()) do
                    if player ~= LocalPlayer and ESPObjects[player.UserId] and player.Character then
                        local espObject = ESPObjects[player.UserId]
                        
                        if espObject.textLabel then
                            -- Update text based on settings
                            local text = ""
                            if ESPSettings.ShowName then
                                text = player.Name
                            end
                            
                            if ESPSettings.ShowDistance and Character and HumanoidRootPart and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                                local distance = math.floor((player.Character.HumanoidRootPart.Position - HumanoidRootPart.Position).Magnitude)
                                if text ~= "" then
                                    text = text .. " [" .. distance .. "m]"
                                else
                                    text = "[" .. distance .. "m]"
                                end
                            end
                            
                            if ESPSettings.ShowHealth and player.Character and player.Character:FindFirstChild("Humanoid") then
                                local health = math.floor(player.Character.Humanoid.Health)
                                local maxHealth = math.floor(player.Character.Humanoid.MaxHealth)
                                if text ~= "" then
                                    text = text .. " (" .. health .. "/" .. maxHealth .. ")"
                                else
                                    text = "(" .. health .. "/" .. maxHealth .. ")"
                                end
                            end
                            
                            espObject.textLabel.Text = text
                        end
                    end
                end
            end
        end)
        
        -- Store connection
        ESPButton.ESPUpdateConnection = espUpdateConnection
    else
        ESPButton.Text = "ESP: OFF"
        ESPButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
        
        -- Disconnect ESP update loop
        if ESPButton.ESPUpdateConnection then
            ESPButton.ESPUpdateConnection:Disconnect()
            ESPButton.ESPUpdateConnection = nil
        end
        
        -- Clear existing ESP
        for _, espObject in pairs(ESPObjects) do
            if espObject.billboard then
                espObject.billboard:Destroy()
            end
        end
        ESPObjects = {}
    end
end

-- Apply ESP settings
local function ApplyESPSettings()
    -- Parse text color
    local colorText = TextColorInput.Text
    local r, g, b = 255, 255, 255

    if colorText:match("^%d+,%d+,%d+$") then
        r, g, b = colorText:match("(%d+),(%d+),(%d+)")
        r, g, b = tonumber(r), tonumber(g), tonumber(b)
    elseif colorText:match("^#%x%x%x%x%x%x$") then
        local hex = colorText:sub(2)
        r = tonumber(hex:sub(1, 2), 16)
        g = tonumber(hex:sub(3, 4), 16)
        b = tonumber(hex:sub(5, 6), 16)
    end

    -- Clamp RGB values
    r = math.clamp(r or 255, 0, 255)
    g = math.clamp(g or 255, 0, 255)
    b = math.clamp(b or 255, 0, 255)

    -- Update color preview
    ColorPreview.BackgroundColor3 = Color3.fromRGB(r, g, b)

    -- Update ESP settings
    ESPSettings.FontSize = tonumber(FontSizeInput.Text) or 18
    ESPSettings.TextColor = Color3.fromRGB(r, g, b)
    ESPSettings.ShowThroughWalls = WallsCheck.BackgroundColor3 == Color3.fromRGB(0, 255, 0)
    ESPSettings.ShowName = NameCheck.BackgroundColor3 == Color3.fromRGB(0, 255, 0)
    ESPSettings.ShowDistance = DistanceCheck.BackgroundColor3 == Color3.fromRGB(0, 255, 0)
    ESPSettings.ShowHealth = HealthCheck.BackgroundColor3 == Color3.fromRGB(0, 255, 0)

    -- Update existing ESP
    if ESPEnabled then
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and ESPObjects[player.UserId] then
                local espObject = ESPObjects[player.UserId]
                
                if espObject.billboard then
                    espObject.billboard.AlwaysOnTop = ESPSettings.ShowThroughWalls
                    
                    if espObject.textLabel then
                        espObject.textLabel.TextColor3 = ESPSettings.TextColor
                        espObject.textLabel.TextSize = ESPSettings.FontSize
                    end
                end
            end
        end
    end

    -- Show confirmation message
    local confirmMsg = Instance.new("TextLabel")
    confirmMsg.Size = UDim2.new(0.9, 0, 0, 20)
    confirmMsg.Position = UDim2.new(0.05, 0, 0, 220)
    confirmMsg.BackgroundTransparency = 1
    confirmMsg.TextColor3 = Color3.fromRGB(0, 255, 0)
    confirmMsg.TextSize = 12
    confirmMsg.Font = Enum.Font.SourceSans
    confirmMsg.Text = "ESP settings applied!"
    confirmMsg.Parent = ESPSettingsSection

    -- Remove after 2 seconds
    task.delay(2, function()
        confirmMsg:Destroy()
    end)
end

-- Apply icon settings
local function ApplyIconSettings()
    -- Update icon settings
    IconSettings.Size = tonumber(IconSizeInput.Text) or 50
    IconSettings.Draggable = DraggableCheck.BackgroundColor3 == Color3.fromRGB(0, 255, 0)
    IconSettings.ImageUrl = IconURLInput.Text
    
    -- Check VIP password
    if VIPPasswordInput.Text == VIP_PASSWORD then
        -- Special VIP icon
        IconSettings.ImageUrl = "rbxassetid://7072706620" -- Special VIP icon
        
        -- Show VIP confirmation
        local vipMsg = Instance.new("TextLabel")
        vipMsg.Size = UDim2.new(0.9, 0, 0, 20)
        vipMsg.Position = UDim2.new(0.05, 0, 0, 200)
        vipMsg.BackgroundTransparency = 1
        vipMsg.TextColor3 = Color3.fromRGB(255, 215, 0) -- Gold color
        vipMsg.TextSize = 12
        vipMsg.Font = Enum.Font.SourceSansBold
        vipMsg.Text = "VIP Status Activated!"
        vipMsg.Parent = IconSettingsSection
        
        -- Remove after 3 seconds
        task.delay(3, function()
            vipMsg:Destroy()
        end)
    end

    -- Update minimized icon
    MinimizedIcon.Size = UDim2.new(0, IconSettings.Size, 0, IconSettings.Size)
    MinimizedIcon.Image = IconSettings.ImageUrl
    MinimizedIcon.Draggable = IconSettings.Draggable

    -- Show confirmation message
    local confirmMsg = Instance.new("TextLabel")
    confirmMsg.Size = UDim2.new(0.9, 0, 0, 20)
    confirmMsg.Position = UDim2.new(0.05, 0, 0, 240)
    confirmMsg.BackgroundTransparency = 1
    confirmMsg.TextColor3 = Color3.fromRGB(0, 255, 0)
    confirmMsg.TextSize = 12
    confirmMsg.Font = Enum.Font.SourceSans
    confirmMsg.Text = "Icon settings applied!"
    confirmMsg.Parent = IconSettingsSection

    -- Remove after 2 seconds
    task.delay(2, function()
        confirmMsg:Destroy()
    end)
end

-- Apply anti-detection settings
local function ApplyAntiDetectionSettings()
    -- Update anti-detection settings
    AntiKickEnabled = AntiKickCheck.BackgroundColor3 == Color3.fromRGB(0, 255, 0)
    AntiTeleportEnabled = AntiTeleportCheck.BackgroundColor3 == Color3.fromRGB(0, 255, 0)
    AntiSpeedEnabled = AntiSpeedCheck.BackgroundColor3 == Color3.fromRGB(0, 255, 0)
    
    -- Apply anti-kick if enabled
    if AntiKickEnabled then
        -- Hook the kick function
        local oldKick
        oldKick = hookfunction(LocalPlayer.Kick, function(self, ...)
            print("Blocked kick attempt")
            return nil
        end)
    end
    
    -- Apply anti-teleport if enabled
    if AntiTeleportEnabled then
        -- Monitor teleport attempts
        local oldTeleport
        oldTeleport = hookfunction(HumanoidRootPart.GetPropertyChangedSignal, function(self, prop)
            if prop == "CFrame" and self == HumanoidRootPart then
                print("Blocked unexpected teleport attempt")
                return nil
            end
            return oldTeleport(self, prop)
        end)
    end
    
    -- Apply anti-speed detection if enabled
    if AntiSpeedEnabled then
        -- Monitor speed changes
        local oldWalkSpeed = Humanoid.WalkSpeed
        Humanoid:GetPropertyChangedSignal("WalkSpeed"):Connect(function()
            if AntiSpeedEnabled and Humanoid.WalkSpeed > 50 then
                Humanoid.WalkSpeed = 50 -- Cap speed to avoid detection
                print("Speed capped to avoid detection")
            end
        end)
    end

    -- Show confirmation message
    local confirmMsg = Instance.new("TextLabel")
    confirmMsg.Size = UDim2.new(0.9, 0, 0, 20)
    confirmMsg.Position = UDim2.new(0.05, 0, 0, 150)
    confirmMsg.BackgroundTransparency = 1
    confirmMsg.TextColor3 = Color3.fromRGB(0, 255, 0)
    confirmMsg.TextSize = 12
    confirmMsg.Font = Enum.Font.SourceSans
    confirmMsg.Text = "Anti-detection settings applied!"
    confirmMsg.Parent = AntiDetectionSection

    -- Remove after 2 seconds
    task.delay(2, function()
        confirmMsg:Destroy()
    end)
end

-- Toggle look at player function
local function ToggleLookAtPlayer()
    LookingAtPlayer = not LookingAtPlayer
    
    if LookingAtPlayer then
        if not LookTarget then
            -- Try to use TargetPlayer if available
            if TargetPlayer then
                LookTarget = TargetPlayer
                CurrentTargetLabel.Text = "Current Target: " .. TargetPlayer.Name
            else
                -- Find nearest player if no target
                local nearestPlayer = FindNearestPlayer()
                if nearestPlayer then
                    LookTarget = nearestPlayer
                    CurrentTargetLabel.Text = "Current Target: " .. nearestPlayer.Name
                else
                    LookingAtPlayer = false
                    return
                end
            end
        end
        
        LookAtButton.Text = "Look At: ON"
        LookAtButton.BackgroundColor3 = Color3.fromRGB(0, 180, 0)
        
        -- Create look at connection
        local lookConnection = RunService.RenderStepped:Connect(function()
            if LookingAtPlayer and LookTarget and LookTarget.Character and LookTarget.Character:FindFirstChild(LookBodyPart) and Camera then
                Camera.CFrame = CFrame.new(Camera.CFrame.Position, LookTarget.Character[LookBodyPart].Position)
            end
        end)
        
        -- Store connection
        LookAtButton.LookConnection = lookConnection
    else
        LookAtButton.Text = "Look At: OFF"
        LookAtButton.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
        
        -- Disconnect look connection
        if LookAtButton.LookConnection then
            LookAtButton.LookConnection:Disconnect()
            LookAtButton.LookConnection = nil
        end
    end
end

-- Cycle through body parts
local function CycleBodyPart()
    BodyPartIndex = (BodyPartIndex % #BodyParts) + 1
    LookBodyPart = BodyParts[BodyPartIndex]
    BodyPartButton.Text = "Part: " .. LookBodyPart
end

-- Teleport behind target
local function TeleportBehindTarget()
    if LookTarget and LookTarget.Character and LookTarget.Character:FindFirstChild("HumanoidRootPart") and Character and Character:FindFirstChild("HumanoidRootPart") then
        local targetHRP = LookTarget.Character.HumanoidRootPart
        local lookVector = targetHRP.CFrame.LookVector
        
        -- Get distance values
        DistanceBehind = tonumber(HorizontalInput.Text) or 5
        DistanceAbove = tonumber(VerticalInput.Text) or 0
        
        -- Calculate position behind target
        local teleportPosition = targetHRP.Position - (lookVector * DistanceBehind)
        teleportPosition = teleportPosition + Vector3.new(0, DistanceAbove, 0)
        
        -- Teleport behind target
        HumanoidRootPart.CFrame = CFrame.new(teleportPosition, targetHRP.Position)
    else
        -- Show error message
        local errorMsg = Instance.new("TextLabel")
        errorMsg.Size = UDim2.new(0.9, 0, 0, 20)
        errorMsg.Position = UDim2.new(0.05, 0, 0, 155)
        errorMsg.BackgroundTransparency = 1
        errorMsg.TextColor3 = Color3.fromRGB(255, 0, 0)
        errorMsg.TextSize = 12
        errorMsg.Font = Enum.Font.SourceSans
        errorMsg.Text = "No target selected!"
        errorMsg.Parent = LookAtSection
        
        -- Remove after 2 seconds
        task.delay(2, function()
            errorMsg:Destroy()
        end)
    end
end

-- Event Connections
CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()

    -- Clean up
    if NoClipping then
        ToggleNoclip()
    end
    if AutoPlatform then
        TogglePlatform()
    end
    if FollowingTarget then
        ToggleFollowTarget()
    end
    if RunningAway then
        ToggleRunAway()
    end
    if AutoCheckPosition then
        ToggleAutoCheckPosition()
    end
    if LookingAtPlayer then
        ToggleLookAtPlayer()
    end
    if ESPEnabled then
        ToggleESP()
    end
end)

MinimizeButton.MouseButton1Click:Connect(function()
    Minimized = true
    MainFrame.Visible = false
    MinimizedIcon.Visible = true
end)

MinimizedIcon.MouseButton1Click:Connect(function()
    Minimized = false
    MainFrame.Visible = true
    MinimizedIcon.Visible = false
end)

SubMenuButton.MouseButton1Click:Connect(function()
    ToggleSubMenu()
end)

SubMenuCloseButton.MouseButton1Click:Connect(function()
    SubMenuFrame.Visible = false
    SubMenuVisible = false
end)

SubmitButton.MouseButton1Click:Connect(function()
    if KeyInput.Text == KEY then
        Authenticated = true
        AuthFrame.Visible = false
        FeaturesFrame.Visible = true
        PopulatePlayerList() -- Initialize player list
    else
        KeyInput.Text = ""
        KeyInput.PlaceholderText = "Invalid Key! Try Again..."
        
        -- Shake animation for invalid key
        local originalPosition = AuthFrame.Position
        for i = 1, 5 do
            AuthFrame.Position = originalPosition + UDim2.new(0, math.random(-5, 5), 0, 0)
            task.wait(0.05)
        end
        AuthFrame.Position = originalPosition
    end
end)

TargetDropdown.MouseButton1Click:Connect(function()
    DropdownFrame.Visible = not DropdownFrame.Visible
end)

ReloadButton.MouseButton1Click:Connect(function()
    -- Show loading indicator
    ReloadButton.Text = "Loading..."
    
    -- Delay to simulate loading
    task.delay(0.5, function()
        -- Populate player list with all current players
        PopulatePlayerList()
        
        -- Reset button text
        ReloadButton.Text = "Reload"
        
        -- Show confirmation message
        local confirmMsg = Instance.new("TextLabel")
        confirmMsg.Size = UDim2.new(0.9, 0, 0, 20)
        confirmMsg.Position = UDim2.new(0.05, 0, 0, 155)
        confirmMsg.BackgroundTransparency = 1
        confirmMsg.TextColor3 = Color3.fromRGB(0, 255, 0)
        confirmMsg.TextSize = 12
        confirmMsg.Font = Enum.Font.SourceSans
        confirmMsg.Text = "Player list updated!"
        confirmMsg.Parent = TargetSection
        
        -- Remove after 2 seconds
        task.delay(2, function()
            confirmMsg:Destroy()
        end)
    end)
end)

SelectNearestTargetButton.MouseButton1Click:Connect(function()
    local nearestPlayer, distance = FindNearestPlayer()
    
    if nearestPlayer then
        TargetPlayer = nearestPlayer
        LookTarget = nearestPlayer
        TargetDropdown.Text = nearestPlayer.Name
        CurrentTargetLabel.Text = "Current Target: " .. nearestPlayer.Name
        
        -- Show confirmation message
        local confirmMsg = Instance.new("TextLabel")
        confirmMsg.Size = UDim2.new(0.9, 0, 0, 20)
        confirmMsg.Position = UDim2.new(0.05, 0, 0, 155)
        confirmMsg.BackgroundTransparency = 1
        confirmMsg.TextColor3 = Color3.fromRGB(0, 255, 0)
        confirmMsg.TextSize = 12
        confirmMsg.Font = Enum.Font.SourceSans
        confirmMsg.Text = "Selected nearest player: " .. nearestPlayer.Name .. " (" .. math.floor(distance) .. "m)"
        confirmMsg.Parent = TargetSection
        
        -- Remove after 2 seconds
        task.delay(2, function()
            confirmMsg:Destroy()
        end)
    else
        -- Show error message
        local errorMsg = Instance.new("TextLabel")
        errorMsg.Size = UDim2.new(0.9, 0, 0, 20)
        errorMsg.Position = UDim2.new(0.05, 0, 0, 155)
        errorMsg.BackgroundTransparency = 1
        errorMsg.TextColor3 = Color3.fromRGB(255, 0, 0)
        errorMsg.TextSize = 12
        errorMsg.Font = Enum.Font.SourceSans
        errorMsg.Text = "No players found within " .. DetectionRadius .. "m!"
        errorMsg.Parent = TargetSection
        
        -- Remove after 2 seconds
        task.delay(2, function()
            errorMsg:Destroy()
        end)
    end
end)

FollowButton.MouseButton1Click:Connect(function()
    ToggleFollowTarget()
end)

NextButton.MouseButton1Click:Connect(function()
    ToggleAutoNext()
end)

NoclipButton.MouseButton1Click:Connect(function()
    ToggleNoclip()
end)

PlatformButton.MouseButton1Click:Connect(function()
    TogglePlatform()
end)

RunButton.MouseButton1Click:Connect(function()
    ToggleRunAway()
end)

ESPButton.MouseButton1Click:Connect(function()
    ToggleESP()
end)

SavePositionButton.MouseButton1Click:Connect(function()
    SaveCurrentPosition()
end)

TeleportToSavedButton.MouseButton1Click:Connect(function()
    TeleportToSavedPosition()
end)

AutoCheckButton.MouseButton1Click:Connect(function()
    ToggleAutoCheckPosition()
end)

ApplySettingsButton.MouseButton1Click:Connect(function()
    ApplySafetySettings()
end)

ApplyESPButton.MouseButton1Click:Connect(function()
    ApplyESPSettings()
end)

ApplyIconButton.MouseButton1Click:Connect(function()
    ApplyIconSettings()
end)

ApplyAntiDetectionButton.MouseButton1Click:Connect(function()
    ApplyAntiDetectionSettings()
end)

LookAtButton.MouseButton1Click:Connect(function()
    ToggleLookAtPlayer()
end)

BodyPartButton.MouseButton1Click:Connect(function()
    CycleBodyPart()
end)

NearestPlayerButton.MouseButton1Click:Connect(function()
    local nearestPlayer, distance = FindNearestPlayer()
    
    if nearestPlayer then
        LookTarget = nearestPlayer
        CurrentTargetLabel.Text = "Current Target: " .. nearestPlayer.Name
        
        -- Show confirmation message
        local confirmMsg = Instance.new("TextLabel")
        confirmMsg.Size = UDim2.new(0.9, 0, 0, 20)
        confirmMsg.Position = UDim2.new(0.05, 0, 0, 155)
        confirmMsg.BackgroundTransparency = 1
        confirmMsg.TextColor3 = Color3.fromRGB(0, 255, 0)
        confirmMsg.TextSize = 12
        confirmMsg.Font = Enum.Font.SourceSans
        confirmMsg.Text = "Selected nearest player: " .. nearestPlayer.Name .. " (" .. math.floor(distance) .. "m)"
        confirmMsg.Parent = LookAtSection
        
        -- Remove after 2 seconds
        task.delay(2, function()
            confirmMsg:Destroy()
        end)
    else
        -- Show error message
        local errorMsg = Instance.new("TextLabel")
        errorMsg.Size = UDim2.new(0.9, 0, 0, 20)
        errorMsg.Position = UDim2.new(0.05, 0, 0, 155)
        errorMsg.BackgroundTransparency = 1
        errorMsg.TextColor3 = Color3.fromRGB(255, 0, 0)
        errorMsg.TextSize = 12
        errorMsg.Font = Enum.Font.SourceSans
        errorMsg.Text = "No players found within " .. DetectionRadius .. "m!"
        errorMsg.Parent = LookAtSection
        
        -- Remove after 2 seconds
        task.delay(2, function()
            errorMsg:Destroy()
        end)
    end
end)

TeleportBehindButton.MouseButton1Click:Connect(function()
    TeleportBehindTarget()
end)

-- ESP checkbox toggles
WallsCheck.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        ToggleCheckbox(WallsCheck)
    end
end)

NameCheck.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        ToggleCheckbox(NameCheck)
    end
end)

DistanceCheck.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        ToggleCheckbox(DistanceCheck)
    end
end)

HealthCheck.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        ToggleCheckbox(HealthCheck)
    end
end)

-- Icon settings toggles
DraggableCheck.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        ToggleCheckbox(DraggableCheck)
    end
end)

-- Anti-detection toggles
AntiKickCheck.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        ToggleCheckbox(AntiKickCheck)
    end
end)

AntiTeleportCheck.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        ToggleCheckbox(AntiTeleportCheck)
    end
end)

AntiSpeedCheck.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        ToggleCheckbox(AntiSpeedCheck)
    end
end)

-- Feature checkboxes
AutoNextCheck.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        ToggleAutoNext()
    end
end)

AutoPlatformCheck.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        TogglePlatform()
    end
end)

-- Distance control buttons
HorizontalPlus.MouseButton1Click:Connect(function()
    local currentValue = tonumber(HorizontalInput.Text) or 5
    HorizontalInput.Text = tostring(currentValue + 0.5)
    DistanceBehind = currentValue + 0.5
end)

HorizontalMinus.MouseButton1Click:Connect(function()
    local currentValue = tonumber(HorizontalInput.Text) or 5
    HorizontalInput.Text = tostring(math.max(0, currentValue - 0.5))
    DistanceBehind = math.max(0, currentValue - 0.5)
end)

VerticalPlus.MouseButton1Click:Connect(function()
    local currentValue = tonumber(VerticalInput.Text) or 0
    VerticalInput.Text = tostring(currentValue + 0.5)
    DistanceAbove = currentValue + 0.5
end)

VerticalMinus.MouseButton1Click:Connect(function()
    local currentValue = tonumber(VerticalInput.Text) or 0
    VerticalInput.Text = tostring(currentValue - 0.5)
    DistanceAbove = currentValue - 0.5
end)

RadiusPlus.MouseButton1Click:Connect(function()
    local currentValue = tonumber(RadiusInput.Text) or 20
    RadiusInput.Text = tostring(currentValue + 5)
    DetectionRadius = currentValue + 5
end)

RadiusMinus.MouseButton1Click:Connect(function()
    local currentValue = tonumber(RadiusInput.Text) or 20
    RadiusInput.Text = tostring(math.max(5, currentValue - 5))
    DetectionRadius = math.max(5, currentValue - 5)
end)

-- ESP font size buttons
FontSizePlus.MouseButton1Click:Connect(function()
    local size = tonumber(FontSizeInput.Text) or 18
    FontSizeInput.Text = tostring(size + 1)
end)

FontSizeMinus.MouseButton1Click:Connect(function()
    local size = tonumber(FontSizeInput.Text) or 18
    FontSizeInput.Text = tostring(math.max(8, size - 1))
end)

-- Icon size buttons
IconSizePlus.MouseButton1Click:Connect(function()
    local size = tonumber(IconSizeInput.Text) or 50
    IconSizeInput.Text = tostring(size + 5)
end)

IconSizeMinus.MouseButton1Click:Connect(function()
    local size = tonumber(IconSizeInput.Text) or 50
    IconSizeInput.Text = tostring(math.max(20, size - 5))
end)

DeleteButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
    
    -- Clean up all connections and objects
    if NoClipping then ToggleNoclip() end
    if AutoPlatform then TogglePlatform() end
    if FollowingTarget then ToggleFollowTarget() end
    if RunningAway then ToggleRunAway() end
    if AutoCheckPosition then ToggleAutoCheckPosition() end
    if LookingAtPlayer then ToggleLookAtPlayer() end
    if ESPEnabled then ToggleESP() end
    
    -- Remove any created objects in workspace
    for _, obj in pairs(workspace:GetChildren()) do
        if obj.Name == "ExecutorPlatform" then
            obj:Destroy()
        end
    end
end)

ExpiredDeleteButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

-- Character respawn handling
LocalPlayer.CharacterAdded:Connect(function(newCharacter)
    Character = newCharacter
    Humanoid = Character:WaitForChild("Humanoid")
    HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

    -- Reset states if needed
    if NoClipping then
        ToggleNoclip()
        task.wait(0.5)
        ToggleNoclip()
    end

    if AutoPlatform then
        TogglePlatform()
        task.wait(0.5)
        TogglePlatform()
    end

    if FollowingTarget then
        ToggleFollowTarget()
        task.wait(0.5)
        ToggleFollowTarget()
    end

    if RunningAway then
        ToggleRunAway()
        task.wait(0.5)
        ToggleRunAway()
    end

    if AutoCheckPosition then
        ToggleAutoCheckPosition()
        task.wait(0.5)
        ToggleAutoCheckPosition()
    end

    if LookingAtPlayer then
        ToggleLookAtPlayer()
        task.wait(0.5)
        ToggleLookAtPlayer()
    end
    
    if ESPEnabled then
        ToggleESP()
        task.wait(0.5)
        ToggleESP()
    end
end)

-- Player joining/leaving handling
Players.PlayerAdded:Connect(function(player)
    if Authenticated then
        -- Add new player to ESP if enabled
        if ESPEnabled then
            -- Wait for character to load
            player.CharacterAdded:Wait()
            task.wait(1)
            
            if player.Character and player.Character:FindFirstChild("Head") then
                local espBillboard = Instance.new("BillboardGui")
                espBillboard.Name = "ESP_" .. player.Name
                espBillboard.Size = UDim2.new(0, 200, 0, 50)
                espBillboard.StudsOffset = Vector3.new(0, 3, 0)
                espBillboard.AlwaysOnTop = ESPSettings.ShowThroughWalls
                espBillboard.MaxDistance = math.huge -- Visible from any distance
                espBillboard.Parent = player.Character.Head
                
                local espText = Instance.new("TextLabel")
                espText.Name = "ESPText"
                espText.Size = UDim2.new(1, 0, 1, 0)
                espText.BackgroundTransparency = 1
                espText.TextColor3 = ESPSettings.TextColor
                espText.TextSize = ESPSettings.FontSize
                espText.Font = Enum.Font.SourceSansBold
                espText.Text = player.Name
                espText.Parent = espBillboard
                
                -- Store ESP object
                ESPObjects[player.UserId] = {
                    billboard = espBillboard,
                    textLabel = espText
                }
            end
        end
        
        -- Update player list
        PopulatePlayerList()
    end
end)

Players.PlayerRemoving:Connect(function(player)
    if Authenticated then
        -- Check if removed player was the target
        if TargetPlayer == player then
            TargetPlayer = nil
            TargetDropdown.Text = "Select Target"
            
            -- Turn off following if target left
            if FollowingTarget then
                ToggleFollowTarget()
            end
        end
        
        -- Check if removed player was the look target
        if LookTarget == player then
            LookTarget = nil
            CurrentTargetLabel.Text = "Current Target: None"
            
            -- Turn off looking if target left
            if LookingAtPlayer then
                ToggleLookAtPlayer()
            end
        end
        
        -- Remove ESP for player
        if ESPObjects[player.UserId] then
            if ESPObjects[player.UserId].billboard then
                ESPObjects[player.UserId].billboard:Destroy()
            end
            ESPObjects[player.UserId] = nil
        end
        
        -- Update player list
        PopulatePlayerList()
    end
end)

-- Start rainbow effect
StartRainbowEffect()

-- Initial expiration check
CheckExpiration()

-- Set up expiration timer
spawn(function()
    while wait(1) do
        if CheckExpiration() then
            break
        end
    end
end)

-- Limit dragging to screen bounds
RunService.RenderStepped:Connect(function()
    if MainFrame.Visible then
        local screenSize = workspace.CurrentCamera.ViewportSize
        local frameSize = MainFrame.AbsoluteSize
        local minX = 0
        local minY = 0
        local maxX = screenSize.X - frameSize.X
        local maxY = screenSize.Y - frameSize.Y

        local newX = math.clamp(MainFrame.AbsolutePosition.X, minX, maxX)
        local newY = math.clamp(MainFrame.AbsolutePosition.Y, minY, maxY)

        if MainFrame.AbsolutePosition.X ~= newX or MainFrame.AbsolutePosition.Y ~= newY then
            MainFrame.Position = UDim2.new(0, newX, 0, newY)
        end
    end
    
    if MinimizedIcon.Visible then
        local screenSize = workspace.CurrentCamera.ViewportSize
        local iconSize = MinimizedIcon.AbsoluteSize
        local minX = 0
        local minY = 0
        local maxX = screenSize.X - iconSize.X
        local maxY = screenSize.Y - iconSize.Y

        local newX = math.clamp(MinimizedIcon.AbsolutePosition.X, minX, maxX)
        local newY = math.clamp(MinimizedIcon.AbsolutePosition.Y, minY, maxY)

        if MinimizedIcon.AbsolutePosition.X ~= newX or MinimizedIcon.AbsolutePosition.Y ~= newY then
            MinimizedIcon.Position = UDim2.new(0, newX, 0, newY)
        end
    end
    
    if SubMenuFrame.Visible then
        local screenSize = workspace.CurrentCamera.ViewportSize
        local frameSize = SubMenuFrame.AbsoluteSize
        local minX = 0
        local minY = 0
        local maxX = screenSize.X - frameSize.X
        local maxY = screenSize.Y - frameSize.Y

        local newX = math.clamp(SubMenuFrame.AbsolutePosition.X, minX, maxX)
        local newY = math.clamp(SubMenuFrame.AbsolutePosition.Y, minY, maxY)

        if SubMenuFrame.AbsolutePosition.X ~= newX or SubMenuFrame.AbsolutePosition.Y ~= newY then
            SubMenuFrame.Position = UDim2.new(0, newX, 0, newY)
        end
    end
end)

print("Enhanced Roblox Executor Script loaded successfully!")

